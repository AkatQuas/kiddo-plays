{
  "version": 3,
  "sources": ["../../../../../../front_end/ui/legacy/UIUtils.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n/*\n * Copyright (C) 2011 Google Inc.  All rights reserved.\n * Copyright (C) 2006, 2007, 2008 Apple Inc.  All rights reserved.\n * Copyright (C) 2007 Matt Lilek (pewtermoose@gmail.com).\n * Copyright (C) 2009 Joseph Pecoraro\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions\n * are met:\n *\n * 1.  Redistributions of source code must retain the above copyright\n *     notice, this list of conditions and the following disclaimer.\n * 2.  Redistributions in binary form must reproduce the above copyright\n *     notice, this list of conditions and the following disclaimer in the\n *     documentation and/or other materials provided with the distribution.\n * 3.  Neither the name of Apple Computer, Inc. (\"Apple\") nor the names of\n *     its contributors may be used to endorse or promote products derived\n *     from this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY APPLE AND ITS CONTRIBUTORS \"AS IS\" AND ANY\n * EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL APPLE OR ITS CONTRIBUTORS BE LIABLE FOR ANY\n * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES\n * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;\n * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF\n * THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as DOMExtension from '../../core/dom_extension/dom_extension.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as TextUtils from '../../models/text_utils/text_utils.js';\n\nimport * as ARIAUtils from './ARIAUtils.js';\nimport {Dialog} from './Dialog.js';\nimport {Size} from './Geometry.js';\nimport {GlassPane, PointerEventsBehavior, SizeBehavior} from './GlassPane.js';\nimport {Icon} from './Icon.js';\nimport {KeyboardShortcut} from './KeyboardShortcut.js';\nimport * as Utils from './utils/utils.js';\n\nimport type {ToolbarButton} from './Toolbar.js';\nimport {Toolbar} from './Toolbar.js';\nimport {Tooltip} from './Tooltip.js';\nimport type {TreeOutline} from './Treeoutline.js';\nimport checkboxTextLabelStyles from './checkboxTextLabel.css.legacy.js';\nimport closeButtonStyles from './closeButton.css.legacy.js';\nimport confirmDialogStyles from './confirmDialog.css.legacy.js';\nimport inlineButtonStyles from './inlineButton.css.legacy.js';\nimport radioButtonStyles from './radioButton.css.legacy.js';\nimport sliderStyles from './slider.css.legacy.js';\nimport smallBubbleStyles from './smallBubble.css.legacy.js';\n\nconst UIStrings = {\n  /**\n  *@description label to open link externally\n  */\n  openInNewTab: 'Open in new tab',\n  /**\n  *@description label to copy link address\n  */\n  copyLinkAddress: 'Copy link address',\n  /**\n  *@description label to copy file name\n  */\n  copyFileName: 'Copy file name',\n  /**\n  *@description label for the profiler control button\n  */\n  anotherProfilerIsAlreadyActive: 'Another profiler is already active',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseResolvedAsync: 'Promise resolved (async)',\n  /**\n  *@description Text in UIUtils\n  */\n  promiseRejectedAsync: 'Promise rejected (async)',\n  /**\n  *@description Text in UIUtils\n  *@example {Promise} PH1\n  */\n  sAsync: '{PH1} (async)',\n  /**\n  *@description Text for the title of asynchronous function calls group in Call Stack\n  */\n  asyncCall: 'Async Call',\n  /**\n  *@description Text for the name of anonymous functions\n  */\n  anonymous: '(anonymous)',\n  /**\n  *@description Text to close something\n  */\n  close: 'Close',\n  /**\n  *@description Text on a button for message dialog\n  */\n  ok: 'OK',\n  /**\n  *@description Text to cancel something\n  */\n  cancel: 'Cancel',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/UIUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport const highlightedSearchResultClassName = 'highlighted-search-result';\nexport const highlightedCurrentSearchResultClassName = 'current-search-result';\n\nexport function installDragHandle(\n    element: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null, elementDrag: (arg0: MouseEvent) => void,\n    elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null, hoverCursor?: string|null,\n    startDelay?: number): void {\n  function onMouseDown(event: Event): void {\n    const dragHandler = new DragHandler();\n    const dragStart = (): void =>\n        dragHandler.elementDragStart(element, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n    if (startDelay) {\n      startTimer = window.setTimeout(dragStart, startDelay);\n    } else {\n      dragStart();\n    }\n  }\n\n  function onMouseUp(): void {\n    if (startTimer) {\n      window.clearTimeout(startTimer);\n    }\n    startTimer = null;\n  }\n\n  let startTimer: number|null;\n  element.addEventListener('pointerdown', onMouseDown, false);\n  if (startDelay) {\n    element.addEventListener('pointerup', onMouseUp, false);\n  }\n  if (hoverCursor !== null) {\n    (element as HTMLElement).style.cursor = hoverCursor || cursor || '';\n  }\n}\n\nexport function elementDragStart(\n    targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n    elementDrag: (arg0: MouseEvent) => void, elementDragEnd: ((arg0: MouseEvent) => void)|null, cursor: string|null,\n    event: Event): void {\n  const dragHandler = new DragHandler();\n  dragHandler.elementDragStart(targetElement, elementDragStart, elementDrag, elementDragEnd, cursor, event);\n}\n\nclass DragHandler {\n  private glassPaneInUse?: boolean;\n  private elementDraggingEventListener?: ((arg0: MouseEvent) => void|boolean);\n  private elementEndDraggingEventListener?: ((arg0: MouseEvent) => void)|null;\n  private dragEventsTargetDocument?: Document;\n  private dragEventsTargetDocumentTop?: Document;\n  private restoreCursorAfterDrag?: (() => void);\n\n  constructor() {\n    this.elementDragMove = this.elementDragMove.bind(this);\n    this.elementDragEnd = this.elementDragEnd.bind(this);\n    this.mouseOutWhileDragging = this.mouseOutWhileDragging.bind(this);\n  }\n\n  private createGlassPane(): void {\n    this.glassPaneInUse = true;\n    if (!DragHandler.glassPaneUsageCount++) {\n      DragHandler.glassPane = new GlassPane();\n      DragHandler.glassPane.setPointerEventsBehavior(PointerEventsBehavior.BlockedByGlassPane);\n      if (DragHandler.documentForMouseOut) {\n        DragHandler.glassPane.show(DragHandler.documentForMouseOut);\n      }\n    }\n  }\n\n  private disposeGlassPane(): void {\n    if (!this.glassPaneInUse) {\n      return;\n    }\n    this.glassPaneInUse = false;\n    if (--DragHandler.glassPaneUsageCount) {\n      return;\n    }\n    if (DragHandler.glassPane) {\n      DragHandler.glassPane.hide();\n      DragHandler.glassPane = null;\n    }\n    DragHandler.documentForMouseOut = null;\n    DragHandler.rootForMouseOut = null;\n  }\n\n  elementDragStart(\n      targetElement: Element, elementDragStart: ((arg0: MouseEvent) => boolean)|null,\n      elementDrag: (arg0: MouseEvent) => void|boolean, elementDragEnd: ((arg0: MouseEvent) => void)|null,\n      cursor: string|null, ev: Event): void {\n    const event = (ev as MouseEvent);\n    // Only drag upon left button. Right will likely cause a context menu. So will ctrl-click on mac.\n    if (event.button || (Host.Platform.isMac() && event.ctrlKey)) {\n      return;\n    }\n\n    if (this.elementDraggingEventListener) {\n      return;\n    }\n\n    if (elementDragStart && !elementDragStart((event as MouseEvent))) {\n      return;\n    }\n\n    const targetDocument = (event.target instanceof Node && event.target.ownerDocument) as Document;\n    this.elementDraggingEventListener = elementDrag;\n    this.elementEndDraggingEventListener = elementDragEnd;\n    console.assert(\n        (DragHandler.documentForMouseOut || targetDocument) === targetDocument, 'Dragging on multiple documents.');\n    DragHandler.documentForMouseOut = targetDocument;\n    DragHandler.rootForMouseOut = event.target instanceof Node && event.target.getRootNode() || null;\n    this.dragEventsTargetDocument = targetDocument;\n    try {\n      if (targetDocument.defaultView && targetDocument.defaultView.top) {\n        this.dragEventsTargetDocumentTop = targetDocument.defaultView.top.document;\n      }\n    } catch (e) {\n      this.dragEventsTargetDocumentTop = this.dragEventsTargetDocument;\n    }\n\n    targetDocument.addEventListener('pointermove', this.elementDragMove, true);\n    targetDocument.addEventListener('pointerup', this.elementDragEnd, true);\n    DragHandler.rootForMouseOut &&\n        DragHandler.rootForMouseOut.addEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n    if (this.dragEventsTargetDocumentTop && targetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.addEventListener('pointerup', this.elementDragEnd, true);\n    }\n\n    const targetHtmlElement = (targetElement as HTMLElement);\n    if (typeof cursor === 'string') {\n      this.restoreCursorAfterDrag = restoreCursor.bind(this, targetHtmlElement.style.cursor);\n      targetHtmlElement.style.cursor = cursor;\n      targetDocument.body.style.cursor = cursor;\n    }\n    function restoreCursor(this: DragHandler, oldCursor: string): void {\n      targetDocument.body.style.removeProperty('cursor');\n      targetHtmlElement.style.cursor = oldCursor;\n      this.restoreCursorAfterDrag = undefined;\n    }\n    event.preventDefault();\n  }\n\n  private mouseOutWhileDragging(): void {\n    this.unregisterMouseOutWhileDragging();\n    this.createGlassPane();\n  }\n\n  private unregisterMouseOutWhileDragging(): void {\n    if (!DragHandler.rootForMouseOut) {\n      return;\n    }\n    DragHandler.rootForMouseOut.removeEventListener('pointerout', this.mouseOutWhileDragging, {capture: true});\n  }\n\n  private unregisterDragEvents(): void {\n    if (!this.dragEventsTargetDocument) {\n      return;\n    }\n    this.dragEventsTargetDocument.removeEventListener('pointermove', this.elementDragMove, true);\n    this.dragEventsTargetDocument.removeEventListener('pointerup', this.elementDragEnd, true);\n    if (this.dragEventsTargetDocumentTop && this.dragEventsTargetDocument !== this.dragEventsTargetDocumentTop) {\n      this.dragEventsTargetDocumentTop.removeEventListener('pointerup', this.elementDragEnd, true);\n    }\n    delete this.dragEventsTargetDocument;\n    delete this.dragEventsTargetDocumentTop;\n  }\n\n  private elementDragMove(event: MouseEvent): void {\n    if (event.buttons !== 1) {\n      this.elementDragEnd(event);\n      return;\n    }\n    if (this.elementDraggingEventListener && this.elementDraggingEventListener(event)) {\n      this.cancelDragEvents(event);\n    }\n  }\n\n  private cancelDragEvents(_event: Event): void {\n    this.unregisterDragEvents();\n    this.unregisterMouseOutWhileDragging();\n\n    if (this.restoreCursorAfterDrag) {\n      this.restoreCursorAfterDrag();\n    }\n\n    this.disposeGlassPane();\n\n    delete this.elementDraggingEventListener;\n    delete this.elementEndDraggingEventListener;\n  }\n\n  private elementDragEnd(event: Event): void {\n    const elementDragEnd = this.elementEndDraggingEventListener;\n    this.cancelDragEvents((event as MouseEvent));\n    event.preventDefault();\n    if (elementDragEnd) {\n      elementDragEnd((event as MouseEvent));\n    }\n  }\n\n  private static glassPaneUsageCount = 0;\n  private static glassPane: GlassPane|null = null;\n  private static documentForMouseOut: Document|null = null;\n  private static rootForMouseOut: Node|null = null;\n}\n\nexport function isBeingEdited(node?: Node|null): boolean {\n  if (!node || node.nodeType !== Node.ELEMENT_NODE) {\n    return false;\n  }\n  const element = (node as Element);\n  if (element.classList.contains('text-prompt') || element.nodeName === 'INPUT' || element.nodeName === 'TEXTAREA') {\n    return true;\n  }\n\n  if (!elementsBeingEdited.size) {\n    return false;\n  }\n\n  let currentElement: (Element|null)|Element = element;\n  while (currentElement) {\n    if (elementsBeingEdited.has(element)) {\n      return true;\n    }\n    currentElement = currentElement.parentElementOrShadowHost();\n  }\n  return false;\n}\n\nexport function isEditing(): boolean {\n  if (elementsBeingEdited.size) {\n    return true;\n  }\n\n  const focused = Platform.DOMUtilities.deepActiveElement(document);\n  if (!focused) {\n    return false;\n  }\n  return focused.classList.contains('text-prompt') || focused.nodeName === 'INPUT' || focused.nodeName === 'TEXTAREA' ||\n      ((focused as HTMLElement).contentEditable === 'true' ||\n       (focused as HTMLElement).contentEditable === 'plaintext-only');\n}\n\nexport function markBeingEdited(element: Element, value: boolean): boolean {\n  if (value) {\n    if (elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.add('being-edited');\n    elementsBeingEdited.add(element);\n  } else {\n    if (!elementsBeingEdited.has(element)) {\n      return false;\n    }\n    element.classList.remove('being-edited');\n    elementsBeingEdited.delete(element);\n  }\n  return true;\n}\n\nconst elementsBeingEdited = new Set<Element>();\n\n// Avoids Infinity, NaN, and scientific notation (e.g. 1e20), see crbug.com/81165.\nconst numberRegex = /^(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))$/;\n\nexport const StyleValueDelimiters = ' \\xA0\\t\\n\"\\':;,/()';\n\nexport function getValueModificationDirection(event: Event): string|null {\n  let direction: 'Up'|'Down'|null = null;\n  if (event.type === 'wheel') {\n    // When shift is pressed while spinning mousewheel, delta comes as wheelDeltaX.\n    const wheelEvent = (event as WheelEvent);\n    if (wheelEvent.deltaY < 0 || wheelEvent.deltaX < 0) {\n      direction = 'Up';\n    } else if (wheelEvent.deltaY > 0 || wheelEvent.deltaX > 0) {\n      direction = 'Down';\n    }\n  } else {\n    const keyEvent = (event as KeyboardEvent);\n    if (keyEvent.key === 'ArrowUp' || keyEvent.key === 'PageUp') {\n      direction = 'Up';\n    } else if (keyEvent.key === 'ArrowDown' || keyEvent.key === 'PageDown') {\n      direction = 'Down';\n    }\n  }\n\n  return direction;\n}\n\nfunction modifiedHexValue(hexString: string, event: Event): string|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n  const number = parseInt(hexString, 16);\n  if (isNaN(number) || !isFinite(number)) {\n    return null;\n  }\n\n  const hexStrLen = hexString.length;\n  const channelLen = hexStrLen / 3;\n\n  // Colors are either rgb or rrggbb.\n  if (channelLen !== 1 && channelLen !== 2) {\n    return null;\n  }\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase R by 1.\n  // When shift is pressed, increase G by 1.\n  // When alt is pressed, increase B by 1.\n  // If no shortcut keys are pressed then increase hex value by 1.\n  // Keys can be pressed together to increase RGB channels. e.g trying different shades.\n  let delta = 0;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta += Math.pow(16, channelLen * 2);\n  }\n  if (mouseEvent.shiftKey) {\n    delta += Math.pow(16, channelLen);\n  }\n  if (mouseEvent.altKey) {\n    delta += 1;\n  }\n  if (delta === 0) {\n    delta = 1;\n  }\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n\n  // Increase hex value by 1 and clamp from 0 ... maxValue.\n  const maxValue = Math.pow(16, hexStrLen) - 1;\n  const result = Platform.NumberUtilities.clamp(number + delta, 0, maxValue);\n\n  // Ensure the result length is the same as the original hex value.\n  let resultString = result.toString(16).toUpperCase();\n  for (let i = 0, lengthDelta = hexStrLen - resultString.length; i < lengthDelta; ++i) {\n    resultString = '0' + resultString;\n  }\n  return resultString;\n}\n\nexport function modifiedFloatNumber(number: number, event: Event, modifierMultiplier?: number): number|null {\n  const direction = getValueModificationDirection(event);\n  if (!direction) {\n    return null;\n  }\n\n  const mouseEvent = (event as MouseEvent);\n\n  // Precision modifier keys work with both mousewheel and up/down keys.\n  // When ctrl is pressed, increase by 100.\n  // When shift is pressed, increase by 10.\n  // When alt is pressed, increase by 0.1.\n  // Otherwise increase by 1.\n  let delta = 1;\n  if (KeyboardShortcut.eventHasCtrlEquivalentKey(mouseEvent)) {\n    delta = 100;\n  } else if (mouseEvent.shiftKey) {\n    delta = 10;\n  } else if (mouseEvent.altKey) {\n    delta = 0.1;\n  }\n\n  if (direction === 'Down') {\n    delta *= -1;\n  }\n  if (modifierMultiplier) {\n    delta *= modifierMultiplier;\n  }\n\n  // Make the new number and constrain it to a precision of 6, this matches numbers the engine returns.\n  // Use the Number constructor to forget the fixed precision, so 1.100000 will print as 1.1.\n  const result = Number((number + delta).toFixed(6));\n  if (!String(result).match(numberRegex)) {\n    return null;\n  }\n  return result;\n}\n\nexport function createReplacementString(\n    wordString: string, event: Event,\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): string|null {\n  let prefix;\n  let suffix;\n  let number;\n  let replacementString: string|null = null;\n  let matches = /(.*#)([\\da-fA-F]+)(.*)/.exec(wordString);\n  if (matches && matches.length) {\n    prefix = matches[1];\n    suffix = matches[3];\n    number = modifiedHexValue(matches[2], event);\n    if (number !== null) {\n      replacementString = prefix + number + suffix;\n    }\n  } else {\n    matches = /(.*?)(-?(?:\\d+(?:\\.\\d+)?|\\.\\d+))(.*)/.exec(wordString);\n    if (matches && matches.length) {\n      prefix = matches[1];\n      suffix = matches[3];\n      number = modifiedFloatNumber(parseFloat(matches[2]), event);\n      if (number !== null) {\n        replacementString =\n            customNumberHandler ? customNumberHandler(prefix, number, suffix) : prefix + number + suffix;\n      }\n    }\n  }\n  return replacementString;\n}\n\nexport function handleElementValueModifications(\n    event: Event, element: Element, finishHandler?: ((arg0: string, arg1: string) => void),\n    suggestionHandler?: ((arg0: string) => boolean),\n    customNumberHandler?: ((arg0: string, arg1: number, arg2: string) => string)): boolean {\n  const arrowKeyOrWheelEvent =\n      ((event as KeyboardEvent).key === 'ArrowUp' || (event as KeyboardEvent).key === 'ArrowDown' ||\n       event.type === 'wheel');\n  const pageKeyPressed = ((event as KeyboardEvent).key === 'PageUp' || (event as KeyboardEvent).key === 'PageDown');\n  if (!arrowKeyOrWheelEvent && !pageKeyPressed) {\n    return false;\n  }\n\n  const selection = element.getComponentSelection();\n  if (!selection || !selection.rangeCount) {\n    return false;\n  }\n\n  const selectionRange = selection.getRangeAt(0);\n  if (!selectionRange.commonAncestorContainer.isSelfOrDescendant(element)) {\n    return false;\n  }\n\n  const originalValue = element.textContent;\n  const wordRange = DOMExtension.DOMExtension.rangeOfWord(\n      selectionRange.startContainer, selectionRange.startOffset, StyleValueDelimiters, element);\n  const wordString = wordRange.toString();\n\n  if (suggestionHandler && suggestionHandler(wordString)) {\n    return false;\n  }\n\n  const replacementString = createReplacementString(wordString, event, customNumberHandler);\n\n  if (replacementString) {\n    const replacementTextNode = document.createTextNode(replacementString);\n\n    wordRange.deleteContents();\n    wordRange.insertNode(replacementTextNode);\n\n    const finalSelectionRange = document.createRange();\n    finalSelectionRange.setStart(replacementTextNode, 0);\n    finalSelectionRange.setEnd(replacementTextNode, replacementString.length);\n\n    selection.removeAllRanges();\n    selection.addRange(finalSelectionRange);\n\n    event.handled = true;\n    event.preventDefault();\n\n    if (finishHandler) {\n      finishHandler(originalValue || '', replacementString);\n    }\n\n    return true;\n  }\n  return false;\n}\n\nexport function openLinkExternallyLabel(): string {\n  return i18nString(UIStrings.openInNewTab);\n}\n\nexport function copyLinkAddressLabel(): string {\n  return i18nString(UIStrings.copyLinkAddress);\n}\n\nexport function copyFileNameLabel(): string {\n  return i18nString(UIStrings.copyFileName);\n}\n\nexport function anotherProfilerActiveLabel(): string {\n  return i18nString(UIStrings.anotherProfilerIsAlreadyActive);\n}\n\nexport function asyncStackTraceLabel(\n    description: string|undefined, previousCallFrames: {functionName: string}[]): string {\n  if (description) {\n    if (description === 'Promise.resolve') {\n      return i18nString(UIStrings.promiseResolvedAsync);\n    }\n    if (description === 'Promise.reject') {\n      return i18nString(UIStrings.promiseRejectedAsync);\n    }\n    // TODO(crbug.com/1254259): Remove the check for 'async function'\n    // once the relevant V8 inspector CL rolls into Node LTS.\n    if ((description === 'await' || description === 'async function') && previousCallFrames.length !== 0) {\n      const lastPreviousFrame = previousCallFrames[previousCallFrames.length - 1];\n      const lastPreviousFrameName = beautifyFunctionName(lastPreviousFrame.functionName);\n      description = `await in ${lastPreviousFrameName}`;\n    }\n    return i18nString(UIStrings.sAsync, {PH1: description});\n  }\n  return i18nString(UIStrings.asyncCall);\n}\n\nexport function installComponentRootStyles(element: Element): void {\n  Utils.injectCoreStyles(element);\n  element.classList.add('platform-' + Host.Platform.platform());\n\n  // Detect overlay scrollbar enable by checking for nonzero scrollbar width.\n  if (!Host.Platform.isMac() && Utils.measuredScrollbarWidth(element.ownerDocument) === 0) {\n    element.classList.add('overlay-scrollbar-enabled');\n  }\n}\n\nfunction windowFocused(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.remove('inactive');\n  }\n}\n\nfunction windowBlurred(document: Document, event: Event): void {\n  if (event.target instanceof Window && event.target.document.nodeType === Node.DOCUMENT_NODE) {\n    document.body.classList.add('inactive');\n  }\n}\n\nexport class ElementFocusRestorer {\n  private element: HTMLElement|null;\n  private previous: HTMLElement|null;\n  constructor(element: Element) {\n    this.element = (element as HTMLElement | null);\n    this.previous = (Platform.DOMUtilities.deepActiveElement(element.ownerDocument) as HTMLElement | null);\n    (element as HTMLElement).focus();\n  }\n\n  restore(): void {\n    if (!this.element) {\n      return;\n    }\n    if (this.element.hasFocus() && this.previous) {\n      this.previous.focus();\n    }\n    this.previous = null;\n    this.element = null;\n  }\n}\n\nexport function highlightSearchResult(\n    element: Element, offset: number, length: number, domChanges?: HighlightChange[]): Element|null {\n  const result = highlightSearchResults(element, [new TextUtils.TextRange.SourceRange(offset, length)], domChanges);\n  return result.length ? result[0] : null;\n}\n\nexport function highlightSearchResults(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], changes?: HighlightChange[]): Element[] {\n  return highlightRangesWithStyleClass(element, resultRanges, highlightedSearchResultClassName, changes);\n}\n\nexport function runCSSAnimationOnce(element: Element, className: string): void {\n  function animationEndCallback(): void {\n    element.classList.remove(className);\n    element.removeEventListener('webkitAnimationEnd', animationEndCallback, false);\n  }\n\n  if (element.classList.contains(className)) {\n    element.classList.remove(className);\n  }\n\n  element.addEventListener('webkitAnimationEnd', animationEndCallback, false);\n  element.classList.add(className);\n}\n\nexport function highlightRangesWithStyleClass(\n    element: Element, resultRanges: TextUtils.TextRange.SourceRange[], styleClass: string,\n    changes?: HighlightChange[]): Element[] {\n  changes = changes || [];\n  const highlightNodes: Element[] = [];\n  const textNodes = element.childTextNodes();\n  const lineText = textNodes\n                       .map(function(node) {\n                         return node.textContent;\n                       })\n                       .join('');\n  const ownerDocument = element.ownerDocument;\n\n  if (textNodes.length === 0) {\n    return highlightNodes;\n  }\n\n  const nodeRanges: TextUtils.TextRange.SourceRange[] = [];\n  let rangeEndOffset = 0;\n  for (const textNode of textNodes) {\n    const range =\n        new TextUtils.TextRange.SourceRange(rangeEndOffset, textNode.textContent ? textNode.textContent.length : 0);\n    rangeEndOffset = range.offset + range.length;\n    nodeRanges.push(range);\n  }\n\n  let startIndex = 0;\n  for (let i = 0; i < resultRanges.length; ++i) {\n    const startOffset = resultRanges[i].offset;\n    const endOffset = startOffset + resultRanges[i].length;\n\n    while (startIndex < textNodes.length &&\n           nodeRanges[startIndex].offset + nodeRanges[startIndex].length <= startOffset) {\n      startIndex++;\n    }\n    let endIndex = startIndex;\n    while (endIndex < textNodes.length && nodeRanges[endIndex].offset + nodeRanges[endIndex].length < endOffset) {\n      endIndex++;\n    }\n    if (endIndex === textNodes.length) {\n      break;\n    }\n\n    const highlightNode = ownerDocument.createElement('span');\n    highlightNode.className = styleClass;\n    highlightNode.textContent = lineText.substring(startOffset, endOffset);\n\n    const lastTextNode = textNodes[endIndex];\n    const lastText = lastTextNode.textContent || '';\n    lastTextNode.textContent = lastText.substring(endOffset - nodeRanges[endIndex].offset);\n    changes.push({\n      node: (lastTextNode as Element),\n      type: 'changed',\n      oldText: lastText,\n      newText: lastTextNode.textContent,\n      nextSibling: undefined,\n      parent: undefined,\n    });\n\n    if (startIndex === endIndex && lastTextNode.parentElement) {\n      lastTextNode.parentElement.insertBefore(highlightNode, lastTextNode);\n      changes.push({\n        node: highlightNode,\n        type: 'added',\n        nextSibling: lastTextNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n      highlightNodes.push(highlightNode);\n\n      const prefixNode =\n          ownerDocument.createTextNode(lastText.substring(0, startOffset - nodeRanges[startIndex].offset));\n      lastTextNode.parentElement.insertBefore(prefixNode, highlightNode);\n      changes.push({\n        node: prefixNode,\n        type: 'added',\n        nextSibling: highlightNode,\n        parent: lastTextNode.parentElement,\n        oldText: undefined,\n        newText: undefined,\n      });\n    } else {\n      const firstTextNode = textNodes[startIndex];\n      const firstText = firstTextNode.textContent || '';\n      const anchorElement = firstTextNode.nextSibling;\n\n      if (firstTextNode.parentElement) {\n        firstTextNode.parentElement.insertBefore(highlightNode, anchorElement);\n        changes.push({\n          node: highlightNode,\n          type: 'added',\n          nextSibling: anchorElement || undefined,\n          parent: firstTextNode.parentElement,\n          oldText: undefined,\n          newText: undefined,\n        });\n        highlightNodes.push(highlightNode);\n      }\n\n      firstTextNode.textContent = firstText.substring(0, startOffset - nodeRanges[startIndex].offset);\n      changes.push({\n        node: (firstTextNode as Element),\n        type: 'changed',\n        oldText: firstText,\n        newText: firstTextNode.textContent,\n        nextSibling: undefined,\n        parent: undefined,\n      });\n\n      for (let j = startIndex + 1; j < endIndex; j++) {\n        const textNode = textNodes[j];\n        const text = textNode.textContent;\n        textNode.textContent = '';\n        changes.push({\n          node: (textNode as Element),\n          type: 'changed',\n          oldText: text || undefined,\n          newText: textNode.textContent,\n          nextSibling: undefined,\n          parent: undefined,\n        });\n      }\n    }\n    startIndex = endIndex;\n    nodeRanges[startIndex].offset = endOffset;\n    nodeRanges[startIndex].length = lastTextNode.textContent.length;\n  }\n  return highlightNodes;\n}\n\nexport function applyDomChanges(domChanges: HighlightChange[]): void {\n  for (let i = 0, size = domChanges.length; i < size; ++i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.parent?.insertBefore(entry.node, entry.nextSibling ?? null);\n        break;\n      case 'changed':\n        entry.node.textContent = entry.newText ?? null;\n        break;\n    }\n  }\n}\n\nexport function revertDomChanges(domChanges: HighlightChange[]): void {\n  for (let i = domChanges.length - 1; i >= 0; --i) {\n    const entry = domChanges[i];\n    switch (entry.type) {\n      case 'added':\n        entry.node.remove();\n        break;\n      case 'changed':\n        entry.node.textContent = entry.oldText ?? null;\n        break;\n    }\n  }\n}\n\nexport function measurePreferredSize(element: Element, containerElement?: Element|null): Size {\n  const oldParent = element.parentElement;\n  const oldNextSibling = element.nextSibling;\n  containerElement = containerElement || element.ownerDocument.body;\n  containerElement.appendChild(element);\n  element.positionAt(0, 0);\n  const result = element.getBoundingClientRect();\n\n  element.positionAt(undefined, undefined);\n  if (oldParent) {\n    oldParent.insertBefore(element, oldNextSibling);\n  } else {\n    element.remove();\n  }\n  return new Size(result.width, result.height);\n}\n\nclass InvokeOnceHandlers {\n  private handlers: Map<Object, Set<Function>>|null;\n  private readonly autoInvoke: boolean;\n  constructor(autoInvoke: boolean) {\n    this.handlers = null;\n    this.autoInvoke = autoInvoke;\n  }\n\n  add(object: Object, method: () => void): void {\n    if (!this.handlers) {\n      this.handlers = new Map();\n      if (this.autoInvoke) {\n        this.scheduleInvoke();\n      }\n    }\n    let methods = this.handlers.get(object);\n    if (!methods) {\n      methods = new Set();\n      this.handlers.set(object, methods);\n    }\n    methods.add(method);\n  }\n  scheduleInvoke(): void {\n    if (this.handlers) {\n      requestAnimationFrame(this.invoke.bind(this));\n    }\n  }\n\n  private invoke(): void {\n    const handlers = this.handlers;\n    this.handlers = null;\n    if (handlers) {\n      for (const [object, methods] of handlers) {\n        for (const method of methods) {\n          method.call(object);\n        }\n      }\n    }\n  }\n}\n\nlet coalescingLevel = 0;\nlet postUpdateHandlers: InvokeOnceHandlers|null = null;\n\nexport function startBatchUpdate(): void {\n  if (!coalescingLevel++) {\n    postUpdateHandlers = new InvokeOnceHandlers(false);\n  }\n}\n\nexport function endBatchUpdate(): void {\n  if (--coalescingLevel) {\n    return;\n  }\n\n  if (postUpdateHandlers) {\n    postUpdateHandlers.scheduleInvoke();\n    postUpdateHandlers = null;\n  }\n}\n\nexport function invokeOnceAfterBatchUpdate(object: Object, method: () => void): void {\n  if (!postUpdateHandlers) {\n    postUpdateHandlers = new InvokeOnceHandlers(true);\n  }\n  postUpdateHandlers.add(object, method);\n}\n\nexport function animateFunction(\n    window: Window, func: Function, params: {\n      from: number,\n      to: number,\n    }[],\n    duration: number, animationComplete?: (() => void)): () => void {\n  const start = window.performance.now();\n  let raf = window.requestAnimationFrame(animationStep);\n\n  function animationStep(timestamp: number): void {\n    const progress = Platform.NumberUtilities.clamp((timestamp - start) / duration, 0, 1);\n    func(...params.map(p => p.from + (p.to - p.from) * progress));\n    if (progress < 1) {\n      raf = window.requestAnimationFrame(animationStep);\n    } else if (animationComplete) {\n      animationComplete();\n    }\n  }\n\n  return (): void => window.cancelAnimationFrame(raf);\n}\n\nexport class LongClickController {\n  private readonly element: Element;\n  private readonly callback: (arg0: Event) => void;\n  private readonly editKey: (arg0: Event) => boolean;\n  private longClickData!: {\n    mouseUp: (arg0: Event) => void,\n    mouseDown: (arg0: Event) => void,\n    reset: () => void,\n  }|undefined;\n  private longClickInterval!: number|undefined;\n\n  constructor(\n      element: Element, callback: (arg0: Event) => void,\n      isEditKeyFunc: (arg0: Event) => boolean = (event): boolean => isEnterOrSpaceKey(event)) {\n    this.element = element;\n    this.callback = callback;\n    this.editKey = isEditKeyFunc;\n    this.enable();\n  }\n\n  reset(): void {\n    if (this.longClickInterval) {\n      clearInterval(this.longClickInterval);\n      delete this.longClickInterval;\n    }\n  }\n\n  private enable(): void {\n    if (this.longClickData) {\n      return;\n    }\n    const boundKeyDown = keyDown.bind(this);\n    const boundKeyUp = keyUp.bind(this);\n    const boundMouseDown = mouseDown.bind(this);\n    const boundMouseUp = mouseUp.bind(this);\n    const boundReset = this.reset.bind(this);\n\n    this.element.addEventListener('keydown', boundKeyDown, false);\n    this.element.addEventListener('keyup', boundKeyUp, false);\n    this.element.addEventListener('pointerdown', boundMouseDown, false);\n    this.element.addEventListener('pointerout', boundReset, false);\n    this.element.addEventListener('pointerup', boundMouseUp, false);\n    this.element.addEventListener('click', boundReset, true);\n\n    this.longClickData = {mouseUp: boundMouseUp, mouseDown: boundMouseDown, reset: boundReset};\n\n    function keyDown(this: LongClickController, e: Event): void {\n      if (this.editKey(e)) {\n        const callback = this.callback;\n        this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n      }\n    }\n\n    function keyUp(this: LongClickController, e: Event): void {\n      if (this.editKey(e)) {\n        this.reset();\n      }\n    }\n\n    function mouseDown(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      const callback = this.callback;\n      this.longClickInterval = window.setTimeout(callback.bind(null, e), LongClickController.TIME_MS);\n    }\n\n    function mouseUp(this: LongClickController, e: Event): void {\n      if ((e as MouseEvent).which !== 1) {\n        return;\n      }\n      this.reset();\n    }\n  }\n\n  dispose(): void {\n    if (!this.longClickData) {\n      return;\n    }\n    this.element.removeEventListener('pointerdown', this.longClickData.mouseDown, false);\n    this.element.removeEventListener('pointerout', this.longClickData.reset, false);\n    this.element.removeEventListener('pointerup', this.longClickData.mouseUp, false);\n    this.element.addEventListener('click', this.longClickData.reset, true);\n    delete this.longClickData;\n  }\n\n  static readonly TIME_MS = 200;\n}\n\nexport function initializeUIUtils(document: Document): void {\n  document.body.classList.toggle('inactive', !document.hasFocus());\n  if (document.defaultView) {\n    document.defaultView.addEventListener('focus', windowFocused.bind(undefined, document), false);\n    document.defaultView.addEventListener('blur', windowBlurred.bind(undefined, document), false);\n  }\n  document.addEventListener('focus', Utils.focusChanged.bind(undefined), true);\n\n  const body = (document.body as Element);\n  GlassPane.setContainer(body);\n}\n\nexport function beautifyFunctionName(name: string): string {\n  return name || i18nString(UIStrings.anonymous);\n}\n\nexport const createTextChild = (element: Element|DocumentFragment, text: string): Text => {\n  const textNode = element.ownerDocument.createTextNode(text);\n  element.appendChild(textNode);\n  return textNode;\n};\n\nexport const createTextChildren = (element: Element|DocumentFragment, ...childrenText: string[]): void => {\n  for (const child of childrenText) {\n    createTextChild(element, child);\n  }\n};\n\nexport function createTextButton(\n    text: string, eventHandler?: ((arg0: Event) => void), className?: string, primary?: boolean,\n    alternativeEvent?: string): HTMLButtonElement {\n  const element = document.createElement('button');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = text;\n  element.classList.add('text-button');\n  if (primary) {\n    element.classList.add('primary-button');\n  }\n  if (eventHandler) {\n    element.addEventListener(alternativeEvent || 'click', eventHandler);\n  }\n  element.type = 'button';\n  return element;\n}\n\nexport function createInput(className?: string, type?: string): HTMLInputElement {\n  const element = document.createElement('input');\n  if (className) {\n    element.className = className;\n  }\n  element.spellcheck = false;\n  element.classList.add('harmony-input');\n  if (type) {\n    element.type = type;\n  }\n  return element;\n}\n\nexport function createSelect(name: string, options: string[]|Map<string, string[]>[]|Set<string>): HTMLSelectElement {\n  const select = document.createElement('select');\n  select.classList.add('chrome-select');\n  ARIAUtils.setAccessibleName(select, name);\n  for (const option of options) {\n    if (option instanceof Map) {\n      for (const [key, value] of option) {\n        const optGroup = (select.createChild('optgroup') as HTMLOptGroupElement);\n        optGroup.label = key;\n        for (const child of value) {\n          if (typeof child === 'string') {\n            optGroup.appendChild(new Option(child, child));\n          }\n        }\n      }\n    } else if (typeof option === 'string') {\n      select.add(new Option(option, option));\n    }\n  }\n  return select;\n}\n\nexport function createLabel(title: string, className?: string, associatedControl?: Element): Element {\n  const element = document.createElement('label');\n  if (className) {\n    element.className = className;\n  }\n  element.textContent = title;\n  if (associatedControl) {\n    ARIAUtils.bindLabelToControl(element, associatedControl);\n  }\n\n  return element;\n}\n\nexport function createRadioLabel(name: string, title: string, checked?: boolean): DevToolsRadioButton {\n  const element = (document.createElement('span', {is: 'dt-radio'}) as DevToolsRadioButton);\n  element.radioElement.name = name;\n  element.radioElement.checked = Boolean(checked);\n  createTextChild(element.labelElement, title);\n  return element;\n}\n\nexport function createIconLabel(title: string, iconClass: string): HTMLElement {\n  const element = (document.createElement('span', {is: 'dt-icon-label'}) as DevToolsIconLabel);\n  element.createChild('span').textContent = title;\n  element.type = iconClass;\n  return element;\n}\n\nexport function createSlider(min: number, max: number, tabIndex: number): Element {\n  const element = (document.createElement('span', {is: 'dt-slider'}) as DevToolsSlider);\n  element.sliderElement.min = String(min);\n  element.sliderElement.max = String(max);\n  element.sliderElement.step = String(1);\n  element.sliderElement.tabIndex = tabIndex;\n  return element;\n}\n\nexport function setTitle(element: HTMLElement, title: string): void {\n  ARIAUtils.setAccessibleName(element, title);\n  Tooltip.install(element, title);\n}\n\nexport class CheckboxLabel extends HTMLSpanElement {\n  private readonly shadowRootInternal!: DocumentFragment;\n  checkboxElement!: HTMLInputElement;\n  textElement!: HTMLElement;\n\n  constructor() {\n    super();\n    CheckboxLabel.lastId = CheckboxLabel.lastId + 1;\n    const id = 'ui-checkbox-label' + CheckboxLabel.lastId;\n    this.shadowRootInternal =\n        Utils.createShadowRootWithCoreStyles(this, {cssFile: checkboxTextLabelStyles, delegatesFocus: undefined});\n    this.checkboxElement = (this.shadowRootInternal.createChild('input') as HTMLInputElement);\n    this.checkboxElement.type = 'checkbox';\n    this.checkboxElement.setAttribute('id', id);\n    this.textElement = this.shadowRootInternal.createChild('label', 'dt-checkbox-text') as HTMLElement;\n    this.textElement.setAttribute('for', id);\n    this.shadowRootInternal.createChild('slot');\n  }\n\n  static create(title?: string, checked?: boolean, subtitle?: string): CheckboxLabel {\n    if (!CheckboxLabel.constructorInternal) {\n      CheckboxLabel.constructorInternal = Utils.registerCustomElement('span', 'dt-checkbox', CheckboxLabel);\n    }\n    const element = (CheckboxLabel.constructorInternal() as CheckboxLabel);\n    element.checkboxElement.checked = Boolean(checked);\n    if (title !== undefined) {\n      element.textElement.textContent = title;\n      ARIAUtils.setAccessibleName(element.checkboxElement, title);\n      if (subtitle !== undefined) {\n        element.textElement.createChild('div', 'dt-checkbox-subtitle').textContent = subtitle;\n      }\n    }\n    return element;\n  }\n\n  set backgroundColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.backgroundColor = color;\n  }\n\n  set checkColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    const stylesheet = document.createElement('style');\n    stylesheet.textContent = 'input.dt-checkbox-themed:checked:after { background-color: ' + color + '}';\n    this.shadowRootInternal.appendChild(stylesheet);\n  }\n\n  set borderColor(color: string) {\n    this.checkboxElement.classList.add('dt-checkbox-themed');\n    this.checkboxElement.style.borderColor = color;\n  }\n\n  private static lastId = 0;\n  static constructorInternal: (() => Element)|null = null;\n}\n\nexport class DevToolsIconLabel extends HTMLSpanElement {\n  private readonly iconElement: Icon;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {\n      cssFile: undefined,\n      delegatesFocus: undefined,\n    });\n    this.iconElement = Icon.create();\n    this.iconElement.style.setProperty('margin-right', '4px');\n    root.appendChild(this.iconElement);\n    root.createChild('slot');\n  }\n\n  set type(type: string) {\n    this.iconElement.setIconType(type);\n  }\n}\n\nlet labelId = 0;\n\nexport class DevToolsRadioButton extends HTMLSpanElement {\n  radioElement: HTMLInputElement;\n  labelElement: HTMLLabelElement;\n\n  constructor() {\n    super();\n    this.radioElement = (this.createChild('input', 'dt-radio-button') as HTMLInputElement);\n    this.labelElement = (this.createChild('label') as HTMLLabelElement);\n\n    const id = 'dt-radio-button-id' + (++labelId);\n    this.radioElement.id = id;\n    this.radioElement.type = 'radio';\n    this.labelElement.htmlFor = id;\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: radioButtonStyles, delegatesFocus: undefined});\n    root.createChild('slot');\n    this.addEventListener('click', this.radioClickHandler.bind(this), false);\n  }\n\n  radioClickHandler(): void {\n    if (this.radioElement.checked || this.radioElement.disabled) {\n      return;\n    }\n    this.radioElement.checked = true;\n    this.radioElement.dispatchEvent(new Event('change'));\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-radio', DevToolsRadioButton);\nUtils.registerCustomElement('span', 'dt-icon-label', DevToolsIconLabel);\n\nexport class DevToolsSlider extends HTMLSpanElement {\n  sliderElement: HTMLInputElement;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: sliderStyles, delegatesFocus: undefined});\n    this.sliderElement = document.createElement('input');\n    this.sliderElement.classList.add('dt-range-input');\n    this.sliderElement.type = 'range';\n    root.appendChild(this.sliderElement);\n  }\n\n  set value(amount: number) {\n    this.sliderElement.value = String(amount);\n  }\n\n  get value(): number {\n    return Number(this.sliderElement.value);\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-slider', DevToolsSlider);\n\nexport class DevToolsSmallBubble extends HTMLSpanElement {\n  private textElement: Element;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: smallBubbleStyles, delegatesFocus: undefined});\n    this.textElement = root.createChild('div');\n    this.textElement.className = 'info';\n    this.textElement.createChild('slot');\n  }\n\n  set type(type: string) {\n    this.textElement.className = type;\n  }\n}\n\nUtils.registerCustomElement('span', 'dt-small-bubble', DevToolsSmallBubble);\n\nexport class DevToolsCloseButton extends HTMLDivElement {\n  private buttonElement: HTMLElement;\n  private readonly hoverIcon: Icon;\n  private readonly activeIcon: Icon;\n\n  constructor() {\n    super();\n    const root = Utils.createShadowRootWithCoreStyles(this, {cssFile: closeButtonStyles, delegatesFocus: undefined});\n    this.buttonElement = (root.createChild('div', 'close-button') as HTMLElement);\n    Tooltip.install(this.buttonElement, i18nString(UIStrings.close));\n    ARIAUtils.setAccessibleName(this.buttonElement, i18nString(UIStrings.close));\n    ARIAUtils.markAsButton(this.buttonElement);\n    const regularIcon = Icon.create('smallicon-cross', 'default-icon');\n    this.hoverIcon = Icon.create('mediumicon-red-cross-hover', 'hover-icon');\n    this.activeIcon = Icon.create('mediumicon-red-cross-active', 'active-icon');\n    this.buttonElement.appendChild(regularIcon);\n    this.buttonElement.appendChild(this.hoverIcon);\n    this.buttonElement.appendChild(this.activeIcon);\n  }\n\n  set gray(gray: boolean) {\n    if (gray) {\n      this.hoverIcon.setIconType('mediumicon-gray-cross-hover');\n      this.activeIcon.setIconType('mediumicon-gray-cross-active');\n    } else {\n      this.hoverIcon.setIconType('mediumicon-red-cross-hover');\n      this.activeIcon.setIconType('mediumicon-red-cross-active');\n    }\n  }\n\n  setAccessibleName(name: string): void {\n    ARIAUtils.setAccessibleName(this.buttonElement, name);\n  }\n\n  setTabbable(tabbable: boolean): void {\n    if (tabbable) {\n      this.buttonElement.tabIndex = 0;\n    } else {\n      this.buttonElement.tabIndex = -1;\n    }\n  }\n}\n\nUtils.registerCustomElement('div', 'dt-close-button', DevToolsCloseButton);\n\nexport function bindInput(\n    input: HTMLInputElement, apply: (arg0: string) => void, validate: (arg0: string) => {\n      valid: boolean,\n      errorMessage: (string | undefined),\n    },\n    numeric: boolean, modifierMultiplier?: number): (arg0: string) => void {\n  input.addEventListener('change', onChange, false);\n  input.addEventListener('input', onInput, false);\n  input.addEventListener('keydown', onKeyDown, false);\n  input.addEventListener('focus', input.select.bind(input), false);\n\n  function onInput(): void {\n    input.classList.toggle('error-input', !validate(input.value));\n  }\n\n  function onChange(): void {\n    const {valid} = validate(input.value);\n    input.classList.toggle('error-input', !valid);\n    if (valid) {\n      apply(input.value);\n    }\n  }\n\n  function onKeyDown(event: KeyboardEvent): void {\n    if (event.key === 'Enter') {\n      const {valid} = validate(input.value);\n      if (valid) {\n        apply(input.value);\n      }\n      event.preventDefault();\n      return;\n    }\n\n    if (!numeric) {\n      return;\n    }\n\n    const value = modifiedFloatNumber(parseFloat(input.value), event, modifierMultiplier);\n    const stringValue = value ? String(value) : '';\n    const {valid} = validate(stringValue);\n    if (!valid || !value) {\n      return;\n    }\n\n    input.value = stringValue;\n    apply(input.value);\n    event.preventDefault();\n  }\n\n  function setValue(value: string): void {\n    if (value === input.value) {\n      return;\n    }\n    const {valid} = validate(value);\n    input.classList.toggle('error-input', !valid);\n    input.value = value;\n  }\n\n  return setValue;\n}\n\nexport function trimText(\n    context: CanvasRenderingContext2D, text: string, maxWidth: number,\n    trimFunction: (arg0: string, arg1: number) => string): string {\n  const maxLength = 200;\n  if (maxWidth <= 10) {\n    return '';\n  }\n  if (text.length > maxLength) {\n    text = trimFunction(text, maxLength);\n  }\n  const textWidth = measureTextWidth(context, text);\n  if (textWidth <= maxWidth) {\n    return text;\n  }\n\n  let l = 0;\n  let r: number = text.length;\n  let lv = 0;\n  let rv: number = textWidth;\n  while (l < r && lv !== rv && lv !== maxWidth) {\n    const m = Math.ceil(l + (r - l) * (maxWidth - lv) / (rv - lv));\n    const mv = measureTextWidth(context, trimFunction(text, m));\n    if (mv <= maxWidth) {\n      l = m;\n      lv = mv;\n    } else {\n      r = m - 1;\n      rv = mv;\n    }\n  }\n  text = trimFunction(text, l);\n  return text !== '\u2026' ? text : '';\n}\n\nexport function trimTextMiddle(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimMiddle(text, width));\n}\n\nexport function trimTextEnd(context: CanvasRenderingContext2D, text: string, maxWidth: number): string {\n  return trimText(context, text, maxWidth, (text, width) => Platform.StringUtilities.trimEndWithMaxLength(text, width));\n}\n\nexport function measureTextWidth(context: CanvasRenderingContext2D, text: string): number {\n  const maxCacheableLength = 200;\n  if (text.length > maxCacheableLength) {\n    return context.measureText(text).width;\n  }\n\n  if (!measureTextWidthCache) {\n    measureTextWidthCache = new Map();\n  }\n  const font = context.font;\n  let textWidths = measureTextWidthCache.get(font);\n  if (!textWidths) {\n    textWidths = new Map();\n    measureTextWidthCache.set(font, textWidths);\n  }\n  let width = textWidths.get(text);\n  if (!width) {\n    width = context.measureText(text).width;\n    textWidths.set(text, width);\n  }\n  return width;\n}\n\nlet measureTextWidthCache: Map<string, Map<string, number>>|null = null;\n\n/**\n * Adds a 'utm_source=devtools' as query parameter to the url.\n */\nexport function addReferrerToURL(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString {\n  if (/(\\?|&)utm_source=devtools/.test(url)) {\n    return url;\n  }\n  if (url.indexOf('?') === -1) {\n    // If the URL does not contain a query, add the referrer query after path\n    // and before (potential) anchor.\n    return url.replace(/^([^#]*)(#.*)?$/g, '$1?utm_source=devtools$2') as Platform.DevToolsPath.UrlString;\n  }\n  // If the URL already contains a query, add the referrer query after the last query\n  // and before (potential) anchor.\n  return url.replace(/^([^#]*)(#.*)?$/g, '$1&utm_source=devtools$2') as Platform.DevToolsPath.UrlString;\n}\n\n/**\n * We want to add a referrer query param to every request to\n * 'web.dev' or 'developers.google.com'.\n */\nexport function addReferrerToURLIfNecessary(url: Platform.DevToolsPath.UrlString): Platform.DevToolsPath.UrlString {\n  if (/(\\/\\/developers.google.com\\/|\\/\\/web.dev\\/|\\/\\/developer.chrome.com\\/)/.test(url)) {\n    return addReferrerToURL(url);\n  }\n  return url;\n}\n\nexport function loadImage(url: string): Promise<HTMLImageElement|null> {\n  return new Promise(fulfill => {\n    const image = new Image();\n    image.addEventListener('load', () => fulfill(image));\n    image.addEventListener('error', () => fulfill(null));\n    image.src = url;\n  });\n}\n\nexport function loadImageFromData(data: string|null): Promise<HTMLImageElement|null> {\n  return data ? loadImage('data:image/jpg;base64,' + data) : Promise.resolve(null);\n}\n\nexport function createFileSelectorElement(callback: (arg0: File) => void): HTMLInputElement {\n  const fileSelectorElement = document.createElement('input');\n  fileSelectorElement.type = 'file';\n  fileSelectorElement.style.display = 'none';\n  fileSelectorElement.tabIndex = -1;\n  fileSelectorElement.onchange = (): void => {\n    if (fileSelectorElement.files) {\n      callback(fileSelectorElement.files[0]);\n    }\n  };\n\n  return fileSelectorElement;\n}\n\nexport const MaxLengthForDisplayedURLs = 150;\n\nexport class MessageDialog {\n  static async show(message: string, where?: Element | Document): Promise<void> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    const shadowRoot = Utils.createShadowRootWithCoreStyles(\n        dialog.contentElement, {cssFile: confirmDialogStyles, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    await new Promise(resolve => {\n      const okButton = createTextButton(i18nString(UIStrings.ok), resolve, '', true);\n      content.createChild('div', 'message').createChild('span').textContent = message;\n      content.createChild('div', 'button').appendChild(okButton);\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(undefined);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n  }\n}\n\nexport class ConfirmDialog {\n  static async show(message: string, where?: Element | Document): Promise<boolean> {\n    const dialog = new Dialog();\n    dialog.setSizeBehavior(SizeBehavior.MeasureContent);\n    dialog.setDimmed(true);\n    ARIAUtils.setAccessibleName(dialog.contentElement, message);\n    const shadowRoot = Utils.createShadowRootWithCoreStyles(\n        dialog.contentElement, {cssFile: confirmDialogStyles, delegatesFocus: undefined});\n    const content = shadowRoot.createChild('div', 'widget');\n    content.createChild('div', 'message').createChild('span').textContent = message;\n    const buttonsBar = content.createChild('div', 'button');\n    const result = await new Promise<boolean>(resolve => {\n      const okButton = createTextButton(\n          /* text= */ i18nString(UIStrings.ok), /* clickHandler= */ () => resolve(true), /* className= */ '',\n          /* primary= */ true);\n      buttonsBar.appendChild(okButton);\n      buttonsBar.appendChild(createTextButton(i18nString(UIStrings.cancel), () => resolve(false)));\n      dialog.setOutsideClickCallback(event => {\n        event.consume();\n        resolve(false);\n      });\n      dialog.show(where);\n      okButton.focus();\n    });\n    dialog.hide();\n    return result;\n  }\n}\n\nexport function createInlineButton(toolbarButton: ToolbarButton): Element {\n  const element = document.createElement('span');\n  const shadowRoot =\n      Utils.createShadowRootWithCoreStyles(element, {cssFile: inlineButtonStyles, delegatesFocus: undefined});\n  element.classList.add('inline-button');\n  const toolbar = new Toolbar('');\n  toolbar.appendToolbarItem(toolbarButton);\n  shadowRoot.appendChild(toolbar.element);\n  return element;\n}\n\nexport abstract class Renderer {\n  abstract render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null>;\n\n  static async render(object: Object, options?: Options): Promise<{\n    node: Node,\n    tree: TreeOutline|null,\n  }|null> {\n    if (!object) {\n      throw new Error('Can\\'t render ' + object);\n    }\n    const extension = getApplicableRegisteredRenderers(object)[0];\n    if (!extension) {\n      return null;\n    }\n    const renderer = await extension.loadRenderer();\n    return renderer.render(object, options);\n  }\n}\n\nexport function formatTimestamp(timestamp: number, full: boolean): string {\n  const date = new Date(timestamp);\n  const yymmdd = date.getFullYear() + '-' + leadZero(date.getMonth() + 1, 2) + '-' + leadZero(date.getDate(), 2);\n  const hhmmssfff = leadZero(date.getHours(), 2) + ':' + leadZero(date.getMinutes(), 2) + ':' +\n      leadZero(date.getSeconds(), 2) + '.' + leadZero(date.getMilliseconds(), 3);\n  return full ? (yymmdd + ' ' + hhmmssfff) : hhmmssfff;\n\n  function leadZero(value: number, length: number): string {\n    const valueString = String(value);\n    return valueString.padStart(length, '0');\n  }\n}\n\nexport interface Options {\n  title?: string|Element;\n  editable?: boolean;\n}\n\nexport interface HighlightChange {\n  node: Element|Text;\n  type: string;\n  oldText?: string;\n  newText?: string;\n  nextSibling?: Node;\n  parent?: Node;\n}\n\nexport const isScrolledToBottom = (element: Element): boolean => {\n  // This code works only for 0-width border.\n  // The scrollTop, clientHeight and scrollHeight are computed in double values internally.\n  // However, they are exposed to javascript differently, each being either rounded (via\n  // round, ceil or floor functions) or left intouch.\n  // This adds up a total error up to 2.\n  return Math.abs(element.scrollTop + element.clientHeight - element.scrollHeight) <= 2;\n};\n\nexport function createSVGChild(element: Element, childType: string, className?: string): Element {\n  const child = element.ownerDocument.createElementNS('http://www.w3.org/2000/svg', childType);\n  if (className) {\n    child.setAttribute('class', className);\n  }\n  element.appendChild(child);\n  return child;\n}\n\nexport const enclosingNodeOrSelfWithNodeNameInArray = (initialNode: Node, nameArray: string[]): Node|null => {\n  let node: (Node|null)|Node = initialNode;\n  for (; node && node !== initialNode.ownerDocument; node = node.parentNodeOrShadowHost()) {\n    for (let i = 0; i < nameArray.length; ++i) {\n      if (node.nodeName.toLowerCase() === nameArray[i].toLowerCase()) {\n        return node;\n      }\n    }\n  }\n  return null;\n};\n\nexport const enclosingNodeOrSelfWithNodeName = function(node: Node, nodeName: string): Node|null {\n  return enclosingNodeOrSelfWithNodeNameInArray(node, [nodeName]);\n};\n\nexport const deepElementFromPoint = (document: Document|ShadowRoot|null|undefined, x: number, y: number): Node|null => {\n  let container: (ShadowRoot|null)|(Document | ShadowRoot | null | undefined) = document;\n  let node: Element|null = null;\n  while (container) {\n    const innerNode = container.elementFromPoint(x, y);\n    if (!innerNode || node === innerNode) {\n      break;\n    }\n    node = innerNode;\n    container = node.shadowRoot;\n  }\n  return node;\n};\n\nexport const deepElementFromEvent = (ev: Event): Node|null => {\n  const event = (ev as MouseEvent);\n  // Some synthetic events have zero coordinates which lead to a wrong element.\n  // Better return nothing in this case.\n  if (!event.which && !event.pageX && !event.pageY && !event.clientX && !event.clientY && !event.movementX &&\n      !event.movementY) {\n    return null;\n  }\n  const root = event.target && (event.target as Element).getComponentRoot();\n  return root ? deepElementFromPoint((root as Document | ShadowRoot), event.pageX, event.pageY) : null;\n};\n\nconst registeredRenderers: RendererRegistration[] = [];\n\nexport function registerRenderer(registration: RendererRegistration): void {\n  registeredRenderers.push(registration);\n}\nexport function getApplicableRegisteredRenderers(object: Object): RendererRegistration[] {\n  return registeredRenderers.filter(isRendererApplicableToContextTypes);\n\n  function isRendererApplicableToContextTypes(rendererRegistration: RendererRegistration): boolean {\n    if (!rendererRegistration.contextTypes) {\n      return true;\n    }\n    for (const contextType of rendererRegistration.contextTypes()) {\n      if (object instanceof contextType) {\n        return true;\n      }\n    }\n    return false;\n  }\n}\nexport interface RendererRegistration {\n  loadRenderer: () => Promise<Renderer>;\n  contextTypes: () => Array<Function>;\n}\n"],
  "mappings": "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",
  "names": []
}
