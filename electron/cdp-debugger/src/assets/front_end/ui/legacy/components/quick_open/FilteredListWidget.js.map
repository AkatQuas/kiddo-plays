{
  "version": 3,
  "sources": ["../../../../../../../../front_end/ui/legacy/components/quick_open/FilteredListWidget.ts"],
  "sourcesContent": ["// Copyright 2012 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration)\n/* eslint-disable-next-line @typescript-eslint/no-explicit-any */\n\nimport * as Common from '../../../../core/common/common.js';\nimport * as i18n from '../../../../core/i18n/i18n.js';\nimport * as Platform from '../../../../core/platform/platform.js';\nimport * as TextUtils from '../../../../models/text_utils/text_utils.js';\nimport * as Diff from '../../../../third_party/diff/diff.js';\nimport * as TextPrompt from '../../../../ui/components/text_prompt/text_prompt.js';\nimport * as UI from '../../legacy.js';\n\nimport filteredListWidgetStyles from './filteredListWidget.css.js';\n\nconst UIStrings = {\n  /**\n  * @description Aria label for quick open dialog prompt\n  */\n  quickOpenPrompt: 'Quick open prompt',\n  /**\n  * @description Title of quick open dialog\n  */\n  quickOpen: 'Quick open',\n  /**\n  * @description Text to show no results have been found\n  */\n  noResultsFound: 'No results found',\n};\nconst str_ = i18n.i18n.registerUIStrings('ui/legacy/components/quick_open/FilteredListWidget.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nexport class FilteredListWidget extends Common.ObjectWrapper.eventMixin<EventTypes, typeof UI.Widget.VBox>(\n    UI.Widget.VBox) implements UI.ListControl.ListDelegate<number> {\n  private promptHistory: string[];\n  private scoringTimer: number;\n  private filterTimer: number;\n  private loadTimeout: number;\n  private refreshListWithCurrentResult!: (() => void)|undefined;\n  private dialog!: UI.Dialog.Dialog|undefined;\n  private query = '';\n  private readonly inputBoxElement: TextPrompt.TextPrompt.TextPrompt;\n  private readonly hintElement: HTMLElement;\n  private readonly bottomElementsContainer: HTMLElement;\n  private readonly progressElement: HTMLElement;\n  private progressBarElement: HTMLElement;\n  private readonly items: UI.ListModel.ListModel<number>;\n  private list: UI.ListControl.ListControl<number>;\n  private readonly itemElementsContainer: HTMLDivElement;\n  private notFoundElement: HTMLElement;\n  private prefix = '';\n  private provider: Provider|null;\n  private readonly queryChangedCallback?: (arg0: string) => void;\n\n  constructor(provider: Provider|null, promptHistory?: string[], queryChangedCallback?: ((arg0: string) => void)) {\n    super(true);\n    this.promptHistory = promptHistory || [];\n\n    this.scoringTimer = 0;\n    this.filterTimer = 0;\n    this.loadTimeout = 0;\n\n    this.contentElement.classList.add('filtered-list-widget');\n    const listener = (this.onKeyDown.bind(this) as (arg0: Event) => void);\n    this.contentElement.addEventListener('keydown', listener, true);\n    UI.ARIAUtils.markAsCombobox(this.contentElement);\n\n    this.inputBoxElement = new TextPrompt.TextPrompt.TextPrompt();\n    this.inputBoxElement.data = {ariaLabel: i18nString(UIStrings.quickOpenPrompt), prefix: '', suggestion: ''};\n    this.inputBoxElement.addEventListener(\n        TextPrompt.TextPrompt.PromptInputEvent.eventName, this.onInput.bind(this), false);\n    this.contentElement.appendChild(this.inputBoxElement);\n\n    this.hintElement = this.contentElement.createChild('div', 'filtered-list-widget-hint');\n\n    this.bottomElementsContainer = this.contentElement.createChild('div', 'vbox');\n    this.progressElement = this.bottomElementsContainer.createChild('div', 'filtered-list-widget-progress');\n    this.progressBarElement = this.progressElement.createChild('div', 'filtered-list-widget-progress-bar');\n\n    this.items = new UI.ListModel.ListModel();\n    this.list = new UI.ListControl.ListControl(this.items, this, UI.ListControl.ListMode.EqualHeightItems);\n    this.itemElementsContainer = this.list.element;\n    this.itemElementsContainer.classList.add('container');\n    this.bottomElementsContainer.appendChild(this.itemElementsContainer);\n    this.itemElementsContainer.addEventListener('click', this.onClick.bind(this), false);\n    this.itemElementsContainer.addEventListener('mousemove', this.onMouseMove.bind(this), false);\n    UI.ARIAUtils.markAsListBox(this.itemElementsContainer);\n    UI.ARIAUtils.setControls(this.inputBoxElement, this.itemElementsContainer);\n    UI.ARIAUtils.setAutocomplete(this.inputBoxElement, UI.ARIAUtils.AutocompleteInteractionModel.list);\n\n    this.notFoundElement = this.bottomElementsContainer.createChild('div', 'not-found-text');\n    this.notFoundElement.classList.add('hidden');\n\n    this.setDefaultFocusedElement(this.inputBoxElement);\n\n    this.provider = provider;\n    this.queryChangedCallback = queryChangedCallback;\n  }\n\n  static highlightRanges(element: Element, query: string, caseInsensitive?: boolean): boolean {\n    if (!query) {\n      return false;\n    }\n\n    function rangesForMatch(text: string, query: string): TextUtils.TextRange.SourceRange[]|null {\n      const opcodes = Diff.Diff.DiffWrapper.charDiff(query, text);\n      let offset = 0;\n      const ranges = [];\n      for (let i = 0; i < opcodes.length; ++i) {\n        const opcode = opcodes[i];\n        if (opcode[0] === Diff.Diff.Operation.Equal) {\n          ranges.push(new TextUtils.TextRange.SourceRange(offset, opcode[1].length));\n        } else if (opcode[0] !== Diff.Diff.Operation.Insert) {\n          return null;\n        }\n        offset += opcode[1].length;\n      }\n      return ranges;\n    }\n\n    if (element.textContent === null) {\n      return false;\n    }\n    const text = element.textContent;\n    let ranges = rangesForMatch(text, query);\n    if (!ranges || caseInsensitive) {\n      ranges = rangesForMatch(text.toUpperCase(), query.toUpperCase());\n    }\n    if (ranges) {\n      UI.UIUtils.highlightRangesWithStyleClass(element, ranges, 'highlight');\n      return true;\n    }\n    return false;\n  }\n\n  setCommandPrefix(commandPrefix: string): void {\n    this.inputBoxElement.setPrefix(commandPrefix);\n  }\n\n  setCommandSuggestion(suggestion: string): void {\n    this.inputBoxElement.setSuggestion(suggestion);\n  }\n\n  setHintElement(hint: string): void {\n    this.hintElement.textContent = hint;\n  }\n\n  /**\n   * Sets the text prompt's accessible title. By default, it is \"Quick open prompt\".\n   */\n  setPromptTitle(title: string): void {\n    UI.ARIAUtils.setAccessibleName(this.inputBoxElement, title);\n  }\n\n  showAsDialog(dialogTitle?: string): void {\n    if (!dialogTitle) {\n      dialogTitle = i18nString(UIStrings.quickOpen);\n    }\n\n    this.dialog = new UI.Dialog.Dialog();\n    UI.ARIAUtils.setAccessibleName(this.dialog.contentElement, dialogTitle);\n    this.dialog.setMaxContentSize(new UI.Geometry.Size(504, 340));\n    this.dialog.setSizeBehavior(UI.GlassPane.SizeBehavior.SetExactWidthMaxHeight);\n    this.dialog.setContentPosition(null, 22);\n    this.dialog.contentElement.style.setProperty('border-radius', '4px');\n    this.show(this.dialog.contentElement);\n    UI.ARIAUtils.setExpanded(this.contentElement, true);\n    void this.dialog.once(UI.Dialog.Events.Hidden).then(() => {\n      this.dispatchEventToListeners(Events.Hidden);\n    });\n    // @ts-ignore\n    this.dialog.show();\n  }\n\n  setPrefix(prefix: string): void {\n    this.prefix = prefix;\n  }\n\n  setProvider(provider: Provider|null): void {\n    if (provider === this.provider) {\n      return;\n    }\n\n    if (this.provider) {\n      this.provider.detach();\n    }\n    this.clearTimers();\n\n    this.provider = provider;\n    if (this.isShowing()) {\n      this.attachProvider();\n    }\n  }\n\n  setQuerySelectedRange(startIndex: number, endIndex: number): void {\n    this.inputBoxElement.setSelectedRange(startIndex, endIndex);\n  }\n\n  private attachProvider(): void {\n    this.items.replaceAll([]);\n    this.list.invalidateItemHeight();\n    if (this.provider) {\n      this.provider.setRefreshCallback(this.itemsLoaded.bind(this, this.provider));\n      this.provider.attach();\n    }\n    this.itemsLoaded(this.provider);\n  }\n\n  private cleanValue(): string {\n    return this.query.substring(this.prefix.length);\n  }\n\n  wasShown(): void {\n    this.registerCSSFiles([filteredListWidgetStyles]);\n    this.attachProvider();\n  }\n\n  willHide(): void {\n    if (this.provider) {\n      this.provider.detach();\n    }\n    this.clearTimers();\n    UI.ARIAUtils.setExpanded(this.contentElement, false);\n  }\n\n  private clearTimers(): void {\n    clearTimeout(this.filterTimer);\n    clearTimeout(this.scoringTimer);\n    clearTimeout(this.loadTimeout);\n    this.filterTimer = 0;\n    this.scoringTimer = 0;\n    this.loadTimeout = 0;\n    this.refreshListWithCurrentResult = undefined;\n  }\n\n  private onEnter(event: Event): void {\n    if (!this.provider) {\n      return;\n    }\n    event.preventDefault();\n    const selectedIndexInProvider = this.provider.itemCount() ? this.list.selectedItem() : null;\n\n    this.selectItem(selectedIndexInProvider);\n    if (this.dialog) {\n      this.dialog.hide();\n    }\n  }\n\n  private itemsLoaded(provider: Provider|null): void {\n    if (this.loadTimeout || provider !== this.provider) {\n      return;\n    }\n    this.loadTimeout = window.setTimeout(this.updateAfterItemsLoaded.bind(this), 0);\n  }\n\n  private updateAfterItemsLoaded(): void {\n    this.loadTimeout = 0;\n    this.filterItems();\n  }\n\n  createElementForItem(item: number): Element {\n    const wrapperElement = document.createElement('div');\n    wrapperElement.className = 'filtered-list-widget-item-wrapper';\n\n    const itemElement = wrapperElement.createChild('div');\n    const renderAsTwoRows = this.provider && this.provider.renderAsTwoRows();\n    itemElement.className = 'filtered-list-widget-item ' + (renderAsTwoRows ? 'two-rows' : 'one-row');\n    const titleElement = itemElement.createChild('div', 'filtered-list-widget-title');\n    const subtitleElement = itemElement.createChild('div', 'filtered-list-widget-subtitle');\n    subtitleElement.textContent = '\\u200B';\n    if (this.provider) {\n      this.provider.renderItem(item, this.cleanValue(), titleElement, subtitleElement);\n    }\n    UI.ARIAUtils.markAsOption(itemElement);\n    return wrapperElement;\n  }\n\n  heightForItem(_item: number): number {\n    // Let the list measure items for us.\n    return 0;\n  }\n\n  isItemSelectable(_item: number): boolean {\n    return true;\n  }\n\n  selectedItemChanged(_from: number|null, _to: number|null, fromElement: Element|null, toElement: Element|null): void {\n    if (fromElement) {\n      fromElement.classList.remove('selected');\n    }\n    if (toElement) {\n      toElement.classList.add('selected');\n    }\n    UI.ARIAUtils.setActiveDescendant(this.inputBoxElement, toElement);\n  }\n\n  private onClick(event: Event): void {\n    const item = this.list.itemForNode((event.target as Node | null));\n    if (item === null) {\n      return;\n    }\n\n    event.consume(true);\n    this.selectItem(item);\n    if (this.dialog) {\n      this.dialog.hide();\n    }\n  }\n\n  private onMouseMove(event: Event): void {\n    const item = this.list.itemForNode((event.target as Node | null));\n    if (item === null) {\n      return;\n    }\n    this.list.selectItem(item);\n  }\n\n  setQuery(query: string): void {\n    this.query = query;\n    this.inputBoxElement.focus();\n    this.inputBoxElement.setText(query);\n    void this.queryChanged();\n    this.scheduleFilter();\n  }\n\n  private tabKeyPressed(): boolean {\n    const userEnteredText = this.query;\n    let completion;\n    for (let i = this.promptHistory.length - 1; i >= 0; i--) {\n      if (this.promptHistory[i] !== userEnteredText && this.promptHistory[i].startsWith(userEnteredText)) {\n        completion = this.promptHistory[i];\n        break;\n      }\n    }\n    // If there is an auto-completion, press 'tab' first time will show the auto-completion, second time will rewrite\n    // the query. Otherwise it will select the next item.\n    if (completion) {\n      const selection = this.inputBoxElement.getComponentSelection();\n      if (selection && selection.toString().trim() !== '') {\n        this.setQuery(completion);\n        return true;\n      }\n      this.inputBoxElement.focus();\n      this.inputBoxElement.setText(completion);\n      this.setQuerySelectedRange(userEnteredText.length, completion.length);\n      return true;\n    }\n    return this.list.selectNextItem(true, false);\n  }\n\n  private itemsFilteredForTest(): void {\n    // Sniffed in tests.\n  }\n\n  private filterItems(): void {\n    this.filterTimer = 0;\n    if (this.scoringTimer) {\n      clearTimeout(this.scoringTimer);\n      this.scoringTimer = 0;\n\n      if (this.refreshListWithCurrentResult) {\n        this.refreshListWithCurrentResult();\n      }\n    }\n\n    if (!this.provider) {\n      this.bottomElementsContainer.classList.toggle('hidden', true);\n      this.itemsFilteredForTest();\n      return;\n    }\n\n    this.bottomElementsContainer.classList.toggle('hidden', false);\n\n    this.progressBarElement.style.transform = 'scaleX(0)';\n    this.progressBarElement.classList.remove('filtered-widget-progress-fade', 'hidden');\n\n    const query = this.provider.rewriteQuery(this.cleanValue());\n\n    const filterRegex = query ? Platform.StringUtilities.filterRegex(query) : null;\n\n    const filteredItems: number[] = [];\n\n    const bestScores: number[] = [];\n    const bestItems: number[] = [];\n    const bestItemsToCollect = 100;\n    let minBestScore = 0;\n    const overflowItems: number[] = [];\n    const scoreStartTime = window.performance.now();\n\n    const maxWorkItems = Platform.NumberUtilities.clamp(10, 500, (this.provider.itemCount() / 10) | 0);\n\n    scoreItems.call(this, 0);\n\n    function compareIntegers(a: number, b: number): number {\n      return b - a;\n    }\n\n    function scoreItems(this: FilteredListWidget, fromIndex: number): void {\n      if (!this.provider) {\n        return;\n      }\n      this.scoringTimer = 0;\n      let workDone = 0;\n      let i;\n\n      for (i = fromIndex; i < this.provider.itemCount() && workDone < maxWorkItems; ++i) {\n        // Filter out non-matching items quickly.\n        if (filterRegex && !filterRegex.test(this.provider.itemKeyAt(i))) {\n          continue;\n        }\n\n        // Score item.\n        const score = this.provider.itemScoreAt(i, query);\n        if (query) {\n          workDone++;\n        }\n\n        // Find its index in the scores array (earlier elements have bigger scores).\n        if (score > minBestScore || bestScores.length < bestItemsToCollect) {\n          const index = Platform.ArrayUtilities.upperBound(bestScores, score, compareIntegers);\n          bestScores.splice(index, 0, score);\n          bestItems.splice(index, 0, i);\n          if (bestScores.length > bestItemsToCollect) {\n            // Best list is too large -> drop last elements.\n            const bestItemLast = bestItems[bestItems.length - 1];\n            if (bestItemLast) {\n              overflowItems.push(bestItemLast);\n            }\n            bestScores.length = bestItemsToCollect;\n            bestItems.length = bestItemsToCollect;\n          }\n          const bestScoreLast = bestScores[bestScores.length - 1];\n          if (bestScoreLast) {\n            minBestScore = bestScoreLast;\n          }\n        } else {\n          filteredItems.push(i);\n        }\n      }\n\n      this.refreshListWithCurrentResult = this.refreshList.bind(this, bestItems, overflowItems, filteredItems);\n\n      // Process everything in chunks.\n      if (i < this.provider.itemCount()) {\n        this.scoringTimer = window.setTimeout(scoreItems.bind(this, i), 0);\n        if (window.performance.now() - scoreStartTime > 50) {\n          this.progressBarElement.style.transform = 'scaleX(' + i / this.provider.itemCount() + ')';\n        }\n        return;\n      }\n      if (window.performance.now() - scoreStartTime > 100) {\n        this.progressBarElement.style.transform = 'scaleX(1)';\n        this.progressBarElement.classList.add('filtered-widget-progress-fade');\n      } else {\n        this.progressBarElement.classList.add('hidden');\n      }\n      this.refreshListWithCurrentResult();\n    }\n  }\n\n  private refreshList(bestItems: number[], overflowItems: number[], filteredItems: number[]): void {\n    this.refreshListWithCurrentResult = undefined;\n    filteredItems = [...bestItems, ...overflowItems, ...filteredItems];\n    this.updateNotFoundMessage(Boolean(filteredItems.length));\n    const oldHeight = this.list.element.offsetHeight;\n    this.items.replaceAll(filteredItems);\n    if (filteredItems.length) {\n      this.list.selectItem(filteredItems[0]);\n    }\n    if (this.list.element.offsetHeight !== oldHeight) {\n      this.list.viewportResized();\n    }\n    this.itemsFilteredForTest();\n  }\n\n  private updateNotFoundMessage(hasItems: boolean): void {\n    this.list.element.classList.toggle('hidden', !hasItems);\n    this.notFoundElement.classList.toggle('hidden', hasItems);\n    if (!hasItems && this.provider) {\n      this.notFoundElement.textContent = this.provider.notFoundText(this.cleanValue());\n      UI.ARIAUtils.alert(this.notFoundElement.textContent);\n    }\n  }\n\n  private onInput(event: TextPrompt.TextPrompt.PromptInputEvent): void {\n    this.query = event.data;\n    void this.queryChanged();\n    this.scheduleFilter();\n  }\n\n  private async queryChanged(): Promise<void> {\n    if (this.queryChangedCallback) {\n      await this.queryChangedCallback(this.query);\n    }\n    if (this.provider) {\n      this.provider.queryChanged(this.cleanValue());\n    }\n  }\n\n  updateSelectedItemARIA(_fromElement: Element|null, _toElement: Element|null): boolean {\n    return false;\n  }\n\n  private onKeyDown(keyboardEvent: KeyboardEvent): void {\n    let handled = false;\n    switch (keyboardEvent.key) {\n      case Platform.KeyboardUtilities.ENTER_KEY:\n        this.onEnter(keyboardEvent);\n        return;\n      case Platform.KeyboardUtilities.TAB_KEY:\n        if (keyboardEvent.shiftKey) {\n          handled = this.list.selectPreviousItem(true, false);\n          break;\n        }\n        handled = this.tabKeyPressed();\n        break;\n      case Platform.KeyboardUtilities.ArrowKey.UP:\n        handled = this.list.selectPreviousItem(true, false);\n        break;\n      case Platform.KeyboardUtilities.ArrowKey.DOWN:\n        handled = this.list.selectNextItem(true, false);\n        break;\n      case Platform.KeyboardUtilities.PageKey.UP:\n        handled = this.list.selectItemPreviousPage(false);\n        break;\n      case Platform.KeyboardUtilities.PageKey.DOWN:\n        handled = this.list.selectItemNextPage(false);\n        break;\n    }\n    if (handled) {\n      keyboardEvent.consume(true);\n    }\n  }\n\n  private scheduleFilter(): void {\n    if (this.filterTimer) {\n      return;\n    }\n    this.filterTimer = window.setTimeout(this.filterItems.bind(this), 0);\n  }\n\n  private selectItem(itemIndex: number|null): void {\n    this.promptHistory.push(this.query);\n    if (this.promptHistory.length > 100) {\n      this.promptHistory.shift();\n    }\n    if (this.provider) {\n      this.provider.selectItem(itemIndex, this.cleanValue());\n    }\n  }\n}\n\nexport const enum Events {\n  Hidden = 'hidden',\n}\n\nexport type EventTypes = {\n  [Events.Hidden]: void,\n};\n\nexport class Provider {\n  private refreshCallback!: () => void;\n  constructor() {\n  }\n\n  setRefreshCallback(refreshCallback: () => void): void {\n    this.refreshCallback = refreshCallback;\n  }\n\n  attach(): void {\n  }\n\n  itemCount(): number {\n    return 0;\n  }\n\n  itemKeyAt(_itemIndex: number): string {\n    return '';\n  }\n\n  itemScoreAt(_itemIndex: number, _query: string): number {\n    return 1;\n  }\n\n  renderItem(_itemIndex: number, _query: string, _titleElement: Element, _subtitleElement: Element): void {\n  }\n\n  renderAsTwoRows(): boolean {\n    return false;\n  }\n\n  selectItem(_itemIndex: number|null, _promptValue: string): void {\n  }\n\n  refresh(): void {\n    if (this.refreshCallback) {\n      this.refreshCallback();\n    }\n  }\n\n  rewriteQuery(query: string): string {\n    return query;\n  }\n\n  queryChanged(_query: string): void {\n  }\n\n  notFoundText(_query: string): string {\n    return i18nString(UIStrings.noResultsFound);\n  }\n\n  detach(): void {\n  }\n}\n\nconst registeredProviders: ProviderRegistration[] = [];\n\nexport function registerProvider(registration: ProviderRegistration): void {\n  registeredProviders.push(registration);\n}\nexport function getRegisteredProviders(): ProviderRegistration[] {\n  return registeredProviders;\n}\nexport interface ProviderRegistration {\n  prefix: string;\n  iconName: string;\n  provider: () => Promise<Provider>;\n  titlePrefix: (() => string);\n  titleSuggestion?: (() => string);\n}\n"],
  "mappings": "AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AAEA,MAAM,YAAY;AAAA,EAIhB,iBAAiB;AAAA,EAIjB,WAAW;AAAA,EAIX,gBAAgB;AAAA;AAElB,MAAM,OAAO,KAAK,KAAK,kBAAkB,yDAAyD;AAClG,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AAEzD,wCAAiC,OAAO,cAAc,WACzD,GAAG,OAAO,MAAqD;AAAA,EACzD;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA,QAAQ;AAAA,EACC;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACT;AAAA,EACS;AAAA,EACT;AAAA,EACS;AAAA,EACT;AAAA,EACA,SAAS;AAAA,EACT;AAAA,EACS;AAAA,EAEjB,YAAY,UAAyB,eAA0B,sBAAiD;AAC9G,UAAM;AACN,SAAK,gBAAgB,iBAAiB;AAEtC,SAAK,eAAe;AACpB,SAAK,cAAc;AACnB,SAAK,cAAc;AAEnB,SAAK,eAAe,UAAU,IAAI;AAClC,UAAM,WAAY,KAAK,UAAU,KAAK;AACtC,SAAK,eAAe,iBAAiB,WAAW,UAAU;AAC1D,OAAG,UAAU,eAAe,KAAK;AAEjC,SAAK,kBAAkB,IAAI,WAAW,WAAW;AACjD,SAAK,gBAAgB,OAAO,EAAC,WAAW,WAAW,UAAU,kBAAkB,QAAQ,IAAI,YAAY;AACvG,SAAK,gBAAgB,iBACjB,WAAW,WAAW,iBAAiB,WAAW,KAAK,QAAQ,KAAK,OAAO;AAC/E,SAAK,eAAe,YAAY,KAAK;AAErC,SAAK,cAAc,KAAK,eAAe,YAAY,OAAO;AAE1D,SAAK,0BAA0B,KAAK,eAAe,YAAY,OAAO;AACtE,SAAK,kBAAkB,KAAK,wBAAwB,YAAY,OAAO;AACvE,SAAK,qBAAqB,KAAK,gBAAgB,YAAY,OAAO;AAElE,SAAK,QAAQ,IAAI,GAAG,UAAU;AAC9B,SAAK,OAAO,IAAI,GAAG,YAAY,YAAY,KAAK,OAAO,MAAM,GAAG,YAAY,SAAS;AACrF,SAAK,wBAAwB,KAAK,KAAK;AACvC,SAAK,sBAAsB,UAAU,IAAI;AACzC,SAAK,wBAAwB,YAAY,KAAK;AAC9C,SAAK,sBAAsB,iBAAiB,SAAS,KAAK,QAAQ,KAAK,OAAO;AAC9E,SAAK,sBAAsB,iBAAiB,aAAa,KAAK,YAAY,KAAK,OAAO;AACtF,OAAG,UAAU,cAAc,KAAK;AAChC,OAAG,UAAU,YAAY,KAAK,iBAAiB,KAAK;AACpD,OAAG,UAAU,gBAAgB,KAAK,iBAAiB,GAAG,UAAU,6BAA6B;AAE7F,SAAK,kBAAkB,KAAK,wBAAwB,YAAY,OAAO;AACvE,SAAK,gBAAgB,UAAU,IAAI;AAEnC,SAAK,yBAAyB,KAAK;AAEnC,SAAK,WAAW;AAChB,SAAK,uBAAuB;AAAA;AAAA,SAGvB,gBAAgB,SAAkB,OAAe,iBAAoC;AAC1F,QAAI,CAAC,OAAO;AACV,aAAO;AAAA;AAGT,4BAAwB,OAAc,QAAuD;AAC3F,YAAM,UAAU,KAAK,KAAK,YAAY,SAAS,QAAO;AACtD,UAAI,SAAS;AACb,YAAM,UAAS;AACf,eAAS,IAAI,GAAG,IAAI,QAAQ,QAAQ,EAAE,GAAG;AACvC,cAAM,SAAS,QAAQ;AACvB,YAAI,OAAO,OAAO,KAAK,KAAK,UAAU,OAAO;AAC3C,kBAAO,KAAK,IAAI,UAAU,UAAU,YAAY,QAAQ,OAAO,GAAG;AAAA,mBACzD,OAAO,OAAO,KAAK,KAAK,UAAU,QAAQ;AACnD,iBAAO;AAAA;AAET,kBAAU,OAAO,GAAG;AAAA;AAEtB,aAAO;AAAA;AAGT,QAAI,QAAQ,gBAAgB,MAAM;AAChC,aAAO;AAAA;AAET,UAAM,OAAO,QAAQ;AACrB,QAAI,SAAS,eAAe,MAAM;AAClC,QAAI,CAAC,UAAU,iBAAiB;AAC9B,eAAS,eAAe,KAAK,eAAe,MAAM;AAAA;AAEpD,QAAI,QAAQ;AACV,SAAG,QAAQ,8BAA8B,SAAS,QAAQ;AAC1D,aAAO;AAAA;AAET,WAAO;AAAA;AAAA,EAGT,iBAAiB,eAA6B;AAC5C,SAAK,gBAAgB,UAAU;AAAA;AAAA,EAGjC,qBAAqB,YAA0B;AAC7C,SAAK,gBAAgB,cAAc;AAAA;AAAA,EAGrC,eAAe,MAAoB;AACjC,SAAK,YAAY,cAAc;AAAA;AAAA,EAMjC,eAAe,OAAqB;AAClC,OAAG,UAAU,kBAAkB,KAAK,iBAAiB;AAAA;AAAA,EAGvD,aAAa,aAA4B;AACvC,QAAI,CAAC,aAAa;AAChB,oBAAc,WAAW,UAAU;AAAA;AAGrC,SAAK,SAAS,IAAI,GAAG,OAAO;AAC5B,OAAG,UAAU,kBAAkB,KAAK,OAAO,gBAAgB;AAC3D,SAAK,OAAO,kBAAkB,IAAI,GAAG,SAAS,KAAK,KAAK;AACxD,SAAK,OAAO,gBAAgB,GAAG,UAAU,aAAa;AACtD,SAAK,OAAO,mBAAmB,MAAM;AACrC,SAAK,OAAO,eAAe,MAAM,YAAY,iBAAiB;AAC9D,SAAK,KAAK,KAAK,OAAO;AACtB,OAAG,UAAU,YAAY,KAAK,gBAAgB;AAC9C,SAAK,KAAK,OAAO,KAAK,GAAG,OAAO,OAAO,QAAQ,KAAK,MAAM;AACxD,WAAK,yBAAyB,OAAO;AAAA;AAGvC,SAAK,OAAO;AAAA;AAAA,EAGd,UAAU,QAAsB;AAC9B,SAAK,SAAS;AAAA;AAAA,EAGhB,YAAY,UAA+B;AACzC,QAAI,aAAa,KAAK,UAAU;AAC9B;AAAA;AAGF,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS;AAAA;AAEhB,SAAK;AAEL,SAAK,WAAW;AAChB,QAAI,KAAK,aAAa;AACpB,WAAK;AAAA;AAAA;AAAA,EAIT,sBAAsB,YAAoB,UAAwB;AAChE,SAAK,gBAAgB,iBAAiB,YAAY;AAAA;AAAA,EAG5C,iBAAuB;AAC7B,SAAK,MAAM,WAAW;AACtB,SAAK,KAAK;AACV,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS,mBAAmB,KAAK,YAAY,KAAK,MAAM,KAAK;AAClE,WAAK,SAAS;AAAA;AAEhB,SAAK,YAAY,KAAK;AAAA;AAAA,EAGhB,aAAqB;AAC3B,WAAO,KAAK,MAAM,UAAU,KAAK,OAAO;AAAA;AAAA,EAG1C,WAAiB;AACf,SAAK,iBAAiB,CAAC;AACvB,SAAK;AAAA;AAAA,EAGP,WAAiB;AACf,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS;AAAA;AAEhB,SAAK;AACL,OAAG,UAAU,YAAY,KAAK,gBAAgB;AAAA;AAAA,EAGxC,cAAoB;AAC1B,iBAAa,KAAK;AAClB,iBAAa,KAAK;AAClB,iBAAa,KAAK;AAClB,SAAK,cAAc;AACnB,SAAK,eAAe;AACpB,SAAK,cAAc;AACnB,SAAK,+BAA+B;AAAA;AAAA,EAG9B,QAAQ,OAAoB;AAClC,QAAI,CAAC,KAAK,UAAU;AAClB;AAAA;AAEF,UAAM;AACN,UAAM,0BAA0B,KAAK,SAAS,cAAc,KAAK,KAAK,iBAAiB;AAEvF,SAAK,WAAW;AAChB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO;AAAA;AAAA;AAAA,EAIR,YAAY,UAA+B;AACjD,QAAI,KAAK,eAAe,aAAa,KAAK,UAAU;AAClD;AAAA;AAEF,SAAK,cAAc,OAAO,WAAW,KAAK,uBAAuB,KAAK,OAAO;AAAA;AAAA,EAGvE,yBAA+B;AACrC,SAAK,cAAc;AACnB,SAAK;AAAA;AAAA,EAGP,qBAAqB,MAAuB;AAC1C,UAAM,iBAAiB,SAAS,cAAc;AAC9C,mBAAe,YAAY;AAE3B,UAAM,cAAc,eAAe,YAAY;AAC/C,UAAM,kBAAkB,KAAK,YAAY,KAAK,SAAS;AACvD,gBAAY,YAAY,+BAAgC,mBAAkB,aAAa;AACvF,UAAM,eAAe,YAAY,YAAY,OAAO;AACpD,UAAM,kBAAkB,YAAY,YAAY,OAAO;AACvD,oBAAgB,cAAc;AAC9B,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS,WAAW,MAAM,KAAK,cAAc,cAAc;AAAA;AAElE,OAAG,UAAU,aAAa;AAC1B,WAAO;AAAA;AAAA,EAGT,cAAc,OAAuB;AAEnC,WAAO;AAAA;AAAA,EAGT,iBAAiB,OAAwB;AACvC,WAAO;AAAA;AAAA,EAGT,oBAAoB,OAAoB,KAAkB,aAA2B,WAA+B;AAClH,QAAI,aAAa;AACf,kBAAY,UAAU,OAAO;AAAA;AAE/B,QAAI,WAAW;AACb,gBAAU,UAAU,IAAI;AAAA;AAE1B,OAAG,UAAU,oBAAoB,KAAK,iBAAiB;AAAA;AAAA,EAGjD,QAAQ,OAAoB;AAClC,UAAM,OAAO,KAAK,KAAK,YAAa,MAAM;AAC1C,QAAI,SAAS,MAAM;AACjB;AAAA;AAGF,UAAM,QAAQ;AACd,SAAK,WAAW;AAChB,QAAI,KAAK,QAAQ;AACf,WAAK,OAAO;AAAA;AAAA;AAAA,EAIR,YAAY,OAAoB;AACtC,UAAM,OAAO,KAAK,KAAK,YAAa,MAAM;AAC1C,QAAI,SAAS,MAAM;AACjB;AAAA;AAEF,SAAK,KAAK,WAAW;AAAA;AAAA,EAGvB,SAAS,OAAqB;AAC5B,SAAK,QAAQ;AACb,SAAK,gBAAgB;AACrB,SAAK,gBAAgB,QAAQ;AAC7B,SAAK,KAAK;AACV,SAAK;AAAA;AAAA,EAGC,gBAAyB;AAC/B,UAAM,kBAAkB,KAAK;AAC7B,QAAI;AACJ,aAAS,IAAI,KAAK,cAAc,SAAS,GAAG,KAAK,GAAG,KAAK;AACvD,UAAI,KAAK,cAAc,OAAO,mBAAmB,KAAK,cAAc,GAAG,WAAW,kBAAkB;AAClG,qBAAa,KAAK,cAAc;AAChC;AAAA;AAAA;AAKJ,QAAI,YAAY;AACd,YAAM,YAAY,KAAK,gBAAgB;AACvC,UAAI,aAAa,UAAU,WAAW,WAAW,IAAI;AACnD,aAAK,SAAS;AACd,eAAO;AAAA;AAET,WAAK,gBAAgB;AACrB,WAAK,gBAAgB,QAAQ;AAC7B,WAAK,sBAAsB,gBAAgB,QAAQ,WAAW;AAC9D,aAAO;AAAA;AAET,WAAO,KAAK,KAAK,eAAe,MAAM;AAAA;AAAA,EAGhC,uBAA6B;AAAA;AAAA,EAI7B,cAAoB;AAC1B,SAAK,cAAc;AACnB,QAAI,KAAK,cAAc;AACrB,mBAAa,KAAK;AAClB,WAAK,eAAe;AAEpB,UAAI,KAAK,8BAA8B;AACrC,aAAK;AAAA;AAAA;AAIT,QAAI,CAAC,KAAK,UAAU;AAClB,WAAK,wBAAwB,UAAU,OAAO,UAAU;AACxD,WAAK;AACL;AAAA;AAGF,SAAK,wBAAwB,UAAU,OAAO,UAAU;AAExD,SAAK,mBAAmB,MAAM,YAAY;AAC1C,SAAK,mBAAmB,UAAU,OAAO,iCAAiC;AAE1E,UAAM,QAAQ,KAAK,SAAS,aAAa,KAAK;AAE9C,UAAM,cAAc,QAAQ,SAAS,gBAAgB,YAAY,SAAS;AAE1E,UAAM,gBAA0B;AAEhC,UAAM,aAAuB;AAC7B,UAAM,YAAsB;AAC5B,UAAM,qBAAqB;AAC3B,QAAI,eAAe;AACnB,UAAM,gBAA0B;AAChC,UAAM,iBAAiB,OAAO,YAAY;AAE1C,UAAM,eAAe,SAAS,gBAAgB,MAAM,IAAI,KAAM,KAAK,SAAS,cAAc,KAAM;AAEhG,eAAW,KAAK,MAAM;AAEtB,6BAAyB,GAAW,GAAmB;AACrD,aAAO,IAAI;AAAA;AAGb,wBAA8C,WAAyB;AACrE,UAAI,CAAC,KAAK,UAAU;AAClB;AAAA;AAEF,WAAK,eAAe;AACpB,UAAI,WAAW;AACf,UAAI;AAEJ,WAAK,IAAI,WAAW,IAAI,KAAK,SAAS,eAAe,WAAW,cAAc,EAAE,GAAG;AAEjF,YAAI,eAAe,CAAC,YAAY,KAAK,KAAK,SAAS,UAAU,KAAK;AAChE;AAAA;AAIF,cAAM,QAAQ,KAAK,SAAS,YAAY,GAAG;AAC3C,YAAI,OAAO;AACT;AAAA;AAIF,YAAI,QAAQ,gBAAgB,WAAW,SAAS,oBAAoB;AAClE,gBAAM,QAAQ,SAAS,eAAe,WAAW,YAAY,OAAO;AACpE,qBAAW,OAAO,OAAO,GAAG;AAC5B,oBAAU,OAAO,OAAO,GAAG;AAC3B,cAAI,WAAW,SAAS,oBAAoB;AAE1C,kBAAM,eAAe,UAAU,UAAU,SAAS;AAClD,gBAAI,cAAc;AAChB,4BAAc,KAAK;AAAA;AAErB,uBAAW,SAAS;AACpB,sBAAU,SAAS;AAAA;AAErB,gBAAM,gBAAgB,WAAW,WAAW,SAAS;AACrD,cAAI,eAAe;AACjB,2BAAe;AAAA;AAAA,eAEZ;AACL,wBAAc,KAAK;AAAA;AAAA;AAIvB,WAAK,+BAA+B,KAAK,YAAY,KAAK,MAAM,WAAW,eAAe;AAG1F,UAAI,IAAI,KAAK,SAAS,aAAa;AACjC,aAAK,eAAe,OAAO,WAAW,WAAW,KAAK,MAAM,IAAI;AAChE,YAAI,OAAO,YAAY,QAAQ,iBAAiB,IAAI;AAClD,eAAK,mBAAmB,MAAM,YAAY,YAAY,IAAI,KAAK,SAAS,cAAc;AAAA;AAExF;AAAA;AAEF,UAAI,OAAO,YAAY,QAAQ,iBAAiB,KAAK;AACnD,aAAK,mBAAmB,MAAM,YAAY;AAC1C,aAAK,mBAAmB,UAAU,IAAI;AAAA,aACjC;AACL,aAAK,mBAAmB,UAAU,IAAI;AAAA;AAExC,WAAK;AAAA;AAAA;AAAA,EAID,YAAY,WAAqB,eAAyB,eAA+B;AAC/F,SAAK,+BAA+B;AACpC,oBAAgB,CAAC,GAAG,WAAW,GAAG,eAAe,GAAG;AACpD,SAAK,sBAAsB,QAAQ,cAAc;AACjD,UAAM,YAAY,KAAK,KAAK,QAAQ;AACpC,SAAK,MAAM,WAAW;AACtB,QAAI,cAAc,QAAQ;AACxB,WAAK,KAAK,WAAW,cAAc;AAAA;AAErC,QAAI,KAAK,KAAK,QAAQ,iBAAiB,WAAW;AAChD,WAAK,KAAK;AAAA;AAEZ,SAAK;AAAA;AAAA,EAGC,sBAAsB,UAAyB;AACrD,SAAK,KAAK,QAAQ,UAAU,OAAO,UAAU,CAAC;AAC9C,SAAK,gBAAgB,UAAU,OAAO,UAAU;AAChD,QAAI,CAAC,YAAY,KAAK,UAAU;AAC9B,WAAK,gBAAgB,cAAc,KAAK,SAAS,aAAa,KAAK;AACnE,SAAG,UAAU,MAAM,KAAK,gBAAgB;AAAA;AAAA;AAAA,EAIpC,QAAQ,OAAqD;AACnE,SAAK,QAAQ,MAAM;AACnB,SAAK,KAAK;AACV,SAAK;AAAA;AAAA,QAGO,eAA8B;AAC1C,QAAI,KAAK,sBAAsB;AAC7B,YAAM,KAAK,qBAAqB,KAAK;AAAA;AAEvC,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS,aAAa,KAAK;AAAA;AAAA;AAAA,EAIpC,uBAAuB,cAA4B,YAAmC;AACpF,WAAO;AAAA;AAAA,EAGD,UAAU,eAAoC;AACpD,QAAI,UAAU;AACd,YAAQ,cAAc;AAAA,WACf,SAAS,kBAAkB;AAC9B,aAAK,QAAQ;AACb;AAAA,WACG,SAAS,kBAAkB;AAC9B,YAAI,cAAc,UAAU;AAC1B,oBAAU,KAAK,KAAK,mBAAmB,MAAM;AAC7C;AAAA;AAEF,kBAAU,KAAK;AACf;AAAA,WACG,SAAS,kBAAkB,SAAS;AACvC,kBAAU,KAAK,KAAK,mBAAmB,MAAM;AAC7C;AAAA,WACG,SAAS,kBAAkB,SAAS;AACvC,kBAAU,KAAK,KAAK,eAAe,MAAM;AACzC;AAAA,WACG,SAAS,kBAAkB,QAAQ;AACtC,kBAAU,KAAK,KAAK,uBAAuB;AAC3C;AAAA,WACG,SAAS,kBAAkB,QAAQ;AACtC,kBAAU,KAAK,KAAK,mBAAmB;AACvC;AAAA;AAEJ,QAAI,SAAS;AACX,oBAAc,QAAQ;AAAA;AAAA;AAAA,EAIlB,iBAAuB;AAC7B,QAAI,KAAK,aAAa;AACpB;AAAA;AAEF,SAAK,cAAc,OAAO,WAAW,KAAK,YAAY,KAAK,OAAO;AAAA;AAAA,EAG5D,WAAW,WAA8B;AAC/C,SAAK,cAAc,KAAK,KAAK;AAC7B,QAAI,KAAK,cAAc,SAAS,KAAK;AACnC,WAAK,cAAc;AAAA;AAErB,QAAI,KAAK,UAAU;AACjB,WAAK,SAAS,WAAW,WAAW,KAAK;AAAA;AAAA;AAAA;AAKxC,WAAW,SAAX,kBAAW,YAAX;AACL,sBAAS;AADO;AAAA;AAQX,sBAAe;AAAA,EACZ;AAAA,EACR,cAAc;AAAA;AAAA,EAGd,mBAAmB,iBAAmC;AACpD,SAAK,kBAAkB;AAAA;AAAA,EAGzB,SAAe;AAAA;AAAA,EAGf,YAAoB;AAClB,WAAO;AAAA;AAAA,EAGT,UAAU,YAA4B;AACpC,WAAO;AAAA;AAAA,EAGT,YAAY,YAAoB,QAAwB;AACtD,WAAO;AAAA;AAAA,EAGT,WAAW,YAAoB,QAAgB,eAAwB,kBAAiC;AAAA;AAAA,EAGxG,kBAA2B;AACzB,WAAO;AAAA;AAAA,EAGT,WAAW,YAAyB,cAA4B;AAAA;AAAA,EAGhE,UAAgB;AACd,QAAI,KAAK,iBAAiB;AACxB,WAAK;AAAA;AAAA;AAAA,EAIT,aAAa,OAAuB;AAClC,WAAO;AAAA;AAAA,EAGT,aAAa,QAAsB;AAAA;AAAA,EAGnC,aAAa,QAAwB;AACnC,WAAO,WAAW,UAAU;AAAA;AAAA,EAG9B,SAAe;AAAA;AAAA;AAIjB,MAAM,sBAA8C;AAE7C,iCAA0B,cAA0C;AACzE,sBAAoB,KAAK;AAAA;AAEpB,yCAA0D;AAC/D,SAAO;AAAA;",
  "names": []
}
