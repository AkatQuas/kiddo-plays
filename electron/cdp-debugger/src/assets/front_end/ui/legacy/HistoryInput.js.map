{
  "version": 3,
  "sources": ["../../../../../../front_end/ui/legacy/HistoryInput.ts"],
  "sourcesContent": ["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport {Keys} from './KeyboardShortcut.js';\nimport * as Utils from './utils/utils.js';\n\n// TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n// eslint-disable-next-line @typescript-eslint/naming-convention\nlet _constructor: (() => Element)|null = null;\n\nexport class HistoryInput extends HTMLInputElement {\n  private history: string[];\n  private historyPosition: number;\n\n  constructor() {\n    super();\n    this.history = [''];\n    this.historyPosition = 0;\n    this.addEventListener('keydown', this.onKeyDown.bind(this), false);\n    this.addEventListener('input', this.onInput.bind(this), false);\n  }\n\n  static create(): HistoryInput {\n    if (!_constructor) {\n      _constructor = Utils.registerCustomElement('input', 'history-input', HistoryInput);\n    }\n\n    return _constructor() as HistoryInput;\n  }\n\n  private onInput(_event: Event): void {\n    if (this.history.length === this.historyPosition + 1) {\n      this.history[this.history.length - 1] = this.value;\n    }\n  }\n\n  private onKeyDown(ev: Event): void {\n    const event = (ev as KeyboardEvent);\n    if (event.keyCode === Keys.Up.code) {\n      this.historyPosition = Math.max(this.historyPosition - 1, 0);\n      this.value = this.history[this.historyPosition];\n      this.dispatchEvent(new Event('input', {'bubbles': true, 'cancelable': true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Down.code) {\n      this.historyPosition = Math.min(this.historyPosition + 1, this.history.length - 1);\n      this.value = this.history[this.historyPosition];\n      this.dispatchEvent(new Event('input', {'bubbles': true, 'cancelable': true}));\n      event.consume(true);\n    } else if (event.keyCode === Keys.Enter.code) {\n      this.saveToHistory();\n    }\n  }\n\n  private saveToHistory(): void {\n    if (this.history.length > 1 && this.history[this.history.length - 2] === this.value) {\n      return;\n    }\n    this.history[this.history.length - 1] = this.value;\n    this.historyPosition = this.history.length - 1;\n    this.history.push('');\n  }\n}\n"],
  "mappings": "AAIA;AACA;AAIA,IAAI,eAAqC;AAElC,kCAA2B,iBAAiB;AAAA,EACzC;AAAA,EACA;AAAA,EAER,cAAc;AACZ;AACA,SAAK,UAAU,CAAC;AAChB,SAAK,kBAAkB;AACvB,SAAK,iBAAiB,WAAW,KAAK,UAAU,KAAK,OAAO;AAC5D,SAAK,iBAAiB,SAAS,KAAK,QAAQ,KAAK,OAAO;AAAA;AAAA,SAGnD,SAAuB;AAC5B,QAAI,CAAC,cAAc;AACjB,qBAAe,MAAM,sBAAsB,SAAS,iBAAiB;AAAA;AAGvE,WAAO;AAAA;AAAA,EAGD,QAAQ,QAAqB;AACnC,QAAI,KAAK,QAAQ,WAAW,KAAK,kBAAkB,GAAG;AACpD,WAAK,QAAQ,KAAK,QAAQ,SAAS,KAAK,KAAK;AAAA;AAAA;AAAA,EAIzC,UAAU,IAAiB;AACjC,UAAM,QAAS;AACf,QAAI,MAAM,YAAY,KAAK,GAAG,MAAM;AAClC,WAAK,kBAAkB,KAAK,IAAI,KAAK,kBAAkB,GAAG;AAC1D,WAAK,QAAQ,KAAK,QAAQ,KAAK;AAC/B,WAAK,cAAc,IAAI,MAAM,SAAS,EAAC,WAAW,MAAM,cAAc;AACtE,YAAM,QAAQ;AAAA,eACL,MAAM,YAAY,KAAK,KAAK,MAAM;AAC3C,WAAK,kBAAkB,KAAK,IAAI,KAAK,kBAAkB,GAAG,KAAK,QAAQ,SAAS;AAChF,WAAK,QAAQ,KAAK,QAAQ,KAAK;AAC/B,WAAK,cAAc,IAAI,MAAM,SAAS,EAAC,WAAW,MAAM,cAAc;AACtE,YAAM,QAAQ;AAAA,eACL,MAAM,YAAY,KAAK,MAAM,MAAM;AAC5C,WAAK;AAAA;AAAA;AAAA,EAID,gBAAsB;AAC5B,QAAI,KAAK,QAAQ,SAAS,KAAK,KAAK,QAAQ,KAAK,QAAQ,SAAS,OAAO,KAAK,OAAO;AACnF;AAAA;AAEF,SAAK,QAAQ,KAAK,QAAQ,SAAS,KAAK,KAAK;AAC7C,SAAK,kBAAkB,KAAK,QAAQ,SAAS;AAC7C,SAAK,QAAQ,KAAK;AAAA;AAAA;",
  "names": []
}
