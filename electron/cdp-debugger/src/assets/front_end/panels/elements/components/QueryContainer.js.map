{
  "version": 3,
  "sources": ["../../../../../../../front_end/panels/elements/components/QueryContainer.ts"],
  "sourcesContent": ["// Copyright (c) 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as SDK from '../../../core/sdk/sdk.js';\nimport * as ComponentHelpers from '../../../ui/components/helpers/helpers.js';\nimport * as IconButton from '../../../ui/components/icon_button/icon_button.js';\nimport * as NodeText from '../../../ui/components/node_text/node_text.js';\nimport * as LitHtml from '../../../ui/lit-html/lit-html.js';\n\nimport type {DOMNode} from './Helper.js';\nimport queryContainerStyles from './queryContainer.css.js';\n\nconst {render, html} = LitHtml;\nconst {PhysicalAxis, QueryAxis} = SDK.CSSContainerQuery;\n\nexport class QueriedSizeRequestedEvent extends Event {\n  static readonly eventName = 'queriedsizerequested';\n  constructor() {\n    super(QueriedSizeRequestedEvent.eventName, {});\n  }\n}\n\nexport interface QueryContainerData {\n  container: DOMNode;\n  queryName?: string;\n  onContainerLinkClick: (event: Event) => void;\n}\n\nexport class QueryContainer extends HTMLElement {\n  static readonly litTagName = LitHtml.literal`devtools-query-container`;\n\n  readonly #shadow = this.attachShadow({mode: 'open'});\n  #queryName?: string;\n  #container?: DOMNode;\n  #onContainerLinkClick?: (event: Event) => void;\n  #isContainerLinkHovered = false;\n  #queriedSizeDetails?: SDK.CSSContainerQuery.ContainerQueriedSizeDetails;\n\n  set data(data: QueryContainerData) {\n    this.#queryName = data.queryName;\n    this.#container = data.container;\n    this.#onContainerLinkClick = data.onContainerLinkClick;\n    this.#render();\n  }\n\n  connectedCallback(): void {\n    this.#shadow.adoptedStyleSheets = [queryContainerStyles];\n  }\n\n  updateContainerQueriedSizeDetails(details: SDK.CSSContainerQuery.ContainerQueriedSizeDetails): void {\n    this.#queriedSizeDetails = details;\n    this.#render();\n  }\n\n  async #onContainerLinkMouseEnter(): Promise<void> {\n    this.#container?.highlightNode('container-outline');\n    this.#isContainerLinkHovered = true;\n    this.dispatchEvent(new QueriedSizeRequestedEvent());\n  }\n\n  #onContainerLinkMouseLeave(): void {\n    this.#container?.clearHighlight();\n    this.#isContainerLinkHovered = false;\n    this.#render();\n  }\n\n  #render(): void {\n    if (!this.#container) {\n      return;\n    }\n\n    let idToDisplay, classesToDisplay;\n    if (!this.#queryName) {\n      idToDisplay = this.#container.getAttribute('id');\n      classesToDisplay = this.#container.getAttribute('class')?.split(/\\s+/).filter(Boolean);\n    }\n\n    const nodeTitle = this.#queryName || this.#container.nodeNameNicelyCased;\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    // eslint-disable-next-line rulesdir/ban_a_tags_in_lit_html\n    render(html`\n      \u2192\n      <a href=\"#\"\n        draggable=false\n        class=\"container-link\"\n        @click=${this.#onContainerLinkClick}\n        @mouseenter=${this.#onContainerLinkMouseEnter}\n        @mouseleave=${this.#onContainerLinkMouseLeave}\n      ><${NodeText.NodeText.NodeText.litTagName}\n          data-node-title=${nodeTitle}\n          .data=${{\n        nodeTitle,\n        nodeId: idToDisplay,\n        nodeClasses: classesToDisplay,\n      } as NodeText.NodeText.NodeTextData}></${NodeText.NodeText.NodeText.litTagName}></a>\n      ${this.#isContainerLinkHovered ? this.#renderQueriedSizeDetails() : LitHtml.nothing}\n    `, this.#shadow, {\n      host: this,\n    });\n    // clang-format on\n  }\n\n  #renderQueriedSizeDetails(): LitHtml.LitTemplate {\n    if (!this.#queriedSizeDetails || this.#queriedSizeDetails.queryAxis === QueryAxis.None) {\n      return LitHtml.nothing;\n    }\n\n    const areBothAxesQueried = this.#queriedSizeDetails.queryAxis === QueryAxis.Both;\n\n    const axisIconClasses = LitHtml.Directives.classMap({\n      'axis-icon': true,\n      'hidden': areBothAxesQueried,\n      'vertical': this.#queriedSizeDetails.physicalAxis === PhysicalAxis.Vertical,\n    });\n\n    // Disabled until https://crbug.com/1079231 is fixed.\n    // clang-format off\n    return html`\n      <span class=\"queried-size-details\">\n        (${this.#queriedSizeDetails.queryAxis}<${IconButton.Icon.Icon.litTagName}\n          class=${axisIconClasses} .data=${{\n            iconName: 'ic_dimension_single',\n            color: 'var(--color-text-primary)',\n          } as IconButton.Icon.IconData}></${IconButton.Icon.Icon.litTagName}>)\n        ${areBothAxesQueried && this.#queriedSizeDetails.width ? 'width:' : LitHtml.nothing}\n        ${this.#queriedSizeDetails.width || LitHtml.nothing}\n        ${areBothAxesQueried && this.#queriedSizeDetails.height ? 'height:' : LitHtml.nothing}\n        ${this.#queriedSizeDetails.height || LitHtml.nothing}\n      </span>\n    `;\n    // clang-format on\n  }\n}\n\nComponentHelpers.CustomElements.defineComponent('devtools-query-container', QueryContainer);\n\ndeclare global {\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  interface HTMLElementTagNameMap {\n    'devtools-query-container': QueryContainer;\n  }\n}\n"],
  "mappings": "AAIA;AACA;AACA;AACA;AACA;AAGA;AAEA,MAAM,EAAC,QAAQ,SAAQ;AACvB,MAAM,EAAC,cAAc,cAAa,IAAI;AAE/B,+CAAwC,MAAM;AAAA,SACnC,YAAY;AAAA,EAC5B,cAAc;AACZ,UAAM,0BAA0B,WAAW;AAAA;AAAA;AAUxC,oCAA6B,YAAY;AAAA,SAC9B,aAAa,QAAQ;AAAA,YAElB,KAAK,aAAa,EAAC,MAAM;AAAA;AAAA;AAAA;AAAA,4BAIlB;AAAA;AAAA,MAGtB,KAAK,MAA0B;AACjC,sBAAkB,KAAK;AACvB,sBAAkB,KAAK;AACvB,iCAA6B,KAAK;AAClC;AAAA;AAAA,EAGF,oBAA0B;AACxB,iBAAa,qBAAqB,CAAC;AAAA;AAAA,EAGrC,kCAAkC,SAAkE;AAClG,+BAA2B;AAC3B;AAAA;AAAA,qCAGgD;AAChD,qBAAiB,cAAc;AAC/B,mCAA+B;AAC/B,SAAK,cAAc,IAAI;AAAA;AAAA,+BAGU;AACjC,qBAAiB;AACjB,mCAA+B;AAC/B;AAAA;AAAA,YAGc;AACd,QAAI,CAAC,iBAAiB;AACpB;AAAA;AAGF,QAAI,aAAa;AACjB,QAAI,CAAC,iBAAiB;AACpB,oBAAc,gBAAgB,aAAa;AAC3C,yBAAmB,gBAAgB,aAAa,UAAU,MAAM,OAAO,OAAO;AAAA;AAGhF,UAAM,YAAY,mBAAmB,gBAAgB;AAKrD,WAAO;AAAA;AAAA;AAAA;AAAA;AAAA,iBAKM;AAAA,sBACK;AAAA,sBACA;AAAA,UACZ,SAAS,SAAS,SAAS;AAAA,4BACT;AAAA,kBACV;AAAA,MACV;AAAA,MACA,QAAQ;AAAA,MACR,aAAa;AAAA,WAC0B,SAAS,SAAS,SAAS;AAAA,QAClE,+BAA+B,mCAAmC,QAAQ;AAAA,OAC3E,cAAc;AAAA,MACf,MAAM;AAAA;AAAA;AAAA,8BAKuC;AAC/C,QAAI,CAAC,4BAA4B,yBAAyB,cAAc,UAAU,MAAM;AACtF,aAAO,QAAQ;AAAA;AAGjB,UAAM,qBAAqB,yBAAyB,cAAc,UAAU;AAE5E,UAAM,kBAAkB,QAAQ,WAAW,SAAS;AAAA,MAClD,aAAa;AAAA,MACb,UAAU;AAAA,MACV,YAAY,yBAAyB,iBAAiB,aAAa;AAAA;AAKrE,WAAO;AAAA;AAAA,WAEA,yBAAyB,aAAa,WAAW,KAAK,KAAK;AAAA,kBACpD,yBAAyB;AAAA,MAC/B,UAAU;AAAA,MACV,OAAO;AAAA,WAC0B,WAAW,KAAK,KAAK;AAAA,UACxD,sBAAsB,yBAAyB,QAAQ,WAAW,QAAQ;AAAA,UAC1E,yBAAyB,SAAS,QAAQ;AAAA,UAC1C,sBAAsB,yBAAyB,SAAS,YAAY,QAAQ;AAAA,UAC5E,yBAAyB,UAAU,QAAQ;AAAA;AAAA;AAAA;AAAA;AAOrD,iBAAiB,eAAe,gBAAgB,4BAA4B;",
  "names": []
}
