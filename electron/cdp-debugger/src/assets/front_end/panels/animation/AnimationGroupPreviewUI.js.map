{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/animation/AnimationGroupPreviewUI.ts"],
  "sourcesContent": ["// Copyright (c) 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as UI from '../../ui/legacy/legacy.js';\nimport type {AnimationGroup} from './AnimationModel.js';\nimport {AnimationUI} from './AnimationUI.js';\n\nexport class AnimationGroupPreviewUI {\n  #model: AnimationGroup;\n  element: HTMLDivElement;\n  readonly #removeButtonInternal: HTMLElement;\n  readonly #replayOverlayElement: HTMLElement;\n  readonly #svg: Element;\n  readonly #viewBoxHeight: number;\n\n  constructor(model: AnimationGroup) {\n    this.#model = model;\n    this.element = document.createElement('div');\n    this.element.classList.add('animation-buffer-preview');\n    this.element.createChild('div', 'animation-paused fill');\n    this.#removeButtonInternal = this.element.createChild('div', 'animation-remove-button');\n    this.#removeButtonInternal.textContent = '\\u2715';\n    this.#replayOverlayElement = this.element.createChild('div', 'animation-buffer-preview-animation');\n    this.#svg = UI.UIUtils.createSVGChild(this.element, 'svg');\n    this.#svg.setAttribute('width', '100%');\n    this.#svg.setAttribute('preserveAspectRatio', 'none');\n    this.#svg.setAttribute('height', '100%');\n    this.#viewBoxHeight = 32;\n    this.#svg.setAttribute('viewBox', '0 0 100 ' + this.#viewBoxHeight);\n    this.#svg.setAttribute('shape-rendering', 'crispEdges');\n    this.render();\n  }\n\n  private groupDuration(): number {\n    let duration = 0;\n    for (const anim of this.#model.animations()) {\n      const animDuration = anim.source().delay() + anim.source().duration();\n      if (animDuration > duration) {\n        duration = animDuration;\n      }\n    }\n    return duration;\n  }\n\n  removeButton(): Element {\n    return this.#removeButtonInternal;\n  }\n\n  replay(): void {\n    this.#replayOverlayElement.animate(\n        [\n          {offset: 0, width: '0%', opacity: 1},\n          {offset: 0.9, width: '100%', opacity: 1},\n          {offset: 1, width: '100%', opacity: 0},\n        ],\n        {duration: 200, easing: 'cubic-bezier(0, 0, 0.2, 1)'});\n  }\n\n  private render(): void {\n    this.#svg.removeChildren();\n    const maxToShow = 10;\n    const numberOfAnimations = Math.min(this.#model.animations().length, maxToShow);\n    const timeToPixelRatio = 100 / Math.max(this.groupDuration(), 750);\n    for (let i = 0; i < numberOfAnimations; i++) {\n      const effect = this.#model.animations()[i].source();\n      const line = UI.UIUtils.createSVGChild(this.#svg, 'line') as SVGLineElement;\n      line.setAttribute('x1', String(effect.delay() * timeToPixelRatio));\n      line.setAttribute('x2', String((effect.delay() + effect.duration()) * timeToPixelRatio));\n      const y = String(Math.floor(this.#viewBoxHeight / Math.max(6, numberOfAnimations) * i + 1));\n      line.setAttribute('y1', y);\n      line.setAttribute('y2', y);\n      line.style.stroke = AnimationUI.colorForAnimation(this.#model.animations()[i]);\n    }\n  }\n}\n"],
  "mappings": "AAIA;AAEA;AAEO,qCAA8B;AAAA;AAAA,EAEnC;AAAA;AAAA;AAAA;AAAA;AAAA,EAMA,YAAY,OAAuB;AACjC,kBAAc;AACd,SAAK,UAAU,SAAS,cAAc;AACtC,SAAK,QAAQ,UAAU,IAAI;AAC3B,SAAK,QAAQ,YAAY,OAAO;AAChC,iCAA6B,KAAK,QAAQ,YAAY,OAAO;AAC7D,+BAA2B,cAAc;AACzC,iCAA6B,KAAK,QAAQ,YAAY,OAAO;AAC7D,gBAAY,GAAG,QAAQ,eAAe,KAAK,SAAS;AACpD,cAAU,aAAa,SAAS;AAChC,cAAU,aAAa,uBAAuB;AAC9C,cAAU,aAAa,UAAU;AACjC,0BAAsB;AACtB,cAAU,aAAa,WAAW,aAAa;AAC/C,cAAU,aAAa,mBAAmB;AAC1C,SAAK;AAAA;AAAA,EAGC,gBAAwB;AAC9B,QAAI,WAAW;AACf,eAAW,QAAQ,YAAY,cAAc;AAC3C,YAAM,eAAe,KAAK,SAAS,UAAU,KAAK,SAAS;AAC3D,UAAI,eAAe,UAAU;AAC3B,mBAAW;AAAA;AAAA;AAGf,WAAO;AAAA;AAAA,EAGT,eAAwB;AACtB,WAAO;AAAA;AAAA,EAGT,SAAe;AACb,+BAA2B,QACvB;AAAA,MACE,EAAC,QAAQ,GAAG,OAAO,MAAM,SAAS;AAAA,MAClC,EAAC,QAAQ,KAAK,OAAO,QAAQ,SAAS;AAAA,MACtC,EAAC,QAAQ,GAAG,OAAO,QAAQ,SAAS;AAAA,OAEtC,EAAC,UAAU,KAAK,QAAQ;AAAA;AAAA,EAGtB,SAAe;AACrB,cAAU;AACV,UAAM,YAAY;AAClB,UAAM,qBAAqB,KAAK,IAAI,YAAY,aAAa,QAAQ;AACrE,UAAM,mBAAmB,MAAM,KAAK,IAAI,KAAK,iBAAiB;AAC9D,aAAS,IAAI,GAAG,IAAI,oBAAoB,KAAK;AAC3C,YAAM,SAAS,YAAY,aAAa,GAAG;AAC3C,YAAM,OAAO,GAAG,QAAQ,eAAe,WAAW;AAClD,WAAK,aAAa,MAAM,OAAO,OAAO,UAAU;AAChD,WAAK,aAAa,MAAM,OAAQ,QAAO,UAAU,OAAO,cAAc;AACtE,YAAM,IAAI,OAAO,KAAK,MAAM,sBAAsB,KAAK,IAAI,GAAG,sBAAsB,IAAI;AACxF,WAAK,aAAa,MAAM;AACxB,WAAK,aAAa,MAAM;AACxB,WAAK,MAAM,SAAS,YAAY,kBAAkB,YAAY,aAAa;AAAA;AAAA;AAAA;",
  "names": []
}
