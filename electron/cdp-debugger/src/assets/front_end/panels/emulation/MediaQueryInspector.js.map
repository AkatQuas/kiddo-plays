{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/emulation/MediaQueryInspector.ts"],
  "sourcesContent": ["// Copyright 2014 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Bindings from '../../models/bindings/bindings.js';\nimport type * as Workspace from '../../models/workspace/workspace.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport mediaQueryInspectorStyles from './mediaQueryInspector.css.legacy.js';\n\nconst UIStrings = {\n  /**\n  * @description A context menu item/command in the Media Query Inspector of the Device Toolbar.\n  * Takes the user to the source code where this media query actually came from.\n  */\n  revealInSourceCode: 'Reveal in source code',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/emulation/MediaQueryInspector.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class MediaQueryInspector extends UI.Widget.Widget implements\n    SDK.TargetManager.SDKModelObserver<SDK.CSSModel.CSSModel> {\n  private readonly mediaThrottler: Common.Throttler.Throttler;\n  private readonly getWidthCallback: () => number;\n  private readonly setWidthCallback: (arg0: number) => void;\n  private scale: number;\n  elementsToMediaQueryModel: WeakMap<Element, MediaQueryUIModel>;\n  elementsToCSSLocations: WeakMap<Element, SDK.CSSModel.CSSLocation[]>;\n  private cssModel?: SDK.CSSModel.CSSModel;\n  private cachedQueryModels?: MediaQueryUIModel[];\n\n  constructor(getWidthCallback: () => number, setWidthCallback: (arg0: number) => void) {\n    super(true);\n    this.registerRequiredCSS(mediaQueryInspectorStyles);\n    this.contentElement.classList.add('media-inspector-view');\n    this.contentElement.addEventListener('click', this.onMediaQueryClicked.bind(this), false);\n    this.contentElement.addEventListener('contextmenu', this.onContextMenu.bind(this), false);\n    this.mediaThrottler = new Common.Throttler.Throttler(0);\n\n    this.getWidthCallback = getWidthCallback;\n    this.setWidthCallback = setWidthCallback;\n    this.scale = 1;\n\n    this.elementsToMediaQueryModel = new WeakMap();\n    this.elementsToCSSLocations = new WeakMap();\n\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.CSSModel.CSSModel, this);\n    UI.ZoomManager.ZoomManager.instance().addEventListener(\n        UI.ZoomManager.Events.ZoomChanged, this.renderMediaQueries.bind(this), this);\n  }\n\n  modelAdded(cssModel: SDK.CSSModel.CSSModel): void {\n    // FIXME: adapt this to multiple targets.\n    if (this.cssModel) {\n      return;\n    }\n    this.cssModel = cssModel;\n    this.cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetAdded, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetRemoved, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.addEventListener(SDK.CSSModel.Events.StyleSheetChanged, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.addEventListener(SDK.CSSModel.Events.MediaQueryResultChanged, this.scheduleMediaQueriesUpdate, this);\n  }\n\n  modelRemoved(cssModel: SDK.CSSModel.CSSModel): void {\n    if (cssModel !== this.cssModel) {\n      return;\n    }\n    this.cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetAdded, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetRemoved, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.removeEventListener(SDK.CSSModel.Events.StyleSheetChanged, this.scheduleMediaQueriesUpdate, this);\n    this.cssModel.removeEventListener(\n        SDK.CSSModel.Events.MediaQueryResultChanged, this.scheduleMediaQueriesUpdate, this);\n    delete this.cssModel;\n  }\n\n  setAxisTransform(scale: number): void {\n    if (Math.abs(this.scale - scale) < 1e-8) {\n      return;\n    }\n    this.scale = scale;\n    this.renderMediaQueries();\n  }\n\n  private onMediaQueryClicked(event: Event): void {\n    const mediaQueryMarker = (event.target as Node).enclosingNodeOrSelfWithClass('media-inspector-bar');\n    if (!mediaQueryMarker) {\n      return;\n    }\n\n    const model = this.elementsToMediaQueryModel.get(mediaQueryMarker);\n    if (!model) {\n      return;\n    }\n    const modelMaxWidth = model.maxWidthExpression();\n    const modelMinWidth = model.minWidthExpression();\n\n    if (model.section() === Section.Max) {\n      this.setWidthCallback(modelMaxWidth ? modelMaxWidth.computedLength() || 0 : 0);\n      return;\n    }\n    if (model.section() === Section.Min) {\n      this.setWidthCallback(modelMinWidth ? modelMinWidth.computedLength() || 0 : 0);\n      return;\n    }\n    const currentWidth = this.getWidthCallback();\n    if (modelMinWidth && currentWidth !== modelMinWidth.computedLength()) {\n      this.setWidthCallback(modelMinWidth.computedLength() || 0);\n    } else {\n      this.setWidthCallback(modelMaxWidth ? modelMaxWidth.computedLength() || 0 : 0);\n    }\n  }\n\n  private onContextMenu(event: Event): void {\n    if (!this.cssModel || !this.cssModel.isEnabled()) {\n      return;\n    }\n\n    const mediaQueryMarker = (event.target as Node).enclosingNodeOrSelfWithClass('media-inspector-bar');\n    if (!mediaQueryMarker) {\n      return;\n    }\n\n    const locations = this.elementsToCSSLocations.get(mediaQueryMarker) || [];\n    const uiLocations = new Map<string, Workspace.UISourceCode.UILocation>();\n    for (let i = 0; i < locations.length; ++i) {\n      const uiLocation =\n          Bindings.CSSWorkspaceBinding.CSSWorkspaceBinding.instance().rawLocationToUILocation(locations[i]);\n      if (!uiLocation) {\n        continue;\n      }\n      const descriptor = typeof uiLocation.columnNumber === 'number' ?\n          Platform.StringUtilities.sprintf(\n              '%s:%d:%d', uiLocation.uiSourceCode.url(), uiLocation.lineNumber + 1, uiLocation.columnNumber + 1) :\n          Platform.StringUtilities.sprintf('%s:%d', uiLocation.uiSourceCode.url(), uiLocation.lineNumber + 1);\n      uiLocations.set(descriptor, uiLocation);\n    }\n\n    const contextMenuItems = [...uiLocations.keys()].sort();\n    const contextMenu = new UI.ContextMenu.ContextMenu(event);\n    const subMenuItem = contextMenu.defaultSection().appendSubMenuItem(i18nString(UIStrings.revealInSourceCode));\n    for (let i = 0; i < contextMenuItems.length; ++i) {\n      const title = contextMenuItems[i];\n      subMenuItem.defaultSection().appendItem(\n          title, this.revealSourceLocation.bind(this, (uiLocations.get(title) as Workspace.UISourceCode.UILocation)));\n    }\n    void contextMenu.show();\n  }\n\n  private revealSourceLocation(location: Workspace.UISourceCode.UILocation): void {\n    void Common.Revealer.reveal(location);\n  }\n\n  private scheduleMediaQueriesUpdate(): void {\n    if (!this.isShowing()) {\n      return;\n    }\n    void this.mediaThrottler.schedule(this.refetchMediaQueries.bind(this));\n  }\n\n  private refetchMediaQueries(): Promise<void> {\n    if (!this.isShowing() || !this.cssModel) {\n      return Promise.resolve();\n    }\n\n    return this.cssModel.getMediaQueries().then(this.rebuildMediaQueries.bind(this));\n  }\n\n  private squashAdjacentEqual(models: MediaQueryUIModel[]): MediaQueryUIModel[] {\n    const filtered = [];\n    for (let i = 0; i < models.length; ++i) {\n      const last = filtered[filtered.length - 1];\n      if (!last || !last.equals(models[i])) {\n        filtered.push(models[i]);\n      }\n    }\n    return filtered;\n  }\n\n  private rebuildMediaQueries(cssMedias: SDK.CSSMedia.CSSMedia[]): void {\n    let queryModels: MediaQueryUIModel[] = [];\n    for (let i = 0; i < cssMedias.length; ++i) {\n      const cssMedia = cssMedias[i];\n      if (!cssMedia.mediaList) {\n        continue;\n      }\n      for (let j = 0; j < cssMedia.mediaList.length; ++j) {\n        const mediaQuery = cssMedia.mediaList[j];\n        const queryModel = MediaQueryUIModel.createFromMediaQuery(cssMedia, mediaQuery);\n        if (queryModel) {\n          queryModels.push(queryModel);\n        }\n      }\n    }\n    queryModels.sort(compareModels);\n    queryModels = this.squashAdjacentEqual(queryModels);\n\n    let allEqual: (boolean|undefined) = this.cachedQueryModels && this.cachedQueryModels.length === queryModels.length;\n    for (let i = 0; allEqual && i < queryModels.length; ++i) {\n      allEqual = allEqual && this.cachedQueryModels && this.cachedQueryModels[i].equals(queryModels[i]);\n    }\n    if (allEqual) {\n      return;\n    }\n    this.cachedQueryModels = queryModels;\n    this.renderMediaQueries();\n\n    function compareModels(model1: MediaQueryUIModel, model2: MediaQueryUIModel): number {\n      return model1.compareTo(model2);\n    }\n  }\n\n  private renderMediaQueries(): void {\n    if (!this.cachedQueryModels || !this.isShowing()) {\n      return;\n    }\n\n    const markers = [];\n    let lastMarker: {\n      active: boolean,\n      model: MediaQueryUIModel,\n      locations: SDK.CSSModel.CSSLocation[],\n    }|null = null;\n    for (let i = 0; i < this.cachedQueryModels.length; ++i) {\n      const model = this.cachedQueryModels[i];\n      if (lastMarker && lastMarker.model.dimensionsEqual(model)) {\n        lastMarker.active = lastMarker.active || model.active();\n      } else {\n        lastMarker = {\n          active: model.active(),\n          model,\n          locations: ([] as SDK.CSSModel.CSSLocation[]),\n        };\n        markers.push(lastMarker);\n      }\n      const rawLocation = model.rawLocation();\n      if (rawLocation) {\n        lastMarker.locations.push(rawLocation);\n      }\n    }\n\n    this.contentElement.removeChildren();\n\n    let container: HTMLElement|null = null;\n    for (let i = 0; i < markers.length; ++i) {\n      if (!i || markers[i].model.section() !== markers[i - 1].model.section()) {\n        container = this.contentElement.createChild('div', 'media-inspector-marker-container');\n      }\n      const marker = markers[i];\n      const bar = this.createElementFromMediaQueryModel(marker.model);\n      this.elementsToMediaQueryModel.set(bar, marker.model);\n      this.elementsToCSSLocations.set(bar, marker.locations);\n      bar.classList.toggle('media-inspector-marker-inactive', !marker.active);\n      if (!container) {\n        throw new Error('Could not find container to render media queries into.');\n      }\n      container.appendChild(bar);\n    }\n  }\n\n  private zoomFactor(): number {\n    return UI.ZoomManager.ZoomManager.instance().zoomFactor() / this.scale;\n  }\n\n  wasShown(): void {\n    super.wasShown();\n    this.scheduleMediaQueriesUpdate();\n  }\n\n  private createElementFromMediaQueryModel(model: MediaQueryUIModel): Element {\n    const zoomFactor = this.zoomFactor();\n    const minWidthExpression = model.minWidthExpression();\n    const maxWidthExpression = model.maxWidthExpression();\n    const minWidthValue = minWidthExpression ? (minWidthExpression.computedLength() || 0) / zoomFactor : 0;\n    const maxWidthValue = maxWidthExpression ? (maxWidthExpression.computedLength() || 0) / zoomFactor : 0;\n    const result = document.createElement('div');\n    result.classList.add('media-inspector-bar');\n\n    if (model.section() === Section.Max) {\n      result.createChild('div', 'media-inspector-marker-spacer');\n      const markerElement = result.createChild('div', 'media-inspector-marker media-inspector-marker-max-width');\n      markerElement.style.width = maxWidthValue + 'px';\n      UI.Tooltip.Tooltip.install(markerElement, model.mediaText());\n      appendLabel(markerElement, model.maxWidthExpression(), false, false);\n      appendLabel(markerElement, model.maxWidthExpression(), true, true);\n      result.createChild('div', 'media-inspector-marker-spacer');\n    }\n\n    if (model.section() === Section.MinMax) {\n      result.createChild('div', 'media-inspector-marker-spacer');\n      const leftElement = result.createChild('div', 'media-inspector-marker media-inspector-marker-min-max-width');\n      leftElement.style.width = (maxWidthValue - minWidthValue) * 0.5 + 'px';\n      UI.Tooltip.Tooltip.install(leftElement, model.mediaText());\n      appendLabel(leftElement, model.maxWidthExpression(), true, false);\n      appendLabel(leftElement, model.minWidthExpression(), false, true);\n      result.createChild('div', 'media-inspector-marker-spacer').style.flex = '0 0 ' + minWidthValue + 'px';\n      const rightElement = result.createChild('div', 'media-inspector-marker media-inspector-marker-min-max-width');\n      rightElement.style.width = (maxWidthValue - minWidthValue) * 0.5 + 'px';\n      UI.Tooltip.Tooltip.install(rightElement, model.mediaText());\n      appendLabel(rightElement, model.minWidthExpression(), true, false);\n      appendLabel(rightElement, model.maxWidthExpression(), false, true);\n      result.createChild('div', 'media-inspector-marker-spacer');\n    }\n\n    if (model.section() === Section.Min) {\n      const leftElement = result.createChild(\n          'div', 'media-inspector-marker media-inspector-marker-min-width media-inspector-marker-min-width-left');\n      UI.Tooltip.Tooltip.install(leftElement, model.mediaText());\n      appendLabel(leftElement, model.minWidthExpression(), false, false);\n      result.createChild('div', 'media-inspector-marker-spacer').style.flex = '0 0 ' + minWidthValue + 'px';\n      const rightElement = result.createChild(\n          'div', 'media-inspector-marker media-inspector-marker-min-width media-inspector-marker-min-width-right');\n      UI.Tooltip.Tooltip.install(rightElement, model.mediaText());\n      appendLabel(rightElement, model.minWidthExpression(), true, true);\n    }\n\n    function appendLabel(\n        marker: Element, expression: SDK.CSSMedia.CSSMediaQueryExpression|null, atLeft: boolean,\n        leftAlign: boolean): void {\n      if (!expression) {\n        return;\n      }\n      marker\n          .createChild(\n              'div',\n              'media-inspector-marker-label-container ' +\n                  (atLeft ? 'media-inspector-marker-label-container-left' :\n                            'media-inspector-marker-label-container-right'))\n          .createChild(\n              'span',\n              'media-inspector-marker-label ' +\n                  (leftAlign ? 'media-inspector-label-left' : 'media-inspector-label-right'))\n          .textContent = expression.value() + expression.unit();\n    }\n\n    return result;\n  }\n}\n\nexport const enum Section {\n  Max = 0,\n  MinMax = 1,\n  Min = 2,\n}\n\nexport class MediaQueryUIModel {\n  private cssMedia: SDK.CSSMedia.CSSMedia;\n  private readonly minWidthExpressionInternal: SDK.CSSMedia.CSSMediaQueryExpression|null;\n  private readonly maxWidthExpressionInternal: SDK.CSSMedia.CSSMediaQueryExpression|null;\n  private readonly activeInternal: boolean;\n  private readonly sectionInternal: Section;\n  private rawLocationInternal?: SDK.CSSModel.CSSLocation|null;\n  constructor(\n      cssMedia: SDK.CSSMedia.CSSMedia, minWidthExpression: SDK.CSSMedia.CSSMediaQueryExpression|null,\n      maxWidthExpression: SDK.CSSMedia.CSSMediaQueryExpression|null, active: boolean) {\n    this.cssMedia = cssMedia;\n    this.minWidthExpressionInternal = minWidthExpression;\n    this.maxWidthExpressionInternal = maxWidthExpression;\n    this.activeInternal = active;\n    if (maxWidthExpression && !minWidthExpression) {\n      this.sectionInternal = Section.Max;\n    } else if (minWidthExpression && maxWidthExpression) {\n      this.sectionInternal = Section.MinMax;\n    } else {\n      this.sectionInternal = Section.Min;\n    }\n  }\n\n  static createFromMediaQuery(cssMedia: SDK.CSSMedia.CSSMedia, mediaQuery: SDK.CSSMedia.CSSMediaQuery):\n      MediaQueryUIModel|null {\n    let maxWidthExpression: SDK.CSSMedia.CSSMediaQueryExpression|null = null;\n    let maxWidthPixels: number = Number.MAX_VALUE;\n    let minWidthExpression: SDK.CSSMedia.CSSMediaQueryExpression|null = null;\n    let minWidthPixels: number = Number.MIN_VALUE;\n    const expressions = mediaQuery.expressions();\n    if (!expressions) {\n      return null;\n    }\n\n    for (let i = 0; i < expressions.length; ++i) {\n      const expression = expressions[i];\n      const feature = expression.feature();\n      if (feature.indexOf('width') === -1) {\n        continue;\n      }\n      const pixels = expression.computedLength();\n      if (feature.startsWith('max-') && pixels && pixels < maxWidthPixels) {\n        maxWidthExpression = expression;\n        maxWidthPixels = pixels;\n      } else if (feature.startsWith('min-') && pixels && pixels > minWidthPixels) {\n        minWidthExpression = expression;\n        minWidthPixels = pixels;\n      }\n    }\n    if (minWidthPixels > maxWidthPixels || (!maxWidthExpression && !minWidthExpression)) {\n      return null;\n    }\n\n    return new MediaQueryUIModel(cssMedia, minWidthExpression, maxWidthExpression, mediaQuery.active());\n  }\n\n  equals(other: MediaQueryUIModel): boolean {\n    return this.compareTo(other) === 0;\n  }\n\n  dimensionsEqual(other: MediaQueryUIModel): boolean {\n    const thisMinWidthExpression = this.minWidthExpression();\n    const otherMinWidthExpression = other.minWidthExpression();\n    const thisMaxWidthExpression = this.maxWidthExpression();\n    const otherMaxWidthExpression = other.maxWidthExpression();\n\n    const sectionsEqual = this.section() === other.section();\n    // If there isn't an other min width expression, they aren't equal, so the optional chaining operator is safe to use here.\n    const minWidthEqual = !thisMinWidthExpression ||\n        thisMinWidthExpression.computedLength() === otherMinWidthExpression?.computedLength();\n    const maxWidthEqual = !thisMaxWidthExpression ||\n        thisMaxWidthExpression.computedLength() === otherMaxWidthExpression?.computedLength();\n\n    return sectionsEqual && minWidthEqual && maxWidthEqual;\n  }\n\n  compareTo(other: MediaQueryUIModel): number {\n    if (this.section() !== other.section()) {\n      return this.section() - other.section();\n    }\n    if (this.dimensionsEqual(other)) {\n      const myLocation = this.rawLocation();\n      const otherLocation = other.rawLocation();\n      if (!myLocation && !otherLocation) {\n        return Platform.StringUtilities.compare(this.mediaText(), other.mediaText());\n      }\n      if (myLocation && !otherLocation) {\n        return 1;\n      }\n      if (!myLocation && otherLocation) {\n        return -1;\n      }\n      if (this.active() !== other.active()) {\n        return this.active() ? -1 : 1;\n      }\n\n      if (!myLocation || !otherLocation) {\n        // This conditional never runs, because it's dealt with above, but\n        // TypeScript can't follow that by this point both myLocation and\n        // otherLocation must exist.\n        return 0;\n      }\n\n      return Platform.StringUtilities.compare(myLocation.url, otherLocation.url) ||\n          myLocation.lineNumber - otherLocation.lineNumber || myLocation.columnNumber - otherLocation.columnNumber;\n    }\n\n    const thisMaxWidthExpression = this.maxWidthExpression();\n    const otherMaxWidthExpression = other.maxWidthExpression();\n    const thisMaxLength = thisMaxWidthExpression ? thisMaxWidthExpression.computedLength() || 0 : 0;\n    const otherMaxLength = otherMaxWidthExpression ? otherMaxWidthExpression.computedLength() || 0 : 0;\n\n    const thisMinWidthExpression = this.minWidthExpression();\n    const otherMinWidthExpression = other.minWidthExpression();\n    const thisMinLength = thisMinWidthExpression ? thisMinWidthExpression.computedLength() || 0 : 0;\n    const otherMinLength = otherMinWidthExpression ? otherMinWidthExpression.computedLength() || 0 : 0;\n\n    if (this.section() === Section.Max) {\n      return otherMaxLength - thisMaxLength;\n    }\n    if (this.section() === Section.Min) {\n      return thisMinLength - otherMinLength;\n    }\n    return thisMinLength - otherMinLength || otherMaxLength - thisMaxLength;\n  }\n\n  section(): Section {\n    return this.sectionInternal;\n  }\n\n  mediaText(): string {\n    return this.cssMedia.text || '';\n  }\n\n  rawLocation(): SDK.CSSModel.CSSLocation|null {\n    if (!this.rawLocationInternal) {\n      this.rawLocationInternal = this.cssMedia.rawLocation();\n    }\n    return this.rawLocationInternal;\n  }\n\n  minWidthExpression(): SDK.CSSMedia.CSSMediaQueryExpression|null {\n    return this.minWidthExpressionInternal;\n  }\n\n  maxWidthExpression(): SDK.CSSMedia.CSSMediaQueryExpression|null {\n    return this.maxWidthExpressionInternal;\n  }\n\n  active(): boolean {\n    return this.activeInternal;\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
