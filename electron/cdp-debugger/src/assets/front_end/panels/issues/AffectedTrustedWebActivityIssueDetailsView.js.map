{
  "version": 3,
  "sources": ["../../../../../../front_end/panels/issues/AffectedTrustedWebActivityIssueDetailsView.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as IssuesManager from '../../models/issues_manager/issues_manager.js';\n\nimport {AffectedResourcesView} from './AffectedResourcesView.js';\n\nconst UIStrings = {\n  /**\n  *@description Label for number of affected resources indication in issue view\n  */\n  nResources: '{n, plural, =1 {# resource} other {# resources}}',\n  /**\n  *@description Title for a column in a Trusted Web Activity issue view\n  */\n  statusCode: 'Status code',\n  /**\n  *@description Text in Timeline UIUtils of the Performance panel\n  */\n  url: 'Url',\n  /**\n  *@description Title for a column in a Trusted Web Activity issue view\n  */\n  packageName: 'Package name',\n  /**\n  *@description Title for a column in a Trusted Web Activity issue view\n  */\n  packageSignature: 'Package signature',\n};\nconst str_ = i18n.i18n.registerUIStrings('panels/issues/AffectedTrustedWebActivityIssueDetailsView.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class AffectedTrustedWebActivityIssueDetailsView extends AffectedResourcesView {\n  protected getResourceNameWithCount(count: number): Platform.UIString.LocalizedString {\n    return i18nString(UIStrings.nResources, {n: count});\n  }\n\n  #appendDetail(twaIssue: IssuesManager.TrustedWebActivityIssue.TrustedWebActivityIssue): void {\n    const element = document.createElement('tr');\n    element.classList.add('affected-resource-row');\n\n    const details = twaIssue.details();\n    if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.httpViolationCode && details.httpStatusCode) {\n      this.appendIssueDetailCell(element, details.httpStatusCode.toString());\n      this.appendIssueDetailCell(element, details.url);\n    } else if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.offlineViolationCode) {\n      this.appendIssueDetailCell(element, details.url);\n    } else if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.assetlinkViolationCode) {\n      this.appendIssueDetailCell(element, details.packageName || '');\n      this.appendIssueDetailCell(element, details.url);\n      this.appendIssueDetailCell(element, details.signature || '');\n    }\n\n    this.affectedResources.appendChild(element);\n  }\n\n  #appendDetails(twaIssues: Iterable<IssuesManager.TrustedWebActivityIssue.TrustedWebActivityIssue>): void {\n    const header = document.createElement('tr');\n    if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.httpViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.statusCode));\n      this.appendColumnTitle(header, i18nString(UIStrings.url));\n    } else if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.offlineViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.url));\n    } else if (this.issue.code() === IssuesManager.TrustedWebActivityIssue.assetlinkViolationCode) {\n      this.appendColumnTitle(header, i18nString(UIStrings.packageName));\n      this.appendColumnTitle(header, i18nString(UIStrings.url));\n      this.appendColumnTitle(header, i18nString(UIStrings.packageSignature));\n    }\n    this.affectedResources.appendChild(header);\n\n    let count = 0;\n    for (const twaIssue of twaIssues) {\n      this.#appendDetail(twaIssue);\n      count++;\n    }\n    this.updateAffectedResourceCount(count);\n  }\n\n  update(): void {\n    this.clear();\n    this.#appendDetails(this.issue.getTrustedWebActivityIssues());\n  }\n}\n"],
  "mappings": "AAIA;AAEA;AAEA;AAEA,MAAM,YAAY;AAAA,EAIhB,YAAY;AAAA,EAIZ,YAAY;AAAA,EAIZ,KAAK;AAAA,EAIL,aAAa;AAAA,EAIb,kBAAkB;AAAA;AAEpB,MAAM,OAAO,KAAK,KAAK,kBAAkB,+DAA+D;AACxG,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AACzD,gEAAyD,sBAAsB;AAAA,EAC1E,yBAAyB,OAAkD;AACnF,WAAO,WAAW,UAAU,YAAY,EAAC,GAAG;AAAA;AAAA,gBAGhC,UAA+E;AAC3F,UAAM,UAAU,SAAS,cAAc;AACvC,YAAQ,UAAU,IAAI;AAEtB,UAAM,UAAU,SAAS;AACzB,QAAI,KAAK,MAAM,WAAW,cAAc,wBAAwB,qBAAqB,QAAQ,gBAAgB;AAC3G,WAAK,sBAAsB,SAAS,QAAQ,eAAe;AAC3D,WAAK,sBAAsB,SAAS,QAAQ;AAAA,eACnC,KAAK,MAAM,WAAW,cAAc,wBAAwB,sBAAsB;AAC3F,WAAK,sBAAsB,SAAS,QAAQ;AAAA,eACnC,KAAK,MAAM,WAAW,cAAc,wBAAwB,wBAAwB;AAC7F,WAAK,sBAAsB,SAAS,QAAQ,eAAe;AAC3D,WAAK,sBAAsB,SAAS,QAAQ;AAC5C,WAAK,sBAAsB,SAAS,QAAQ,aAAa;AAAA;AAG3D,SAAK,kBAAkB,YAAY;AAAA;AAAA,iBAGtB,WAA0F;AACvG,UAAM,SAAS,SAAS,cAAc;AACtC,QAAI,KAAK,MAAM,WAAW,cAAc,wBAAwB,mBAAmB;AACjF,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AACpD,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AAAA,eAC3C,KAAK,MAAM,WAAW,cAAc,wBAAwB,sBAAsB;AAC3F,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AAAA,eAC3C,KAAK,MAAM,WAAW,cAAc,wBAAwB,wBAAwB;AAC7F,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AACpD,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AACpD,WAAK,kBAAkB,QAAQ,WAAW,UAAU;AAAA;AAEtD,SAAK,kBAAkB,YAAY;AAEnC,QAAI,QAAQ;AACZ,eAAW,YAAY,WAAW;AAChC,yBAAmB;AACnB;AAAA;AAEF,SAAK,4BAA4B;AAAA;AAAA,EAGnC,SAAe;AACb,SAAK;AACL,wBAAoB,KAAK,MAAM;AAAA;AAAA;",
  "names": []
}
