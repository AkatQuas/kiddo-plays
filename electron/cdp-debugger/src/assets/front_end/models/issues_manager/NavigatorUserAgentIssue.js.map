{
  "version": 3,
  "sources": ["../../../../../../front_end/models/issues_manager/NavigatorUserAgentIssue.ts"],
  "sourcesContent": ["// Copyright 2021 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport type * as Protocol from '../../generated/protocol.js';\n\nimport {Issue, IssueCategory, IssueKind} from './Issue.js';\nimport type {MarkdownIssueDescription} from './MarkdownIssueDescription.js';\nimport {isCausedByThirdParty} from './CookieIssue.js';\n\nconst UIStrings = {\n  /**\n   * @description Label for the link for User-Agent String reduction issues, that is, issues that are related to an\n   * upcoming reduction of information content in the user-agent string.\n   */\n  userAgentReduction: 'User-Agent String Reduction',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/issues_manager/NavigatorUserAgentIssue.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum IssueCode {\n  NavigatorUserAgentIssue = 'DeprecationIssue::NavigatorUserAgentIssue',\n}\n\nexport class NavigatorUserAgentIssue extends Issue<IssueCode> {\n  #issueDetails: Protocol.Audits.NavigatorUserAgentIssueDetails;\n\n  constructor(issueDetails: Protocol.Audits.NavigatorUserAgentIssueDetails, issuesModel: SDK.IssuesModel.IssuesModel) {\n    super(IssueCode.NavigatorUserAgentIssue, issuesModel);\n    this.#issueDetails = issueDetails;\n  }\n\n  getCategory(): IssueCategory {\n    return IssueCategory.Other;\n  }\n\n  details(): Protocol.Audits.NavigatorUserAgentIssueDetails {\n    return this.#issueDetails;\n  }\n\n  getDescription(): MarkdownIssueDescription|null {\n    return {\n      file: 'deprecationNavigatorUserAgent.md',\n      links: [{\n        link: 'https://blog.chromium.org/2021/09/user-agent-reduction-origin-trial-and-dates.html',\n        linkTitle: i18nString(UIStrings.userAgentReduction),\n      }],\n    };\n  }\n\n  sources(): Iterable<Protocol.Audits.SourceCodeLocation> {\n    if (this.#issueDetails.location) {\n      return [this.#issueDetails.location];\n    }\n    return [];\n  }\n\n  primaryKey(): string {\n    return JSON.stringify(this.#issueDetails);\n  }\n\n  getKind(): IssueKind {\n    return IssueKind.Improvement;\n  }\n\n  isCausedByThirdParty(): boolean {\n    const topFrame = SDK.FrameManager.FrameManager.instance().getTopFrame();\n    return isCausedByThirdParty(topFrame, this.#issueDetails.url);\n  }\n\n  static fromInspectorIssue(issuesModel: SDK.IssuesModel.IssuesModel, inspectorIssue: Protocol.Audits.InspectorIssue):\n      NavigatorUserAgentIssue[] {\n    const details = inspectorIssue.details.navigatorUserAgentIssueDetails;\n    if (!details) {\n      console.warn('NavigatorUserAgent issue without details received.');\n      return [];\n    }\n    return [new NavigatorUserAgentIssue(details, issuesModel)];\n  }\n}\n"],
  "mappings": "AAIA;AACA;AAGA;AAEA;AAEA,MAAM,YAAY;AAAA,EAKhB,oBAAoB;AAAA;AAEtB,MAAM,OAAO,KAAK,KAAK,kBAAkB,oDAAoD;AAC7F,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AAIzD,WAAK,YAAL,kBAAK,eAAL;AACL,0CAA0B;AADhB;AAAA;AAIL,6CAAsC,MAAiB;AAAA;AAAA,EAG5D,YAAY,cAA8D,aAA0C;AAClH,UAAM,2EAAmC;AACzC,yBAAqB;AAAA;AAAA,EAGvB,cAA6B;AAC3B,WAAO,cAAc;AAAA;AAAA,EAGvB,UAA0D;AACxD,WAAO;AAAA;AAAA,EAGT,iBAAgD;AAC9C,WAAO;AAAA,MACL,MAAM;AAAA,MACN,OAAO,CAAC;AAAA,QACN,MAAM;AAAA,QACN,WAAW,WAAW,UAAU;AAAA;AAAA;AAAA;AAAA,EAKtC,UAAwD;AACtD,QAAI,mBAAmB,UAAU;AAC/B,aAAO,CAAC,mBAAmB;AAAA;AAE7B,WAAO;AAAA;AAAA,EAGT,aAAqB;AACnB,WAAO,KAAK,UAAU;AAAA;AAAA,EAGxB,UAAqB;AACnB,WAAO,UAAU;AAAA;AAAA,EAGnB,uBAAgC;AAC9B,UAAM,WAAW,IAAI,aAAa,aAAa,WAAW;AAC1D,WAAO,qBAAqB,UAAU,mBAAmB;AAAA;AAAA,SAGpD,mBAAmB,aAA0C,gBACtC;AAC5B,UAAM,UAAU,eAAe,QAAQ;AACvC,QAAI,CAAC,SAAS;AACZ,cAAQ,KAAK;AACb,aAAO;AAAA;AAET,WAAO,CAAC,IAAI,wBAAwB,SAAS;AAAA;AAAA;",
  "names": []
}
