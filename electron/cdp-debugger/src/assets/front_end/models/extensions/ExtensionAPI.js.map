{
  "version": 3,
  "sources": ["../../../../../../front_end/models/extensions/ExtensionAPI.ts"],
  "sourcesContent": ["/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as Platform from '../../core/platform/platform.js';\nimport type * as PublicAPI from '../../../extension-api/ExtensionAPI'; // eslint-disable-line rulesdir/es_modules_import\nimport type * as HAR from '../har/har.js';\n\n/* eslint-disable @typescript-eslint/naming-convention,@typescript-eslint/no-non-null-assertion */\nexport namespace PrivateAPI {\n  export namespace Panels {\n    export const enum SearchAction {\n      CancelSearch = 'cancelSearch',\n      PerformSearch = 'performSearch',\n      NextSearchResult = 'nextSearchResult',\n      PreviousSearchResult = 'previousSearchResult',\n    }\n  }\n\n  export const enum Events {\n    ButtonClicked = 'button-clicked-',\n    PanelObjectSelected = 'panel-objectSelected-',\n    InspectedURLChanged = 'inspected-url-changed',\n    NetworkRequestFinished = 'network-request-finished',\n    OpenResource = 'open-resource',\n    PanelSearch = 'panel-search-',\n    RecordingStarted = 'trace-recording-started-',\n    RecordingStopped = 'trace-recording-stopped-',\n    ResourceAdded = 'resource-added',\n    ResourceContentCommitted = 'resource-content-committed',\n    ViewShown = 'view-shown-',\n    ViewHidden = 'view-hidden,',\n    ThemeChange = 'host-theme-change',\n  }\n\n  export const enum Commands {\n    AddRequestHeaders = 'addRequestHeaders',\n    AddTraceProvider = 'addTraceProvider',\n    ApplyStyleSheet = 'applyStyleSheet',\n    CompleteTraceSession = 'completeTra.eSession',\n    CreatePanel = 'createPanel',\n    CreateSidebarPane = 'createSidebarPane',\n    CreateToolbarButton = 'createToolbarButton',\n    EvaluateOnInspectedPage = 'evaluateOnInspectedPage',\n    ForwardKeyboardEvent = '_forwardKeyboardEvent',\n    GetHAR = 'getHAR',\n    GetPageResources = 'getPageResources',\n    GetRequestContent = 'getRequestContent',\n    GetResourceContent = 'getResourceContent',\n    OpenResource = 'openResource',\n    Reload = 'Reload',\n    Subscribe = 'subscribe',\n    SetOpenResourceHandler = 'setOpenResourceHandler',\n    SetThemeChangeHandler = 'setThemeChangeHandler',\n    SetResourceContent = 'setResourceContent',\n    SetSidebarContent = 'setSidebarContent',\n    SetSidebarHeight = 'setSidebarHeight',\n    SetSidebarPage = 'setSidebarPage',\n    ShowPanel = 'showPanel',\n    Unsubscribe = 'unsubscribe',\n    UpdateButton = 'updateButton',\n    RegisterLanguageExtensionPlugin = 'registerLanguageExtensionPlugin',\n    RegisterRecorderExtensionPlugin = 'registerRecorderExtensionPlugin',\n  }\n\n  export const enum LanguageExtensionPluginCommands {\n    AddRawModule = 'addRawModule',\n    RemoveRawModule = 'removeRawModule',\n    SourceLocationToRawLocation = 'sourceLocationToRawLocation',\n    RawLocationToSourceLocation = 'rawLocationToSourceLocation',\n    GetScopeInfo = 'getScopeInfo',\n    ListVariablesInScope = 'listVariablesInScope',\n    GetTypeInfo = 'getTypeInfo',\n    GetFormatter = 'getFormatter',\n    GetInspectableAddress = 'getInspectableAddress',\n    GetFunctionInfo = 'getFunctionInfo',\n    GetInlinedFunctionRanges = 'getInlinedFunctionRanges',\n    GetInlinedCalleesRanges = 'getInlinedCalleesRanges',\n    GetMappedLines = 'getMappedLines',\n  }\n\n  export const enum LanguageExtensionPluginEvents {\n    UnregisteredLanguageExtensionPlugin = 'unregisteredLanguageExtensionPlugin',\n  }\n\n  export const enum RecorderExtensionPluginCommands {\n    Stringify = 'stringify',\n    StringifyStep = 'stringifyStep',\n  }\n\n  export const enum RecorderExtensionPluginEvents {\n    UnregisteredRecorderExtensionPlugin = 'unregisteredRecorderExtensionPlugin',\n  }\n\n  export interface EvaluateOptions {\n    frameURL?: string;\n    useContentScriptContext?: boolean;\n    scriptExecutionContext?: string;\n  }\n\n  type RegisterLanguageExtensionPluginRequest = {\n    command: Commands.RegisterLanguageExtensionPlugin,\n    pluginName: string,\n    port: MessagePort,\n    supportedScriptTypes: PublicAPI.Chrome.DevTools.SupportedScriptTypes,\n  };\n  type RegisterRecorderExtensionPluginRequest = {\n    command: Commands.RegisterRecorderExtensionPlugin,\n    pluginName: string,\n    mediaType: string,\n    port: MessagePort,\n  };\n  type SubscribeRequest = {command: Commands.Subscribe, type: string};\n  type UnsubscribeRequest = {command: Commands.Unsubscribe, type: string};\n  type AddRequestHeadersRequest = {\n    command: Commands.AddRequestHeaders,\n    extensionId: string,\n    headers: {[key: string]: string},\n  };\n  type ApplyStyleSheetRequest = {command: Commands.ApplyStyleSheet, styleSheet: string};\n  type CreatePanelRequest = {command: Commands.CreatePanel, id: string, title: string, page: string};\n  type ShowPanelRequest = {command: Commands.ShowPanel, id: string};\n  type CreateToolbarButtonRequest = {\n    command: Commands.CreateToolbarButton,\n    id: string,\n    icon: string,\n    panel: string,\n    tooltip?: string,\n    disabled?: boolean,\n  };\n  type UpdateButtonRequest =\n      {command: Commands.UpdateButton, id: string, icon?: string, tooltip?: string, disabled?: boolean};\n  type CompleteTraceSessionRequest =\n      {command: Commands.CompleteTraceSession, id: string, url: Platform.DevToolsPath.UrlString, timeOffset: number};\n  type CreateSidebarPaneRequest = {command: Commands.CreateSidebarPane, id: string, panel: string, title: string};\n  type SetSidebarHeightRequest = {command: Commands.SetSidebarHeight, id: string, height: string};\n  type SetSidebarContentRequest = {\n    command: Commands.SetSidebarContent,\n    id: string,\n    evaluateOnPage?: boolean, expression: string,\n    rootTitle?: string,\n    evaluateOptions?: EvaluateOptions,\n  };\n  type SetSidebarPageRequest = {command: Commands.SetSidebarPage, id: string, page: string};\n  type OpenResourceRequest =\n      {command: Commands.OpenResource, url: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber: number};\n  type SetOpenResourceHandlerRequest = {command: Commands.SetOpenResourceHandler, handlerPresent: boolean};\n  type SetThemeChangeHandlerRequest = {command: Commands.SetThemeChangeHandler, handlerPresent: boolean};\n  type ReloadRequest = {\n    command: Commands.Reload,\n    options: null|{\n      userAgent?: string,\n      injectedScript?: string,\n      ignoreCache?: boolean,\n    },\n  };\n  type EvaluateOnInspectedPageRequest = {\n    command: Commands.EvaluateOnInspectedPage,\n    expression: string,\n    evaluateOptions?: EvaluateOptions,\n  };\n  type GetRequestContentRequest = {command: Commands.GetRequestContent, id: number};\n  type GetResourceContentRequest = {command: Commands.GetResourceContent, url: string};\n  type SetResourceContentRequest =\n      {command: Commands.SetResourceContent, url: string, content: string, commit: boolean};\n  type AddTraceProviderRequest =\n      {command: Commands.AddTraceProvider, id: string, categoryName: string, categoryTooltip: string};\n  type ForwardKeyboardEventRequest = {\n    command: Commands.ForwardKeyboardEvent,\n    entries: Array<KeyboardEventInit&{eventType: string}>,\n  };\n  type GetHARRequest = {command: Commands.GetHAR};\n  type GetPageResourcesRequest = {command: Commands.GetPageResources};\n\n  export type ServerRequests = RegisterRecorderExtensionPluginRequest|RegisterLanguageExtensionPluginRequest|\n      SubscribeRequest|UnsubscribeRequest|AddRequestHeadersRequest|ApplyStyleSheetRequest|CreatePanelRequest|\n      ShowPanelRequest|CreateToolbarButtonRequest|UpdateButtonRequest|CompleteTraceSessionRequest|\n      CreateSidebarPaneRequest|SetSidebarHeightRequest|SetSidebarContentRequest|SetSidebarPageRequest|\n      OpenResourceRequest|SetOpenResourceHandlerRequest|SetThemeChangeHandlerRequest|ReloadRequest|\n      EvaluateOnInspectedPageRequest|GetRequestContentRequest|GetResourceContentRequest|SetResourceContentRequest|\n      AddTraceProviderRequest|ForwardKeyboardEventRequest|GetHARRequest|GetPageResourcesRequest;\n  export type ExtensionServerRequestMessage = PrivateAPI.ServerRequests&{requestId?: number};\n\n  type AddRawModuleRequest = {\n    method: LanguageExtensionPluginCommands.AddRawModule,\n    parameters: {rawModuleId: string, symbolsURL: string|undefined, rawModule: PublicAPI.Chrome.DevTools.RawModule},\n  };\n  type SourceLocationToRawLocationRequest = {\n    method: LanguageExtensionPluginCommands.SourceLocationToRawLocation,\n    parameters: {sourceLocation: PublicAPI.Chrome.DevTools.SourceLocation},\n  };\n  type RawLocationToSourceLocationRequest = {\n    method: LanguageExtensionPluginCommands.RawLocationToSourceLocation,\n    parameters: {rawLocation: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type GetScopeInfoRequest = {method: LanguageExtensionPluginCommands.GetScopeInfo, parameters: {type: string}};\n  type ListVariablesInScopeRequest = {\n    method: LanguageExtensionPluginCommands.ListVariablesInScope,\n    parameters: {rawLocation: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type RemoveRawModuleRequest = {\n    method: LanguageExtensionPluginCommands.RemoveRawModule,\n    parameters: {rawModuleId: string},\n  };\n  type GetTypeInfoRequest = {\n    method: LanguageExtensionPluginCommands.GetTypeInfo,\n    parameters: {expression: string, context: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type GetFormatterRequest = {\n    method: LanguageExtensionPluginCommands.GetFormatter,\n    parameters: {\n      expressionOrField: string|{\n        base: PublicAPI.Chrome.DevTools.EvalBase,\n        field: Array<PublicAPI.Chrome.DevTools.FieldInfo>,\n      },\n      context: PublicAPI.Chrome.DevTools.RawLocation,\n    },\n  };\n  type GetInspectableAddressRequest = {\n    method: LanguageExtensionPluginCommands.GetInspectableAddress,\n    parameters: {\n      field: {\n        base: PublicAPI.Chrome.DevTools.EvalBase,\n        field: Array<PublicAPI.Chrome.DevTools.FieldInfo>,\n      },\n    },\n  };\n  type GetFunctionInfoRequest = {\n    method: LanguageExtensionPluginCommands.GetFunctionInfo,\n    parameters: {rawLocation: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type GetInlinedFunctionRangesRequest = {\n    method: LanguageExtensionPluginCommands.GetInlinedFunctionRanges,\n    parameters: {rawLocation: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type GetInlinedCalleesRangesRequest = {\n    method: LanguageExtensionPluginCommands.GetInlinedCalleesRanges,\n    parameters: {rawLocation: PublicAPI.Chrome.DevTools.RawLocation},\n  };\n  type GetMappedLinesRequest = {\n    method: LanguageExtensionPluginCommands.GetMappedLines,\n    parameters: {rawModuleId: string, sourceFileURL: string},\n  };\n\n  export type LanguageExtensionRequests = AddRawModuleRequest|SourceLocationToRawLocationRequest|\n      RawLocationToSourceLocationRequest|GetScopeInfoRequest|ListVariablesInScopeRequest|RemoveRawModuleRequest|\n      GetTypeInfoRequest|GetFormatterRequest|GetInspectableAddressRequest|GetFunctionInfoRequest|\n      GetInlinedFunctionRangesRequest|GetInlinedCalleesRangesRequest|GetMappedLinesRequest;\n\n  type StringifyRequest = {\n    method: RecorderExtensionPluginCommands.Stringify,\n    parameters: {recording: Record<string, unknown>},\n  };\n\n  type StringifyStepRequest = {\n    method: RecorderExtensionPluginCommands.StringifyStep,\n    parameters: {step: Record<string, unknown>},\n  };\n\n  export type RecorderExtensionRequests = StringifyRequest|StringifyStepRequest;\n}\n\ndeclare global {\n  interface Window {\n    injectedExtensionAPI:\n        (extensionInfo: ExtensionDescriptor, inspectedTabId: string, themeName: string, keysToForward: number[],\n         testHook:\n             (extensionServer: APIImpl.ExtensionServerClient, extensionAPI: APIImpl.InspectorExtensionAPI) => unknown,\n         injectedScriptId: number, targetWindow?: Window) => void;\n    buildExtensionAPIInjectedScript(\n        extensionInfo: ExtensionDescriptor, inspectedTabId: string, themeName: string, keysToForward: number[],\n        testHook: undefined|((extensionServer: unknown, extensionAPI: unknown) => unknown)): string;\n    chrome: PublicAPI.Chrome.DevTools.Chrome;\n    webInspector?: APIImpl.InspectorExtensionAPI;\n  }\n}\n\nexport type ExtensionDescriptor = {\n  startPage: string,\n  name: string,\n  exposeExperimentalAPIs: boolean,\n  exposeWebInspectorNamespace?: boolean,\n};\n\nnamespace APIImpl {\n  export interface InspectorExtensionAPI {\n    languageServices: PublicAPI.Chrome.DevTools.LanguageExtensions;\n    recorder: PublicAPI.Chrome.DevTools.RecorderExtensions;\n    timeline: Timeline;\n    network: PublicAPI.Chrome.DevTools.Network;\n    panels: PublicAPI.Chrome.DevTools.Panels;\n    inspectedWindow: PublicAPI.Chrome.DevTools.InspectedWindow;\n  }\n\n  export interface ExtensionServerClient {\n    _callbacks: {[key: string]: (response: unknown) => unknown};\n    _handlers: {[key: string]: (request: {arguments: unknown[]}) => unknown};\n    _lastRequestId: number;\n    _lastObjectId: number;\n    _port: MessagePort;\n\n    _onCallback(request: unknown): void;\n    _onMessage(event: MessageEvent<{command: string, requestId: number, arguments: unknown[]}>): void;\n    _registerCallback(callback: (response: unknown) => unknown): number;\n    registerHandler(command: string, handler: (request: {arguments: unknown[]}) => unknown): void;\n    unregisterHandler(command: string): void;\n    hasHandler(command: string): boolean;\n    sendRequest(request: PrivateAPI.ServerRequests, callback?: ((response: unknown) => unknown), transfers?: unknown[]):\n        void;\n    nextObjectId(): string;\n  }\n\n  // We cannot use the stronger `unknown` type in place of `any` in the following type definition. The type is used as\n  // the right-hand side of `extends` in a few places, which doesn't narrow `unknown`. Without narrowing, overload\n  // resolution and meaningful type inference of arguments break, for example.\n  // TODO(crbug.com/1172300) Ignored during the jsdoc to ts migration\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  export type Callable = (...args: any) => void;\n\n  export interface EventSink<ListenerT extends Callable> extends PublicAPI.Chrome.DevTools.EventSink<ListenerT> {\n    _type: string;\n    _listeners: ListenerT[];\n    _customDispatch: undefined|((this: EventSink<ListenerT>, request: {arguments: unknown[]}) => unknown);\n\n    _fire(..._vararg: Parameters<ListenerT>): void;\n    _dispatch(request: {arguments: unknown[]}): void;\n  }\n\n  export interface Network extends PublicAPI.Chrome.DevTools.Network {\n    addRequestHeaders(headers: {[key: string]: string}): void;\n  }\n\n  export interface Request extends PublicAPI.Chrome.DevTools.Request, HAR.Log.EntryDTO {\n    _id: number;\n  }\n\n  export interface Panels extends PublicAPI.Chrome.DevTools.Panels {\n    get SearchAction(): {[key: string]: string};\n    applyStyleSheet(styleSheet: string): void;\n    setOpenResourceHandler(callback?: (resource: PublicAPI.Chrome.DevTools.Resource, lineNumber: number) => unknown):\n        void;\n    setThemeChangeHandler(callback?: (themeName: string) => unknown): void;\n  }\n\n  export interface ExtensionView extends PublicAPI.Chrome.DevTools.ExtensionView {\n    _id: string|null;\n  }\n\n  export interface ExtensionSidebarPane extends ExtensionView, PublicAPI.Chrome.DevTools.ExtensionSidebarPane {\n    setExpression(\n        expression: string, rootTitle?: string, evaluteOptions?: PrivateAPI.EvaluateOptions,\n        callback?: () => unknown): void;\n  }\n\n  export interface PanelWithSidebar extends ExtensionView, PublicAPI.Chrome.DevTools.PanelWithSidebar {\n    _hostPanelName: string;\n  }\n\n  export interface LanguageExtensions extends PublicAPI.Chrome.DevTools.LanguageExtensions {\n    _plugins: Map<PublicAPI.Chrome.DevTools.LanguageExtensionPlugin, MessagePort>;\n  }\n\n  export interface RecorderExtensions extends PublicAPI.Chrome.DevTools.RecorderExtensions {\n    _plugins: Map<PublicAPI.Chrome.DevTools.RecorderExtensionPlugin, MessagePort>;\n  }\n\n  export interface ExtensionPanel extends ExtensionView, PublicAPI.Chrome.DevTools.ExtensionPanel {\n    show(): void;\n  }\n\n  export interface Button extends PublicAPI.Chrome.DevTools.Button {\n    _id: string;\n  }\n\n  export interface TraceSession {\n    _id: string;\n\n    complete(url?: string, timeOffset?: number): void;\n  }\n\n  export interface TraceProvider {\n    onRecordingStarted: EventSink<(session: TraceSession) => unknown>;\n    onRecordingStopped: EventSink<() => unknown>;\n  }\n\n  export interface Timeline {\n    addTraceProvider(categoryName: string, categoryTooltip: string): TraceProvider;\n  }\n\n  export type ResourceData = {url: string, type: string};\n  export interface Resource extends PublicAPI.Chrome.DevTools.Resource {\n    _type: string;\n    _url: string;\n\n    get type(): string;\n  }\n}\n\nself.injectedExtensionAPI = function(\n    extensionInfo: ExtensionDescriptor, inspectedTabId: string, themeName: string, keysToForward: number[],\n    testHook: (extensionServer: APIImpl.ExtensionServerClient, extensionAPI: APIImpl.InspectorExtensionAPI) => unknown,\n    injectedScriptId: number, targetWindowForTest?: Window): void {\n  const keysToForwardSet = new Set<number>(keysToForward);\n  const chrome = window.chrome || {};\n\n  const devtools_descriptor = Object.getOwnPropertyDescriptor(chrome, 'devtools');\n  if (devtools_descriptor) {\n    return;\n  }\n  let userAction = false;\n\n  // Here and below, all constructors are private to API implementation.\n  // For a public type Foo, if internal fields are present, these are on\n  // a private FooImpl type, an instance of FooImpl is used in a closure\n  // by Foo consutrctor to re-bind publicly exported members to an instance\n  // of Foo.\n\n  function EventSinkImpl<ListenerT extends APIImpl.Callable>(\n      this: APIImpl.EventSink<ListenerT>, type: string,\n      customDispatch?: (this: APIImpl.EventSink<ListenerT>, request: {arguments: unknown[]}) => unknown): void {\n    this._type = type;\n    this._listeners = [];\n    this._customDispatch = customDispatch;\n  }\n\n  EventSinkImpl.prototype = {\n    addListener: function<ListenerT extends APIImpl.Callable>(this: APIImpl.EventSink<ListenerT>, callback: ListenerT):\n        void {\n          if (typeof callback !== 'function') {\n            throw 'addListener: callback is not a function';\n          }\n          if (this._listeners.length === 0) {\n            extensionServer.sendRequest({command: PrivateAPI.Commands.Subscribe, type: this._type});\n          }\n          this._listeners.push(callback);\n          extensionServer.registerHandler('notify-' + this._type, this._dispatch.bind(this));\n        },\n\n    removeListener: function<ListenerT extends APIImpl.Callable>(\n        this: APIImpl.EventSink<ListenerT>, callback: ListenerT): void {\n      const listeners = this._listeners;\n\n      for (let i = 0; i < listeners.length; ++i) {\n        if (listeners[i] === callback) {\n          listeners.splice(i, 1);\n          break;\n        }\n      }\n      if (this._listeners.length === 0) {\n        extensionServer.sendRequest({command: PrivateAPI.Commands.Unsubscribe, type: this._type});\n      }\n    },\n\n    _fire: function<ListenerT extends APIImpl.Callable>(\n        this: APIImpl.EventSink<ListenerT>, ..._vararg: Parameters<ListenerT>): void {\n      const listeners = this._listeners.slice();\n      for (let i = 0; i < listeners.length; ++i) {\n        listeners[i].apply(null, Array.from(arguments));\n      }\n    },\n\n    _dispatch: function<ListenerT extends APIImpl.Callable>(\n        this: APIImpl.EventSink<ListenerT>, request: {arguments: unknown[]}): void {\n      if (this._customDispatch) {\n        this._customDispatch.call(this, request);\n      } else {\n        this._fire.apply(this, request.arguments as Parameters<ListenerT>);\n      }\n    },\n  };\n\n  function Constructor<NewT extends APIImpl.Callable>(ctor: NewT): new (...args: Parameters<NewT>) =>\n      ThisParameterType<NewT> {\n    return ctor as unknown as new (...args: Parameters<NewT>) => ThisParameterType<NewT>;\n  }\n\n  function InspectorExtensionAPI(this: APIImpl.InspectorExtensionAPI): void {\n    this.inspectedWindow = new (Constructor(InspectedWindow))();\n    this.panels = new (Constructor(Panels))();\n    this.network = new (Constructor(Network))();\n    this.timeline = new (Constructor(Timeline))();\n    this.languageServices = new (Constructor(LanguageServicesAPI))();\n    this.recorder = new (Constructor(RecorderServicesAPI))();\n    defineDeprecatedProperty(this, 'webInspector', 'resources', 'network');\n  }\n\n  function Network(this: APIImpl.Network): void {\n    function dispatchRequestEvent(\n        this: APIImpl.EventSink<(request: PublicAPI.Chrome.DevTools.Request) => unknown>,\n        message: {arguments: unknown[]}): void {\n      const request = message.arguments[1] as APIImpl.Request & {__proto__: APIImpl.Request};\n\n      request.__proto__ = new (Constructor(Request))(message.arguments[0] as number);\n      this._fire(request);\n    }\n\n    this.onRequestFinished =\n        new (Constructor(EventSink))(PrivateAPI.Events.NetworkRequestFinished, dispatchRequestEvent);\n    defineDeprecatedProperty(this, 'network', 'onFinished', 'onRequestFinished');\n\n    this.onNavigated = new (Constructor(EventSink))(PrivateAPI.Events.InspectedURLChanged);\n  }\n\n  (Network.prototype as Pick<APIImpl.Network, 'getHAR'|'addRequestHeaders'>) = {\n    getHAR: function(this: PublicAPI.Chrome.DevTools.Network, callback?: (harLog: Object) => unknown): void {\n      function callbackWrapper(response: unknown): void {\n        const result =\n            response as ({entries: Array<HAR.Log.EntryDTO&{__proto__?: APIImpl.Request, _requestId?: number}>});\n        const entries = (result && result.entries) || [];\n        for (let i = 0; i < entries.length; ++i) {\n          entries[i].__proto__ = new (Constructor(Request))(entries[i]._requestId as number);\n          delete entries[i]._requestId;\n        }\n        callback && callback(result as Object);\n      }\n      extensionServer.sendRequest({command: PrivateAPI.Commands.GetHAR}, callback && callbackWrapper);\n    },\n\n    addRequestHeaders: function(headers: {[key: string]: string}): void {\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.AddRequestHeaders, headers: headers, extensionId: window.location.hostname});\n    },\n  };\n\n  function RequestImpl(this: APIImpl.Request, id: number): void {\n    this._id = id;\n  }\n\n  (RequestImpl.prototype as Pick<APIImpl.Request, 'getContent'>) = {\n    getContent: function(this: APIImpl.Request, callback?: (content: string, encoding: string) => unknown): void {\n      function callbackWrapper(response: unknown): void {\n        const {content, encoding} = response as {content: string, encoding: string};\n        callback && callback(content, encoding);\n      }\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.GetRequestContent, id: this._id}, callback && callbackWrapper);\n    },\n  };\n\n  function Panels(this: APIImpl.Panels): void {\n    const panels: {[key: string]: ElementsPanel|SourcesPanel} = {\n      elements: new ElementsPanel(),\n      sources: new SourcesPanel(),\n    };\n\n    function panelGetter(name: string): ElementsPanel|SourcesPanel {\n      return panels[name];\n    }\n    for (const panel in panels) {\n      Object.defineProperty(this, panel, {get: panelGetter.bind(null, panel), enumerable: true});\n    }\n    this.applyStyleSheet = function(styleSheet: string): void {\n      extensionServer.sendRequest({command: PrivateAPI.Commands.ApplyStyleSheet, styleSheet: styleSheet});\n    };\n  }\n\n  (Panels.prototype as\n   Pick<APIImpl.Panels, 'create'|'setOpenResourceHandler'|'openResource'|'SearchAction'|'setThemeChangeHandler'>) = {\n    create: function(\n        title: string, icon: string, page: string,\n        callback: (panel: PublicAPI.Chrome.DevTools.ExtensionPanel) => unknown): void {\n      const id = 'extension-panel-' + extensionServer.nextObjectId();\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.CreatePanel, id, title, page},\n          callback && ((): unknown => callback.call(this, new (Constructor(ExtensionPanel))(id))));\n    },\n\n    setOpenResourceHandler: function(\n        callback: (resource: PublicAPI.Chrome.DevTools.Resource, lineNumber: number) => unknown): void {\n      const hadHandler = extensionServer.hasHandler(PrivateAPI.Events.OpenResource);\n\n      function callbackWrapper(message: unknown): void {\n        // Allow the panel to show itself when handling the event.\n        userAction = true;\n        try {\n          const {resource, lineNumber} = message as {resource: APIImpl.ResourceData, lineNumber: number};\n          callback.call(null, new (Constructor(Resource))(resource), lineNumber);\n        } finally {\n          userAction = false;\n        }\n      }\n\n      if (!callback) {\n        extensionServer.unregisterHandler(PrivateAPI.Events.OpenResource);\n      } else {\n        extensionServer.registerHandler(PrivateAPI.Events.OpenResource, callbackWrapper);\n      }\n\n      // Only send command if we either removed an existing handler or added handler and had none before.\n      if (hadHandler === !callback) {\n        extensionServer.sendRequest(\n            {command: PrivateAPI.Commands.SetOpenResourceHandler, 'handlerPresent': Boolean(callback)});\n      }\n    },\n\n    setThemeChangeHandler: function(callback: (themeName: string) => unknown): void {\n      const hadHandler = extensionServer.hasHandler(PrivateAPI.Events.ThemeChange);\n\n      function callbackWrapper(message: unknown): void {\n        const {themeName} = message as {themeName: string};\n        chrome.devtools.panels.themeName = themeName;\n        callback.call(null, themeName);\n      }\n\n      if (!callback) {\n        extensionServer.unregisterHandler(PrivateAPI.Events.ThemeChange);\n      } else {\n        extensionServer.registerHandler(PrivateAPI.Events.ThemeChange, callbackWrapper);\n      }\n\n      // Only send command if we either removed an existing handler or added handler and had none before.\n      if (hadHandler === !callback) {\n        extensionServer.sendRequest(\n            {command: PrivateAPI.Commands.SetThemeChangeHandler, 'handlerPresent': Boolean(callback)});\n      }\n    },\n\n    openResource: function(\n        url: Platform.DevToolsPath.UrlString, lineNumber: number, columnNumber?: number,\n        _callback?: (response: unknown) => unknown): void {\n      const callbackArg = extractCallbackArgument(arguments);\n      // Handle older API:\n      const columnNumberArg = typeof columnNumber === 'number' ? columnNumber : 0;\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.OpenResource, url, lineNumber, columnNumber: columnNumberArg}, callbackArg);\n    },\n\n    get SearchAction(): {[key: string]: string} {\n      return {\n        CancelSearch: PrivateAPI.Panels.SearchAction.CancelSearch,\n        PerformSearch: PrivateAPI.Panels.SearchAction.PerformSearch,\n        NextSearchResult: PrivateAPI.Panels.SearchAction.NextSearchResult,\n        PreviousSearchResult: PrivateAPI.Panels.SearchAction.PreviousSearchResult,\n      };\n    },\n  };\n\n  function ExtensionViewImpl(this: APIImpl.ExtensionView, id: string|null): void {\n    this._id = id;\n\n    function dispatchShowEvent(\n        this: APIImpl.EventSink<(window?: Window) => unknown>, message: {arguments: unknown[]}): void {\n      const frameIndex = message.arguments[0];\n      if (typeof frameIndex === 'number') {\n        this._fire(window.parent.frames[frameIndex]);\n      } else {\n        this._fire();\n      }\n    }\n\n    if (id) {\n      this.onShown = new (Constructor(EventSink))(PrivateAPI.Events.ViewShown + id, dispatchShowEvent);\n\n      this.onHidden = new (Constructor(EventSink))(PrivateAPI.Events.ViewHidden + id);\n    }\n  }\n\n  function PanelWithSidebarImpl(this: APIImpl.PanelWithSidebar, hostPanelName: string): void {\n    ExtensionViewImpl.call(this, null);\n    this._hostPanelName = hostPanelName;\n\n    this.onSelectionChanged = new (Constructor(EventSink))(PrivateAPI.Events.PanelObjectSelected + hostPanelName);\n  }\n\n  (PanelWithSidebarImpl.prototype as Pick<APIImpl.PanelWithSidebar, 'createSidebarPane'>&\n   {__proto__: APIImpl.ExtensionView}) = {\n    createSidebarPane: function(\n        this: APIImpl.PanelWithSidebar, title: string,\n        callback?: (pane: PublicAPI.Chrome.DevTools.ExtensionSidebarPane) => unknown): void {\n      const id = 'extension-sidebar-' + extensionServer.nextObjectId();\n      function callbackWrapper(): void {\n        callback && callback(new (Constructor(ExtensionSidebarPane))(id));\n      }\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.CreateSidebarPane, panel: this._hostPanelName, id, title},\n          callback && callbackWrapper);\n    },\n\n    __proto__: ExtensionViewImpl.prototype,\n  };\n\n  function RecorderServicesAPIImpl(this: APIImpl.RecorderExtensions): void {\n    this._plugins = new Map();\n  }\n\n  (RecorderServicesAPIImpl.prototype as\n   Pick<APIImpl.RecorderExtensions, 'registerRecorderExtensionPlugin'|'unregisterRecorderExtensionPlugin'>) = {\n    registerRecorderExtensionPlugin: async function(\n        this: APIImpl.RecorderExtensions, plugin: PublicAPI.Chrome.DevTools.RecorderExtensionPlugin, pluginName: string,\n        mediaType: string): Promise<void> {\n      if (this._plugins.has(plugin)) {\n        throw new Error(`Tried to register plugin '${pluginName}' twice`);\n      }\n      const channel = new MessageChannel();\n      const port = channel.port1;\n      this._plugins.set(plugin, port);\n      port.onmessage = ({data}: MessageEvent<{requestId: number}&PrivateAPI.RecorderExtensionRequests>): void => {\n        const {requestId} = data;\n        dispatchMethodCall(data)\n            .then(result => port.postMessage({requestId, result}))\n            .catch(error => port.postMessage({requestId, error: {message: error.message}}));\n      };\n\n      async function dispatchMethodCall(request: PrivateAPI.RecorderExtensionRequests): Promise<unknown> {\n        switch (request.method) {\n          case PrivateAPI.RecorderExtensionPluginCommands.Stringify:\n            return plugin.stringify(request.parameters.recording);\n          case PrivateAPI.RecorderExtensionPluginCommands.StringifyStep:\n            return plugin.stringifyStep(request.parameters.step);\n          default:\n            // @ts-expect-error\n            throw new Error(`'${request.method}' is not recognized`);\n        }\n      }\n\n      await new Promise<void>(resolve => {\n        extensionServer.sendRequest(\n            {\n              command: PrivateAPI.Commands.RegisterRecorderExtensionPlugin,\n              pluginName,\n              mediaType,\n              port: channel.port2,\n            },\n            () => resolve(), [channel.port2]);\n      });\n    },\n\n    unregisterRecorderExtensionPlugin: async function(\n        this: APIImpl.RecorderExtensions, plugin: PublicAPI.Chrome.DevTools.RecorderExtensionPlugin): Promise<void> {\n      const port = this._plugins.get(plugin);\n      if (!port) {\n        throw new Error('Tried to unregister a plugin that was not previously registered');\n      }\n      this._plugins.delete(plugin);\n      port.postMessage({event: PrivateAPI.RecorderExtensionPluginEvents.UnregisteredRecorderExtensionPlugin});\n      port.close();\n    },\n  };\n\n  function LanguageServicesAPIImpl(this: APIImpl.LanguageExtensions): void {\n    this._plugins = new Map();\n  }\n\n  (LanguageServicesAPIImpl.prototype as\n   Pick<APIImpl.LanguageExtensions, 'registerLanguageExtensionPlugin'|'unregisterLanguageExtensionPlugin'>) = {\n    registerLanguageExtensionPlugin: async function(\n        this: APIImpl.LanguageExtensions, plugin: PublicAPI.Chrome.DevTools.LanguageExtensionPlugin, pluginName: string,\n        supportedScriptTypes: PublicAPI.Chrome.DevTools.SupportedScriptTypes): Promise<void> {\n      if (this._plugins.has(plugin)) {\n        throw new Error(`Tried to register plugin '${pluginName}' twice`);\n      }\n      const channel = new MessageChannel();\n      const port = channel.port1;\n      this._plugins.set(plugin, port);\n      port.onmessage = ({data}: MessageEvent<{requestId: number}&PrivateAPI.LanguageExtensionRequests>): void => {\n        const {requestId} = data;\n        console.time(`${requestId}: ${data.method}`);\n        dispatchMethodCall(data)\n            .then(result => port.postMessage({requestId, result}))\n            .catch(error => port.postMessage({requestId, error: {message: error.message}}))\n            .finally(() => console.timeEnd(`${requestId}: ${data.method}`));\n      };\n\n      function dispatchMethodCall(request: PrivateAPI.LanguageExtensionRequests): Promise<unknown> {\n        switch (request.method) {\n          case PrivateAPI.LanguageExtensionPluginCommands.AddRawModule:\n            return plugin.addRawModule(\n                request.parameters.rawModuleId, request.parameters.symbolsURL, request.parameters.rawModule);\n          case PrivateAPI.LanguageExtensionPluginCommands.RemoveRawModule:\n            return plugin.removeRawModule(request.parameters.rawModuleId);\n          case PrivateAPI.LanguageExtensionPluginCommands.SourceLocationToRawLocation:\n            return plugin.sourceLocationToRawLocation(request.parameters.sourceLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.RawLocationToSourceLocation:\n            return plugin.rawLocationToSourceLocation(request.parameters.rawLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetScopeInfo:\n            return plugin.getScopeInfo(request.parameters.type);\n          case PrivateAPI.LanguageExtensionPluginCommands.ListVariablesInScope:\n            return plugin.listVariablesInScope(request.parameters.rawLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetTypeInfo:\n            return plugin.getTypeInfo(request.parameters.expression, request.parameters.context);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetFormatter:\n            return plugin.getFormatter(request.parameters.expressionOrField, request.parameters.context);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetInspectableAddress:\n            if ('getInspectableAddress' in plugin) {\n              return plugin.getInspectableAddress(request.parameters.field);\n            }\n            return Promise.resolve({js: ''});\n          case PrivateAPI.LanguageExtensionPluginCommands.GetFunctionInfo:\n            return plugin.getFunctionInfo(request.parameters.rawLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetInlinedFunctionRanges:\n            return plugin.getInlinedFunctionRanges(request.parameters.rawLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetInlinedCalleesRanges:\n            return plugin.getInlinedCalleesRanges(request.parameters.rawLocation);\n          case PrivateAPI.LanguageExtensionPluginCommands.GetMappedLines:\n            if ('getMappedLines' in plugin) {\n              return plugin.getMappedLines(request.parameters.rawModuleId, request.parameters.sourceFileURL);\n            }\n            return Promise.resolve(undefined);\n        }\n        // @ts-expect-error\n        throw new Error(`Unknown language plugin method ${request.method}`);\n      }\n\n      await new Promise<void>(resolve => {\n        extensionServer.sendRequest(\n            {\n              command: PrivateAPI.Commands.RegisterLanguageExtensionPlugin,\n              pluginName,\n              port: channel.port2,\n              supportedScriptTypes,\n            },\n            () => resolve(), [channel.port2]);\n      });\n    },\n\n    unregisterLanguageExtensionPlugin: async function(\n        this: APIImpl.LanguageExtensions, plugin: PublicAPI.Chrome.DevTools.LanguageExtensionPlugin): Promise<void> {\n      const port = this._plugins.get(plugin);\n      if (!port) {\n        throw new Error('Tried to unregister a plugin that was not previously registered');\n      }\n      this._plugins.delete(plugin);\n      port.postMessage({event: PrivateAPI.LanguageExtensionPluginEvents.UnregisteredLanguageExtensionPlugin});\n      port.close();\n    },\n  };\n\n  function declareInterfaceClass<ImplT extends APIImpl.Callable>(implConstructor: ImplT): (\n      this: ThisParameterType<ImplT>, ...args: Parameters<ImplT>) => void {\n    return function(this: ThisParameterType<ImplT>, ...args: Parameters<ImplT>): void {\n      const impl = {__proto__: implConstructor.prototype};\n      implConstructor.apply(impl, args);\n      populateInterfaceClass(this as {[key: string]: unknown}, impl);\n    };\n  }\n\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function defineDeprecatedProperty(object: any, className: string, oldName: string, newName: string): void {\n    let warningGiven = false;\n    function getter(): unknown {\n      if (!warningGiven) {\n        console.warn(className + '.' + oldName + ' is deprecated. Use ' + className + '.' + newName + ' instead');\n        warningGiven = true;\n      }\n      return object[newName];\n    }\n    object.__defineGetter__(oldName, getter);\n  }\n\n  function extractCallbackArgument(args: IArguments): ((...args: unknown[]) => unknown)|undefined {\n    const lastArgument = args[args.length - 1];\n    return typeof lastArgument === 'function' ? lastArgument as (...args: unknown[]) => unknown : undefined;\n  }\n\n  const LanguageServicesAPI = declareInterfaceClass(LanguageServicesAPIImpl);\n  const RecorderServicesAPI = declareInterfaceClass(RecorderServicesAPIImpl);\n  const Button = declareInterfaceClass(ButtonImpl);\n  const EventSink = declareInterfaceClass(EventSinkImpl);\n  const ExtensionPanel = declareInterfaceClass(ExtensionPanelImpl);\n  const ExtensionSidebarPane = declareInterfaceClass(ExtensionSidebarPaneImpl);\n  const PanelWithSidebarClass = declareInterfaceClass(PanelWithSidebarImpl);\n  const Request = declareInterfaceClass(RequestImpl);\n  const Resource = declareInterfaceClass(ResourceImpl);\n  const TraceSession = declareInterfaceClass(TraceSessionImpl);\n\n  class ElementsPanel extends (Constructor(PanelWithSidebarClass)) {\n    constructor() {\n      super('elements');\n    }\n  }\n\n  class SourcesPanel extends (Constructor(PanelWithSidebarClass)) {\n    constructor() {\n      super('sources');\n    }\n  }\n\n  function ExtensionPanelImpl(this: APIImpl.ExtensionPanel, id: string): void {\n    ExtensionViewImpl.call(this, id);\n\n    this.onSearch = new (Constructor(EventSink))(PrivateAPI.Events.PanelSearch + id);\n  }\n\n  (ExtensionPanelImpl.prototype as Pick<APIImpl.ExtensionPanel, 'createStatusBarButton'|'show'>&\n   {__proto__: APIImpl.ExtensionView}) = {\n    createStatusBarButton: function(\n                               this: APIImpl.ExtensionPanel, iconPath: string, tooltipText: string, disabled: boolean):\n                               PublicAPI.Chrome.DevTools.Button {\n                                 const id = 'button-' + extensionServer.nextObjectId();\n                                 extensionServer.sendRequest({\n                                   command: PrivateAPI.Commands.CreateToolbarButton,\n                                   panel: this._id as string,\n                                   id: id,\n                                   icon: iconPath,\n                                   tooltip: tooltipText,\n                                   disabled: Boolean(disabled),\n                                 });\n\n                                 return new (Constructor(Button))(id);\n                               },\n\n    show: function(this: APIImpl.ExtensionPanel): void {\n      if (!userAction) {\n        return;\n      }\n\n      extensionServer.sendRequest({command: PrivateAPI.Commands.ShowPanel, id: this._id as string});\n    },\n\n    __proto__: ExtensionViewImpl.prototype,\n  };\n\n  function ExtensionSidebarPaneImpl(this: APIImpl.ExtensionSidebarPane, id: string): void {\n    ExtensionViewImpl.call(this, id);\n  }\n\n  (ExtensionSidebarPaneImpl.prototype as\n       Pick<APIImpl.ExtensionSidebarPane, 'setHeight'|'setExpression'|'setObject'|'setPage'>&\n   {__proto__: APIImpl.ExtensionView}) = {\n    setHeight: function(this: APIImpl.ExtensionSidebarPane, height: string): void {\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.SetSidebarHeight, id: this._id as string, height: height});\n    },\n\n    setExpression: function(\n        this: APIImpl.ExtensionSidebarPane, expression: string, rootTitle: string,\n        evaluateOptions?: PrivateAPI.EvaluateOptions, _callback?: () => unknown): void {\n      extensionServer.sendRequest(\n          {\n            command: PrivateAPI.Commands.SetSidebarContent,\n            id: this._id as string,\n            expression: expression,\n            rootTitle: rootTitle,\n            evaluateOnPage: true,\n            evaluateOptions: (typeof evaluateOptions === 'object' ? evaluateOptions : {}),\n          },\n          extractCallbackArgument(arguments));\n    },\n\n    setObject: function(\n        this: APIImpl.ExtensionSidebarPane, jsonObject: string, rootTitle?: string, callback?: () => unknown): void {\n      extensionServer.sendRequest(\n          {\n            command: PrivateAPI.Commands.SetSidebarContent,\n            id: this._id as string,\n            expression: jsonObject,\n            rootTitle: rootTitle,\n          },\n          callback);\n    },\n\n    setPage: function(this: APIImpl.ExtensionSidebarPane, page: string): void {\n      extensionServer.sendRequest({command: PrivateAPI.Commands.SetSidebarPage, id: this._id as string, page: page});\n    },\n\n    __proto__: ExtensionViewImpl.prototype,\n  };\n\n  function ButtonImpl(this: APIImpl.Button, id: string): void {\n    this._id = id;\n\n    this.onClicked = new (Constructor(EventSink))(PrivateAPI.Events.ButtonClicked + id);\n  }\n\n  (ButtonImpl.prototype as Pick<APIImpl.Button, 'update'>) = {\n    update: function(this: APIImpl.Button, iconPath?: string, tooltipText?: string, disabled?: boolean): void {\n      extensionServer.sendRequest({\n        command: PrivateAPI.Commands.UpdateButton,\n        id: this._id,\n        icon: iconPath,\n        tooltip: tooltipText,\n        disabled: Boolean(disabled),\n      });\n    },\n  };\n\n  function Timeline(this: APIImpl.Timeline): void {\n  }\n\n  (Timeline.prototype as Pick<APIImpl.Timeline, 'addTraceProvider'>) = {\n    addTraceProvider: function(this: APIImpl.Timeline, categoryName: string, categoryTooltip: string):\n                          APIImpl.TraceProvider {\n                            const id = 'extension-trace-provider-' + extensionServer.nextObjectId();\n                            extensionServer.sendRequest({\n                              command: PrivateAPI.Commands.AddTraceProvider,\n                              id: id,\n                              categoryName: categoryName,\n                              categoryTooltip: categoryTooltip,\n                            });\n\n                            return new (Constructor(TraceProvider))(id);\n                          },\n  };\n\n  function TraceSessionImpl(this: APIImpl.TraceSession, id: string): void {\n    this._id = id;\n  }\n\n  (TraceSessionImpl.prototype as Pick<APIImpl.TraceSession, 'complete'>) = {\n    complete: function(this: APIImpl.TraceSession, url?: Platform.DevToolsPath.UrlString, timeOffset?: number): void {\n      extensionServer.sendRequest({\n        command: PrivateAPI.Commands.CompleteTraceSession,\n        id: this._id,\n        url: url || Platform.DevToolsPath.EmptyUrlString,\n        timeOffset: timeOffset || 0,\n      });\n    },\n  };\n\n  function TraceProvider(this: APIImpl.TraceProvider, id: string): void {\n    function dispatchRecordingStarted(\n        this: APIImpl.EventSink<APIImpl.Callable>, message: {arguments: unknown[]}): void {\n      const sessionId = message.arguments[0] as string;\n\n      this._fire(new (Constructor(TraceSession))(sessionId));\n    }\n\n    this.onRecordingStarted =\n        new (Constructor(EventSink))(PrivateAPI.Events.RecordingStarted + id, dispatchRecordingStarted);\n\n    this.onRecordingStopped = new (Constructor(EventSink))(PrivateAPI.Events.RecordingStopped + id);\n  }\n\n  function InspectedWindow(this: PublicAPI.Chrome.DevTools.InspectedWindow): void {\n    function dispatchResourceEvent(\n        this: APIImpl.EventSink<(resource: APIImpl.Resource) => unknown>, message: {arguments: unknown[]}): void {\n      this._fire(new (Constructor(Resource))(message.arguments[0] as APIImpl.ResourceData));\n    }\n\n    function dispatchResourceContentEvent(\n        this: APIImpl.EventSink<(resource: APIImpl.Resource, content: string) => unknown>,\n        message: {arguments: unknown[]}): void {\n      this._fire(\n          new (Constructor(Resource))(message.arguments[0] as APIImpl.ResourceData), message.arguments[1] as string);\n    }\n\n    this.onResourceAdded = new (Constructor(EventSink))(PrivateAPI.Events.ResourceAdded, dispatchResourceEvent);\n    this.onResourceContentCommitted =\n        new (Constructor(EventSink))(PrivateAPI.Events.ResourceContentCommitted, dispatchResourceContentEvent);\n  }\n\n  (InspectedWindow.prototype as Pick<PublicAPI.Chrome.DevTools.InspectedWindow, 'reload'|'eval'|'getResources'>) = {\n    reload: function(optionsOrUserAgent: {\n      ignoreCache?: boolean,\n      injectedScript?: string,\n      userAgent?: string,\n    }): void {\n      let options: {\n        ignoreCache?: boolean,\n        injectedScript?: string,\n        userAgent?: string,\n      }|null = null;\n      if (typeof optionsOrUserAgent === 'object') {\n        options = optionsOrUserAgent;\n      } else if (typeof optionsOrUserAgent === 'string') {\n        options = {userAgent: optionsOrUserAgent};\n        console.warn(\n            'Passing userAgent as string parameter to inspectedWindow.reload() is deprecated. ' +\n            'Use inspectedWindow.reload({ userAgent: value}) instead.');\n      }\n      extensionServer.sendRequest({command: PrivateAPI.Commands.Reload, options: options});\n    },\n\n    eval: function(\n              expression: string,\n              evaluateOptions: {contextSecurityOrigin?: string, frameURL?: string, useContentScriptContext?: boolean}):\n              Object |\n        null {\n          const callback = extractCallbackArgument(arguments);\n          function callbackWrapper(result: unknown): void {\n            const {isError, isException, value} = result as {\n              isError?: boolean,\n              isException?: boolean, value: unknown,\n            };\n            if (isError || isException) {\n              callback && callback(undefined, result);\n            } else {\n              callback && callback(value);\n            }\n          }\n          extensionServer.sendRequest(\n              {\n                command: PrivateAPI.Commands.EvaluateOnInspectedPage,\n                expression: expression,\n                evaluateOptions: (typeof evaluateOptions === 'object' ? evaluateOptions : undefined),\n              },\n              callback && callbackWrapper);\n          return null;\n        },\n\n    getResources: function(callback?: (resources: PublicAPI.Chrome.DevTools.Resource[]) => unknown): void {\n      function wrapResource(resourceData: APIImpl.ResourceData): APIImpl.Resource {\n        return new (Constructor(Resource))(resourceData);\n      }\n      function callbackWrapper(resources: unknown): void {\n        callback && callback((resources as APIImpl.ResourceData[]).map(wrapResource));\n      }\n      extensionServer.sendRequest({command: PrivateAPI.Commands.GetPageResources}, callback && callbackWrapper);\n    },\n  };\n\n  function ResourceImpl(this: APIImpl.Resource, resourceData: APIImpl.ResourceData): void {\n    this._url = resourceData.url;\n    this._type = resourceData.type;\n  }\n\n  (ResourceImpl.prototype as Pick<APIImpl.Resource, 'url'|'type'|'getContent'|'setContent'>) = {\n    get url(): string {\n      return (this as APIImpl.Resource)._url;\n    },\n\n    get type(): string {\n      return (this as APIImpl.Resource)._type;\n    },\n\n    getContent: function(this: APIImpl.Resource, callback?: (content: string, encoding: string) => unknown): void {\n      function callbackWrapper(response: unknown): void {\n        const {content, encoding} = response as {content: string, encoding: string};\n        callback && callback(content, encoding);\n      }\n\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.GetResourceContent, url: this._url}, callback && callbackWrapper);\n    },\n\n    setContent: function(\n        this: APIImpl.Resource, content: string, commit: boolean, callback: (error?: Object) => unknown): void {\n      extensionServer.sendRequest(\n          {command: PrivateAPI.Commands.SetResourceContent, url: this._url, content: content, commit: commit},\n          callback as (response: unknown) => unknown);\n    },\n  };\n\n  function getTabId(): string {\n    return inspectedTabId;\n  }\n\n  let keyboardEventRequestQueue: KeyboardEventInit&{eventType: string}[] = [];\n  let forwardTimer: number|null = null;\n  function forwardKeyboardEvent(event: KeyboardEvent): void {\n    // Check if the event should be forwarded.\n    // This is a workaround for crbug.com/923338.\n    const focused = document.activeElement;\n    if (focused) {\n      const isInput = focused.nodeName === 'INPUT' || focused.nodeName === 'TEXTAREA';\n      if (isInput && !(event.ctrlKey || event.altKey || event.metaKey)) {\n        return;\n      }\n    }\n\n    let modifiers = 0;\n    if (event.shiftKey) {\n      modifiers |= 1;\n    }\n    if (event.ctrlKey) {\n      modifiers |= 2;\n    }\n    if (event.altKey) {\n      modifiers |= 4;\n    }\n    if (event.metaKey) {\n      modifiers |= 8;\n    }\n    const num = (event.keyCode & 255) | (modifiers << 8);\n    // We only care about global hotkeys, not about random text\n    if (!keysToForwardSet.has(num)) {\n      return;\n    }\n    event.preventDefault();\n    const requestPayload = {\n      eventType: event.type,\n      ctrlKey: event.ctrlKey,\n      altKey: event.altKey,\n      metaKey: event.metaKey,\n      shiftKey: event.shiftKey,\n      // @ts-expect-error keyIdentifier is a deprecated non-standard property that typescript doesn't know about.\n      keyIdentifier: event.keyIdentifier,\n      key: event.key,\n      code: event.code,\n      location: event.location,\n      keyCode: event.keyCode,\n    };\n    keyboardEventRequestQueue.push(requestPayload);\n    if (!forwardTimer) {\n      forwardTimer = window.setTimeout(forwardEventQueue, 0);\n    }\n  }\n\n  function forwardEventQueue(): void {\n    forwardTimer = null;\n    extensionServer.sendRequest(\n        {command: PrivateAPI.Commands.ForwardKeyboardEvent, entries: keyboardEventRequestQueue});\n    keyboardEventRequestQueue = [];\n  }\n\n  document.addEventListener('keydown', forwardKeyboardEvent, false);\n\n  function ExtensionServerClient(this: APIImpl.ExtensionServerClient, targetWindow: Window): void {\n    this._callbacks = {};\n    this._handlers = {};\n    this._lastRequestId = 0;\n    this._lastObjectId = 0;\n\n    this.registerHandler('callback', this._onCallback.bind(this));\n\n    const channel = new MessageChannel();\n    this._port = channel.port1;\n    this._port.addEventListener('message', this._onMessage.bind(this), false);\n    this._port.start();\n\n    targetWindow.postMessage('registerExtension', '*', [channel.port2]);\n  }\n\n  (ExtensionServerClient.prototype as Pick<\n       APIImpl.ExtensionServerClient,\n       'sendRequest'|'hasHandler'|'registerHandler'|'unregisterHandler'|'nextObjectId'|'_registerCallback'|\n       '_onCallback'|'_onMessage'>) = {\n    sendRequest: function(\n        this: APIImpl.ExtensionServerClient, message: PrivateAPI.ServerRequests,\n        callback?: (response: unknown) => unknown, transfers?: Transferable[]): void {\n      if (typeof callback === 'function') {\n        (message as PrivateAPI.ExtensionServerRequestMessage).requestId = this._registerCallback(callback);\n      }\n      // @ts-expect-error\n      this._port.postMessage(message, transfers);\n    },\n\n    hasHandler: function(this: APIImpl.ExtensionServerClient, command: string): boolean {\n      return Boolean(this._handlers[command]);\n    },\n\n    registerHandler: function(\n        this: APIImpl.ExtensionServerClient, command: string, handler: (request: {arguments: unknown[]}) => unknown):\n        void {\n          this._handlers[command] = handler;\n        },\n\n    unregisterHandler: function(this: APIImpl.ExtensionServerClient, command: string): void {\n      delete this._handlers[command];\n    },\n\n    nextObjectId: function(this: APIImpl.ExtensionServerClient): string {\n      return injectedScriptId.toString() + '_' + ++this._lastObjectId;\n    },\n\n    _registerCallback: function(this: APIImpl.ExtensionServerClient, callback: (response: unknown) => unknown): number {\n      const id = ++this._lastRequestId;\n      this._callbacks[id] = callback;\n      return id;\n    },\n\n    _onCallback: function(this: APIImpl.ExtensionServerClient, request: {requestId: number, result: unknown}): void {\n      if (request.requestId in this._callbacks) {\n        const callback = this._callbacks[request.requestId];\n        delete this._callbacks[request.requestId];\n        callback(request.result);\n      }\n    },\n\n    _onMessage: function(\n        this: APIImpl.ExtensionServerClient,\n        event: MessageEvent<{command: string, requestId: number, arguments: unknown[]}>): void {\n      const request = event.data;\n      const handler = this._handlers[request.command];\n      if (handler) {\n        handler.call(this, request);\n      }\n    },\n  };\n\n  function populateInterfaceClass(interfaze: {[key: string]: unknown}, implementation: {[key: string]: unknown}): void {\n    for (const member in implementation) {\n      if (member.charAt(0) === '_') {\n        continue;\n      }\n      let descriptor: (PropertyDescriptor|undefined)|null = null;\n      // Traverse prototype chain until we find the owner.\n      for (let owner = implementation; owner && !descriptor; owner = owner.__proto__ as {[key: string]: unknown}) {\n        descriptor = Object.getOwnPropertyDescriptor(owner, member);\n      }\n      if (!descriptor) {\n        continue;\n      }\n      if (typeof descriptor.value === 'function') {\n        interfaze[member] = descriptor.value.bind(implementation);\n      } else if (typeof descriptor.get === 'function') {\n        // @ts-expect-error\n        interfaze.__defineGetter__(member, descriptor.get.bind(implementation));\n      } else {\n        Object.defineProperty(interfaze, member, descriptor);\n      }\n    }\n  }\n\n  const extensionServer = new (Constructor(ExtensionServerClient))(targetWindowForTest || window.parent);\n\n  const coreAPI = new (Constructor(InspectorExtensionAPI))();\n\n  Object.defineProperty(chrome, 'devtools', {value: {}, enumerable: true});\n\n  // Only expose tabId on chrome.devtools.inspectedWindow, not webInspector.inspectedWindow.\n  // @ts-expect-error\n  chrome.devtools!.inspectedWindow = {};\n  Object.defineProperty(chrome.devtools!.inspectedWindow, 'tabId', {get: getTabId});\n  // @ts-expect-error\n  chrome.devtools!.inspectedWindow.__proto__ = coreAPI.inspectedWindow;\n  chrome.devtools!.network = coreAPI.network;\n  chrome.devtools!.panels = coreAPI.panels;\n  chrome.devtools!.panels.themeName = themeName;\n  chrome.devtools!.languageServices = coreAPI.languageServices;\n  chrome.devtools!.recorder = coreAPI.recorder;\n\n  // default to expose experimental APIs for now.\n  if (extensionInfo.exposeExperimentalAPIs !== false) {\n    chrome.experimental = chrome.experimental || {};\n    chrome.experimental.devtools = chrome.experimental.devtools || {};\n\n    const properties = Object.getOwnPropertyNames(coreAPI);\n    for (let i = 0; i < properties.length; ++i) {\n      const descriptor = Object.getOwnPropertyDescriptor(coreAPI, properties[i]);\n      if (descriptor) {\n        Object.defineProperty(chrome.experimental.devtools, properties[i], descriptor);\n      }\n    }\n    chrome.experimental.devtools.inspectedWindow = chrome.devtools.inspectedWindow;\n  }\n\n  if (extensionInfo.exposeWebInspectorNamespace) {\n    window.webInspector = coreAPI;\n  }\n  testHook(extensionServer, coreAPI);\n};\n\nself.buildExtensionAPIInjectedScript = function(\n    extensionInfo: {\n      startPage: string,\n      name: string,\n      exposeExperimentalAPIs: boolean,\n    },\n    inspectedTabId: string, themeName: string, keysToForward: number[],\n    testHook:\n        ((extensionServer: APIImpl.ExtensionServerClient, extensionAPI: APIImpl.InspectorExtensionAPI) => unknown)|\n    undefined): string {\n  const argumentsJSON =\n      [extensionInfo, inspectedTabId || null, themeName, keysToForward].map(_ => JSON.stringify(_)).join(',');\n  if (!testHook) {\n    testHook = (): void => {};\n  }\n  return '(function(injectedScriptId){ ' +\n      '(' + self.injectedExtensionAPI.toString() + ')(' + argumentsJSON + ',' + testHook + ', injectedScriptId);' +\n      '})';\n};\n"],
  "mappings": "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",
  "names": []
}
