{
  "version": 3,
  "sources": ["../../../../../../front_end/models/extensions/ExtensionPanel.ts"],
  "sourcesContent": ["/*\n * Copyright (C) 2012 Google Inc. All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are\n * met:\n *\n *     * Redistributions of source code must retain the above copyright\n * notice, this list of conditions and the following disclaimer.\n *     * Redistributions in binary form must reproduce the above\n * copyright notice, this list of conditions and the following disclaimer\n * in the documentation and/or other materials provided with the\n * distribution.\n *     * Neither the name of Google Inc. nor the names of its\n * contributors may be used to endorse or promote products derived from\n * this software without specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n * \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n * LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n * A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n * OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n * DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n * THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nimport * as _ProtocolClient from '../../core/protocol_client/protocol_client.js';  // eslint-disable-line @typescript-eslint/no-unused-vars\nimport type * as Platform from '../../core/platform/platform.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport * as ExtensionAPI from './ExtensionAPI.js';\nimport type {ExtensionServer} from './ExtensionServer.js';\nimport {ExtensionNotifierView, ExtensionView} from './ExtensionView.js';\n\nexport class ExtensionPanel extends UI.Panel.Panel implements UI.SearchableView.Searchable {\n  private readonly server: ExtensionServer;\n  private readonly id: string;\n  private readonly panelToolbar: UI.Toolbar.Toolbar;\n  private readonly searchableViewInternal: UI.SearchableView.SearchableView;\n\n  constructor(server: ExtensionServer, panelName: string, id: string, pageURL: string) {\n    super(panelName);\n    this.server = server;\n    this.id = id;\n    this.setHideOnDetach();\n    this.panelToolbar = new UI.Toolbar.Toolbar('hidden', this.element);\n\n    this.searchableViewInternal = new UI.SearchableView.SearchableView(this, null);\n    this.searchableViewInternal.show(this.element);\n\n    const extensionView = new ExtensionView(server, this.id, pageURL, 'extension');\n    extensionView.show(this.searchableViewInternal.element);\n  }\n\n  addToolbarItem(item: UI.Toolbar.ToolbarItem): void {\n    this.panelToolbar.element.classList.remove('hidden');\n    this.panelToolbar.appendToolbarItem(item);\n  }\n\n  searchCanceled(): void {\n    this.server.notifySearchAction(this.id, ExtensionAPI.PrivateAPI.Panels.SearchAction.CancelSearch);\n    this.searchableViewInternal.updateSearchMatchesCount(0);\n  }\n\n  searchableView(): UI.SearchableView.SearchableView {\n    return this.searchableViewInternal;\n  }\n\n  performSearch(searchConfig: UI.SearchableView.SearchConfig, _shouldJump: boolean, _jumpBackwards?: boolean): void {\n    const query = searchConfig.query;\n    this.server.notifySearchAction(this.id, ExtensionAPI.PrivateAPI.Panels.SearchAction.PerformSearch, query);\n  }\n\n  jumpToNextSearchResult(): void {\n    this.server.notifySearchAction(this.id, ExtensionAPI.PrivateAPI.Panels.SearchAction.NextSearchResult);\n  }\n\n  jumpToPreviousSearchResult(): void {\n    this.server.notifySearchAction(this.id, ExtensionAPI.PrivateAPI.Panels.SearchAction.PreviousSearchResult);\n  }\n\n  supportsCaseSensitiveSearch(): boolean {\n    return false;\n  }\n\n  supportsRegexSearch(): boolean {\n    return false;\n  }\n}\n\nexport class ExtensionButton {\n  private readonly id: string;\n  private readonly toolbarButtonInternal: UI.Toolbar.ToolbarButton;\n  constructor(server: ExtensionServer, id: string, iconURL: string, tooltip?: string, disabled?: boolean) {\n    this.id = id;\n\n    this.toolbarButtonInternal = new UI.Toolbar.ToolbarButton('', '');\n    this.toolbarButtonInternal.addEventListener(\n        UI.Toolbar.ToolbarButton.Events.Click, server.notifyButtonClicked.bind(server, this.id));\n    this.update(iconURL, tooltip, disabled);\n  }\n\n  update(iconURL?: string, tooltip?: string, disabled?: boolean): void {\n    if (typeof iconURL === 'string') {\n      this.toolbarButtonInternal.setBackgroundImage(iconURL);\n    }\n    if (typeof tooltip === 'string') {\n      this.toolbarButtonInternal.setTitle(tooltip);\n    }\n    if (typeof disabled === 'boolean') {\n      this.toolbarButtonInternal.setEnabled(!disabled);\n    }\n  }\n\n  toolbarButton(): UI.Toolbar.ToolbarButton {\n    return this.toolbarButtonInternal;\n  }\n}\n\nexport class ExtensionSidebarPane extends UI.View.SimpleView {\n  private readonly panelNameInternal: string;\n  private server: ExtensionServer;\n  private idInternal: string;\n  private extensionView?: ExtensionView;\n  private objectPropertiesView?: ExtensionNotifierView;\n  constructor(server: ExtensionServer, panelName: string, title: Platform.UIString.LocalizedString, id: string) {\n    super(title);\n    this.element.classList.add('fill');\n    this.panelNameInternal = panelName;\n    this.server = server;\n    this.idInternal = id;\n  }\n\n  id(): string {\n    return this.idInternal;\n  }\n\n  panelName(): string {\n    return this.panelNameInternal;\n  }\n\n  setObject(object: Object, title: string|undefined, callback: (arg0?: (string|null)|undefined) => void): void {\n    this.createObjectPropertiesView();\n    this.setObjectInternal(SDK.RemoteObject.RemoteObject.fromLocalObject(object), title, callback);\n  }\n\n  setExpression(\n      expression: string, title: string|undefined, evaluateOptions: Object|undefined, securityOrigin: string,\n      callback: (arg0?: (string|null)|undefined) => void): void {\n    this.createObjectPropertiesView();\n    this.server.evaluate(\n        expression, true, false, evaluateOptions, securityOrigin, this.onEvaluate.bind(this, title, callback));\n  }\n\n  setPage(url: Platform.DevToolsPath.UrlString): void {\n    if (this.objectPropertiesView) {\n      this.objectPropertiesView.detach();\n      delete this.objectPropertiesView;\n    }\n    if (this.extensionView) {\n      this.extensionView.detach(true);\n    }\n\n    this.extensionView = new ExtensionView(this.server, this.idInternal, url, 'extension fill');\n    this.extensionView.show(this.element);\n\n    if (!this.element.style.height) {\n      this.setHeight('150px');\n    }\n  }\n\n  setHeight(height: string): void {\n    this.element.style.height = height;\n  }\n\n  private onEvaluate(\n      title: string|undefined, callback: (arg0?: (string|null)|undefined) => void, error: string|null,\n      result: SDK.RemoteObject.RemoteObject|null, _wasThrown?: boolean): void {\n    if (error) {\n      callback(error.toString());\n    } else if (!result) {\n      callback();\n    } else {\n      this.setObjectInternal(result, title, callback);\n    }\n  }\n\n  private createObjectPropertiesView(): void {\n    if (this.objectPropertiesView) {\n      return;\n    }\n    if (this.extensionView) {\n      this.extensionView.detach(true);\n      delete this.extensionView;\n    }\n    this.objectPropertiesView = new ExtensionNotifierView(this.server, this.idInternal);\n    this.objectPropertiesView.show(this.element);\n  }\n\n  private setObjectInternal(\n      object: SDK.RemoteObject.RemoteObject, title: string|undefined,\n      callback: (arg0?: (string|null)|undefined) => void): void {\n    const objectPropertiesView = this.objectPropertiesView;\n    // This may only happen if setPage() was called while we were evaluating the expression.\n    if (!objectPropertiesView) {\n      callback('operation cancelled');\n      return;\n    }\n    objectPropertiesView.element.removeChildren();\n    void UI.UIUtils.Renderer.render(object, {title, editable: false}).then(result => {\n      if (!result) {\n        callback();\n        return;\n      }\n      const firstChild = result.tree && result.tree.firstChild();\n      if (firstChild) {\n        firstChild.expand();\n      }\n      objectPropertiesView.element.appendChild(result.node);\n      callback();\n    });\n  }\n}\n"],
  "mappings": "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",
  "names": []
}
