{
  "version": 3,
  "sources": ["../../../../../../front_end/models/emulation/DeviceModeModel.ts"],
  "sourcesContent": ["// Copyright 2015 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as Host from '../../core/host/host.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Root from '../../core/root/root.js';\nimport * as SDK from '../../core/sdk/sdk.js';\nimport * as Protocol from '../../generated/protocol.js';\nimport * as UI from '../../ui/legacy/legacy.js';\n\nimport type {EmulatedDevice, Mode} from './EmulatedDevices.js';\nimport {Horizontal, HorizontalSpanned, Vertical, VerticalSpanned} from './EmulatedDevices.js';\n\nconst UIStrings = {\n  /**\n  * @description Error message shown in the Devices settings pane when the user enters an invalid\n  * width for a custom device.\n  */\n  widthMustBeANumber: 'Width must be a number.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user has entered a width\n  * for a custom device that is too large.\n  * @example {9999} PH1\n  */\n  widthMustBeLessThanOrEqualToS: 'Width must be less than or equal to {PH1}.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user has entered a width\n  * for a custom device that is too small.\n  * @example {50} PH1\n  */\n  widthMustBeGreaterThanOrEqualToS: 'Width must be greater than or equal to {PH1}.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user enters an invalid\n  * height for a custom device.\n  */\n  heightMustBeANumber: 'Height must be a number.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user has entered a height\n  * for a custom device that is too large.\n  * @example {9999} PH1\n  */\n  heightMustBeLessThanOrEqualToS: 'Height must be less than or equal to {PH1}.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user has entered a height\n  * for a custom device that is too small.\n  * @example {50} PH1\n  */\n  heightMustBeGreaterThanOrEqualTo: 'Height must be greater than or equal to {PH1}.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user enters an invalid\n  * device pixel ratio for a custom device.\n  */\n  devicePixelRatioMustBeANumberOr: 'Device pixel ratio must be a number or blank.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user enters a device\n  * pixel ratio for a custom device that is too large.\n  * @example {10} PH1\n  */\n  devicePixelRatioMustBeLessThanOr: 'Device pixel ratio must be less than or equal to {PH1}.',\n  /**\n  * @description Error message shown in the Devices settings pane when the user enters a device\n  * pixel ratio for a custom device that is too small.\n  * @example {0} PH1\n  */\n  devicePixelRatioMustBeGreater: 'Device pixel ratio must be greater than or equal to {PH1}.',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/emulation/DeviceModeModel.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\n\nlet deviceModeModelInstance: DeviceModeModel;\n\nexport class DeviceModeModel extends Common.ObjectWrapper.ObjectWrapper<EventTypes> implements\n    SDK.TargetManager.SDKModelObserver<SDK.EmulationModel.EmulationModel> {\n  #screenRectInternal: Rect;\n  #visiblePageRectInternal: Rect;\n  #availableSize: UI.Geometry.Size;\n  #preferredSize: UI.Geometry.Size;\n  #initialized: boolean;\n  #appliedDeviceSizeInternal: UI.Geometry.Size;\n  #appliedDeviceScaleFactorInternal: number;\n  #appliedUserAgentTypeInternal: UA;\n  readonly #experimentDualScreenSupport: boolean;\n  readonly #webPlatformExperimentalFeaturesEnabledInternal: boolean;\n  readonly #scaleSettingInternal: Common.Settings.Setting<number>;\n  #scaleInternal: number;\n  #widthSetting: Common.Settings.Setting<number>;\n  #heightSetting: Common.Settings.Setting<number>;\n  #uaSettingInternal: Common.Settings.Setting<UA>;\n  readonly #deviceScaleFactorSettingInternal: Common.Settings.Setting<number>;\n  readonly #deviceOutlineSettingInternal: Common.Settings.Setting<boolean>;\n  readonly #toolbarControlsEnabledSettingInternal: Common.Settings.Setting<boolean>;\n  #typeInternal: Type;\n  #deviceInternal: EmulatedDevice|null;\n  #modeInternal: Mode|null;\n  #fitScaleInternal: number;\n  #touchEnabled: boolean;\n  #touchMobile: boolean;\n  #emulationModel: SDK.EmulationModel.EmulationModel|null;\n  #onModelAvailable: (() => void)|null;\n  #outlineRectInternal?: Rect;\n\n  private constructor() {\n    super();\n    this.#screenRectInternal = new Rect(0, 0, 1, 1);\n    this.#visiblePageRectInternal = new Rect(0, 0, 1, 1);\n    this.#availableSize = new UI.Geometry.Size(1, 1);\n    this.#preferredSize = new UI.Geometry.Size(1, 1);\n    this.#initialized = false;\n    this.#appliedDeviceSizeInternal = new UI.Geometry.Size(1, 1);\n    this.#appliedDeviceScaleFactorInternal = window.devicePixelRatio;\n    this.#appliedUserAgentTypeInternal = UA.Desktop;\n    this.#experimentDualScreenSupport = Root.Runtime.experiments.isEnabled('dualScreenSupport');\n    this.#webPlatformExperimentalFeaturesEnabledInternal = 'segments' in window.visualViewport;\n\n    this.#scaleSettingInternal = Common.Settings.Settings.instance().createSetting('emulation.deviceScale', 1);\n    // We've used to allow zero before.\n    if (!this.#scaleSettingInternal.get()) {\n      this.#scaleSettingInternal.set(1);\n    }\n    this.#scaleSettingInternal.addChangeListener(this.scaleSettingChanged, this);\n    this.#scaleInternal = 1;\n\n    this.#widthSetting = Common.Settings.Settings.instance().createSetting('emulation.deviceWidth', 400);\n    if (this.#widthSetting.get() < MinDeviceSize) {\n      this.#widthSetting.set(MinDeviceSize);\n    }\n    if (this.#widthSetting.get() > MaxDeviceSize) {\n      this.#widthSetting.set(MaxDeviceSize);\n    }\n    this.#widthSetting.addChangeListener(this.widthSettingChanged, this);\n\n    this.#heightSetting = Common.Settings.Settings.instance().createSetting('emulation.deviceHeight', 0);\n    if (this.#heightSetting.get() && this.#heightSetting.get() < MinDeviceSize) {\n      this.#heightSetting.set(MinDeviceSize);\n    }\n    if (this.#heightSetting.get() > MaxDeviceSize) {\n      this.#heightSetting.set(MaxDeviceSize);\n    }\n    this.#heightSetting.addChangeListener(this.heightSettingChanged, this);\n\n    this.#uaSettingInternal = Common.Settings.Settings.instance().createSetting('emulation.deviceUA', UA.Mobile);\n    this.#uaSettingInternal.addChangeListener(this.uaSettingChanged, this);\n    this.#deviceScaleFactorSettingInternal =\n        Common.Settings.Settings.instance().createSetting('emulation.deviceScaleFactor', 0);\n    this.#deviceScaleFactorSettingInternal.addChangeListener(this.deviceScaleFactorSettingChanged, this);\n\n    this.#deviceOutlineSettingInternal =\n        Common.Settings.Settings.instance().moduleSetting('emulation.showDeviceOutline');\n    this.#deviceOutlineSettingInternal.addChangeListener(this.deviceOutlineSettingChanged, this);\n\n    this.#toolbarControlsEnabledSettingInternal = Common.Settings.Settings.instance().createSetting(\n        'emulation.toolbarControlsEnabled', true, Common.Settings.SettingStorageType.Session);\n\n    this.#typeInternal = Type.None;\n    this.#deviceInternal = null;\n    this.#modeInternal = null;\n    this.#fitScaleInternal = 1;\n    this.#touchEnabled = false;\n    this.#touchMobile = false;\n\n    this.#emulationModel = null;\n    this.#onModelAvailable = null;\n    SDK.TargetManager.TargetManager.instance().observeModels(SDK.EmulationModel.EmulationModel, this);\n  }\n\n  static instance(opts: {\n    forceNew: null,\n  } = {forceNew: null}): DeviceModeModel {\n    if (!deviceModeModelInstance || opts.forceNew) {\n      deviceModeModelInstance = new DeviceModeModel();\n    }\n\n    return deviceModeModelInstance;\n  }\n\n  static widthValidator(value: string): {\n    valid: boolean,\n    errorMessage: (string|undefined),\n  } {\n    let valid = false;\n    let errorMessage;\n\n    if (!/^[\\d]+$/.test(value)) {\n      errorMessage = i18nString(UIStrings.widthMustBeANumber);\n    } else if (Number(value) > MaxDeviceSize) {\n      errorMessage = i18nString(UIStrings.widthMustBeLessThanOrEqualToS, {PH1: MaxDeviceSize});\n    } else if (Number(value) < MinDeviceSize) {\n      errorMessage = i18nString(UIStrings.widthMustBeGreaterThanOrEqualToS, {PH1: MinDeviceSize});\n    } else {\n      valid = true;\n    }\n\n    return {valid, errorMessage};\n  }\n\n  static heightValidator(value: string): {\n    valid: boolean,\n    errorMessage: (string|undefined),\n  } {\n    let valid = false;\n    let errorMessage;\n\n    if (!/^[\\d]+$/.test(value)) {\n      errorMessage = i18nString(UIStrings.heightMustBeANumber);\n    } else if (Number(value) > MaxDeviceSize) {\n      errorMessage = i18nString(UIStrings.heightMustBeLessThanOrEqualToS, {PH1: MaxDeviceSize});\n    } else if (Number(value) < MinDeviceSize) {\n      errorMessage = i18nString(UIStrings.heightMustBeGreaterThanOrEqualTo, {PH1: MinDeviceSize});\n    } else {\n      valid = true;\n    }\n\n    return {valid, errorMessage};\n  }\n\n  static scaleValidator(value: string): {\n    valid: boolean,\n    errorMessage: (string|undefined),\n  } {\n    let valid = false;\n    let errorMessage;\n    const parsedValue = Number(value.trim());\n\n    if (!value) {\n      valid = true;\n    } else if (Number.isNaN(parsedValue)) {\n      errorMessage = i18nString(UIStrings.devicePixelRatioMustBeANumberOr);\n    } else if (Number(value) > MaxDeviceScaleFactor) {\n      errorMessage = i18nString(UIStrings.devicePixelRatioMustBeLessThanOr, {PH1: MaxDeviceScaleFactor});\n    } else if (Number(value) < MinDeviceScaleFactor) {\n      errorMessage = i18nString(UIStrings.devicePixelRatioMustBeGreater, {PH1: MinDeviceScaleFactor});\n    } else {\n      valid = true;\n    }\n\n    return {valid, errorMessage};\n  }\n\n  get scaleSettingInternal(): Common.Settings.Setting<number> {\n    return this.#scaleSettingInternal;\n  }\n\n  setAvailableSize(availableSize: UI.Geometry.Size, preferredSize: UI.Geometry.Size): void {\n    this.#availableSize = availableSize;\n    this.#preferredSize = preferredSize;\n    this.#initialized = true;\n    this.calculateAndEmulate(false);\n  }\n\n  emulate(type: Type, device: EmulatedDevice|null, mode: Mode|null, scale?: number): void {\n    const resetPageScaleFactor =\n        this.#typeInternal !== type || this.#deviceInternal !== device || this.#modeInternal !== mode;\n    this.#typeInternal = type;\n\n    if (type === Type.Device && device && mode) {\n      console.assert(Boolean(device) && Boolean(mode), 'Must pass device and mode for device emulation');\n      this.#modeInternal = mode;\n      this.#deviceInternal = device;\n      if (this.#initialized) {\n        const orientation = device.orientationByName(mode.orientation);\n        this.#scaleSettingInternal.set(\n            scale ||\n            this.calculateFitScale(orientation.width, orientation.height, this.currentOutline(), this.currentInsets()));\n      }\n    } else {\n      this.#deviceInternal = null;\n      this.#modeInternal = null;\n    }\n\n    if (type !== Type.None) {\n      Host.userMetrics.actionTaken(Host.UserMetrics.Action.DeviceModeEnabled);\n    }\n    this.calculateAndEmulate(resetPageScaleFactor);\n  }\n\n  setWidth(width: number): void {\n    const max = Math.min(MaxDeviceSize, this.preferredScaledWidth());\n    width = Math.max(Math.min(width, max), 1);\n    this.#widthSetting.set(width);\n  }\n\n  setWidthAndScaleToFit(width: number): void {\n    width = Math.max(Math.min(width, MaxDeviceSize), 1);\n    this.#scaleSettingInternal.set(this.calculateFitScale(width, this.#heightSetting.get()));\n    this.#widthSetting.set(width);\n  }\n\n  setHeight(height: number): void {\n    const max = Math.min(MaxDeviceSize, this.preferredScaledHeight());\n    height = Math.max(Math.min(height, max), 0);\n    if (height === this.preferredScaledHeight()) {\n      height = 0;\n    }\n    this.#heightSetting.set(height);\n  }\n\n  setHeightAndScaleToFit(height: number): void {\n    height = Math.max(Math.min(height, MaxDeviceSize), 0);\n    this.#scaleSettingInternal.set(this.calculateFitScale(this.#widthSetting.get(), height));\n    this.#heightSetting.set(height);\n  }\n\n  setScale(scale: number): void {\n    this.#scaleSettingInternal.set(scale);\n  }\n\n  device(): EmulatedDevice|null {\n    return this.#deviceInternal;\n  }\n\n  mode(): Mode|null {\n    return this.#modeInternal;\n  }\n\n  type(): Type {\n    return this.#typeInternal;\n  }\n\n  screenImage(): string {\n    return (this.#deviceInternal && this.#modeInternal) ? this.#deviceInternal.modeImage(this.#modeInternal) : '';\n  }\n\n  outlineImage(): string {\n    return (this.#deviceInternal && this.#modeInternal && this.#deviceOutlineSettingInternal.get()) ?\n        this.#deviceInternal.outlineImage(this.#modeInternal) :\n        '';\n  }\n\n  outlineRect(): Rect|null {\n    return this.#outlineRectInternal || null;\n  }\n\n  screenRect(): Rect {\n    return this.#screenRectInternal;\n  }\n\n  visiblePageRect(): Rect {\n    return this.#visiblePageRectInternal;\n  }\n\n  scale(): number {\n    return this.#scaleInternal;\n  }\n\n  fitScale(): number {\n    return this.#fitScaleInternal;\n  }\n\n  appliedDeviceSize(): UI.Geometry.Size {\n    return this.#appliedDeviceSizeInternal;\n  }\n\n  appliedDeviceScaleFactor(): number {\n    return this.#appliedDeviceScaleFactorInternal;\n  }\n\n  appliedUserAgentType(): UA {\n    return this.#appliedUserAgentTypeInternal;\n  }\n\n  isFullHeight(): boolean {\n    return !this.#heightSetting.get();\n  }\n\n  private isMobile(): boolean {\n    switch (this.#typeInternal) {\n      case Type.Device:\n        return this.#deviceInternal ? this.#deviceInternal.mobile() : false;\n      case Type.None:\n        return false;\n      case Type.Responsive:\n        return this.#uaSettingInternal.get() === UA.Mobile || this.#uaSettingInternal.get() === UA.MobileNoTouch;\n    }\n    return false;\n  }\n\n  enabledSetting(): Common.Settings.Setting<boolean> {\n    return Common.Settings.Settings.instance().createSetting('emulation.showDeviceMode', false);\n  }\n\n  scaleSetting(): Common.Settings.Setting<number> {\n    return this.#scaleSettingInternal;\n  }\n\n  uaSetting(): Common.Settings.Setting<UA> {\n    return this.#uaSettingInternal;\n  }\n\n  deviceScaleFactorSetting(): Common.Settings.Setting<number> {\n    return this.#deviceScaleFactorSettingInternal;\n  }\n\n  deviceOutlineSetting(): Common.Settings.Setting<boolean> {\n    return this.#deviceOutlineSettingInternal;\n  }\n\n  toolbarControlsEnabledSetting(): Common.Settings.Setting<boolean> {\n    return this.#toolbarControlsEnabledSettingInternal;\n  }\n\n  reset(): void {\n    this.#deviceScaleFactorSettingInternal.set(0);\n    this.#scaleSettingInternal.set(1);\n    this.setWidth(400);\n    this.setHeight(0);\n    this.#uaSettingInternal.set(UA.Mobile);\n  }\n\n  modelAdded(emulationModel: SDK.EmulationModel.EmulationModel): void {\n    if (!this.#emulationModel && emulationModel.supportsDeviceEmulation()) {\n      this.#emulationModel = emulationModel;\n      if (this.#onModelAvailable) {\n        const callback = this.#onModelAvailable;\n        this.#onModelAvailable = null;\n        callback();\n      }\n      const resourceTreeModel = emulationModel.target().model(SDK.ResourceTreeModel.ResourceTreeModel);\n      if (resourceTreeModel) {\n        resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.FrameResized, this.onFrameChange, this);\n        resourceTreeModel.addEventListener(SDK.ResourceTreeModel.Events.FrameNavigated, this.onFrameChange, this);\n      }\n    } else {\n      void emulationModel.emulateTouch(this.#touchEnabled, this.#touchMobile);\n    }\n  }\n\n  modelRemoved(emulationModel: SDK.EmulationModel.EmulationModel): void {\n    if (this.#emulationModel === emulationModel) {\n      this.#emulationModel = null;\n    }\n  }\n\n  inspectedURL(): string|null {\n    return this.#emulationModel ? this.#emulationModel.target().inspectedURL() : null;\n  }\n\n  private onFrameChange(): void {\n    const overlayModel = this.#emulationModel ? this.#emulationModel.overlayModel() : null;\n    if (!overlayModel) {\n      return;\n    }\n\n    this.showHingeIfApplicable(overlayModel);\n  }\n\n  private scaleSettingChanged(): void {\n    this.calculateAndEmulate(false);\n  }\n\n  private widthSettingChanged(): void {\n    this.calculateAndEmulate(false);\n  }\n\n  private heightSettingChanged(): void {\n    this.calculateAndEmulate(false);\n  }\n\n  private uaSettingChanged(): void {\n    this.calculateAndEmulate(true);\n  }\n\n  private deviceScaleFactorSettingChanged(): void {\n    this.calculateAndEmulate(false);\n  }\n\n  private deviceOutlineSettingChanged(): void {\n    this.calculateAndEmulate(false);\n  }\n\n  private preferredScaledWidth(): number {\n    return Math.floor(this.#preferredSize.width / (this.#scaleSettingInternal.get() || 1));\n  }\n\n  private preferredScaledHeight(): number {\n    return Math.floor(this.#preferredSize.height / (this.#scaleSettingInternal.get() || 1));\n  }\n\n  private currentOutline(): Insets {\n    let outline: Insets = new Insets(0, 0, 0, 0);\n    if (this.#typeInternal !== Type.Device || !this.#deviceInternal || !this.#modeInternal) {\n      return outline;\n    }\n    const orientation = this.#deviceInternal.orientationByName(this.#modeInternal.orientation);\n    if (this.#deviceOutlineSettingInternal.get()) {\n      outline = orientation.outlineInsets || outline;\n    }\n    return outline;\n  }\n\n  private currentInsets(): Insets {\n    if (this.#typeInternal !== Type.Device || !this.#modeInternal) {\n      return new Insets(0, 0, 0, 0);\n    }\n    return this.#modeInternal.insets;\n  }\n\n  private getScreenOrientationType(): Protocol.Emulation.ScreenOrientationType {\n    if (!this.#modeInternal) {\n      throw new Error('Mode required to get orientation type.');\n    }\n    switch (this.#modeInternal.orientation) {\n      case VerticalSpanned:\n      case Vertical:\n        return Protocol.Emulation.ScreenOrientationType.PortraitPrimary;\n      case HorizontalSpanned:\n      case Horizontal:\n      default:\n        return Protocol.Emulation.ScreenOrientationType.LandscapePrimary;\n    }\n  }\n\n  private calculateAndEmulate(resetPageScaleFactor: boolean): void {\n    if (!this.#emulationModel) {\n      this.#onModelAvailable = this.calculateAndEmulate.bind(this, resetPageScaleFactor);\n    }\n    const mobile = this.isMobile();\n    const overlayModel = this.#emulationModel ? this.#emulationModel.overlayModel() : null;\n    if (overlayModel) {\n      this.showHingeIfApplicable(overlayModel);\n    }\n    if (this.#typeInternal === Type.Device && this.#deviceInternal && this.#modeInternal) {\n      const orientation = this.#deviceInternal.orientationByName(this.#modeInternal.orientation);\n      const outline = this.currentOutline();\n      const insets = this.currentInsets();\n      this.#fitScaleInternal = this.calculateFitScale(orientation.width, orientation.height, outline, insets);\n      if (mobile) {\n        this.#appliedUserAgentTypeInternal = this.#deviceInternal.touch() ? UA.Mobile : UA.MobileNoTouch;\n      } else {\n        this.#appliedUserAgentTypeInternal = this.#deviceInternal.touch() ? UA.DesktopTouch : UA.Desktop;\n      }\n      this.applyDeviceMetrics(\n          new UI.Geometry.Size(orientation.width, orientation.height), insets, outline,\n          this.#scaleSettingInternal.get(), this.#deviceInternal.deviceScaleFactor, mobile,\n          this.getScreenOrientationType(), resetPageScaleFactor, this.#webPlatformExperimentalFeaturesEnabledInternal);\n      this.applyUserAgent(this.#deviceInternal.userAgent, this.#deviceInternal.userAgentMetadata);\n      this.applyTouch(this.#deviceInternal.touch(), mobile);\n    } else if (this.#typeInternal === Type.None) {\n      this.#fitScaleInternal = this.calculateFitScale(this.#availableSize.width, this.#availableSize.height);\n      this.#appliedUserAgentTypeInternal = UA.Desktop;\n      this.applyDeviceMetrics(\n          this.#availableSize, new Insets(0, 0, 0, 0), new Insets(0, 0, 0, 0), 1, 0, mobile, null,\n          resetPageScaleFactor);\n      this.applyUserAgent('', null);\n      this.applyTouch(false, false);\n    } else if (this.#typeInternal === Type.Responsive) {\n      let screenWidth = this.#widthSetting.get();\n      if (!screenWidth || screenWidth > this.preferredScaledWidth()) {\n        screenWidth = this.preferredScaledWidth();\n      }\n      let screenHeight = this.#heightSetting.get();\n      if (!screenHeight || screenHeight > this.preferredScaledHeight()) {\n        screenHeight = this.preferredScaledHeight();\n      }\n      const defaultDeviceScaleFactor = mobile ? defaultMobileScaleFactor : 0;\n      this.#fitScaleInternal = this.calculateFitScale(this.#widthSetting.get(), this.#heightSetting.get());\n      this.#appliedUserAgentTypeInternal = this.#uaSettingInternal.get();\n      this.applyDeviceMetrics(\n          new UI.Geometry.Size(screenWidth, screenHeight), new Insets(0, 0, 0, 0), new Insets(0, 0, 0, 0),\n          this.#scaleSettingInternal.get(), this.#deviceScaleFactorSettingInternal.get() || defaultDeviceScaleFactor,\n          mobile,\n          screenHeight >= screenWidth ? Protocol.Emulation.ScreenOrientationType.PortraitPrimary :\n                                        Protocol.Emulation.ScreenOrientationType.LandscapePrimary,\n          resetPageScaleFactor);\n      this.applyUserAgent(mobile ? defaultMobileUserAgent : '', mobile ? defaultMobileUserAgentMetadata : null);\n      this.applyTouch(\n          this.#uaSettingInternal.get() === UA.DesktopTouch || this.#uaSettingInternal.get() === UA.Mobile,\n          this.#uaSettingInternal.get() === UA.Mobile);\n    }\n\n    if (overlayModel) {\n      overlayModel.setShowViewportSizeOnResize(this.#typeInternal === Type.None);\n    }\n    this.dispatchEventToListeners(Events.Updated);\n  }\n\n  private calculateFitScale(screenWidth: number, screenHeight: number, outline?: Insets, insets?: Insets): number {\n    const outlineWidth = outline ? outline.left + outline.right : 0;\n    const outlineHeight = outline ? outline.top + outline.bottom : 0;\n    const insetsWidth = insets ? insets.left + insets.right : 0;\n    const insetsHeight = insets ? insets.top + insets.bottom : 0;\n    let scale = Math.min(\n        screenWidth ? this.#preferredSize.width / (screenWidth + outlineWidth) : 1,\n        screenHeight ? this.#preferredSize.height / (screenHeight + outlineHeight) : 1);\n    scale = Math.min(Math.floor(scale * 100), 100);\n\n    let sharpScale = scale;\n    while (sharpScale > scale * 0.7) {\n      let sharp = true;\n      if (screenWidth) {\n        sharp = sharp && Number.isInteger((screenWidth - insetsWidth) * sharpScale / 100);\n      }\n      if (screenHeight) {\n        sharp = sharp && Number.isInteger((screenHeight - insetsHeight) * sharpScale / 100);\n      }\n      if (sharp) {\n        return sharpScale / 100;\n      }\n      sharpScale -= 1;\n    }\n    return scale / 100;\n  }\n\n  setSizeAndScaleToFit(width: number, height: number): void {\n    this.#scaleSettingInternal.set(this.calculateFitScale(width, height));\n    this.setWidth(width);\n    this.setHeight(height);\n  }\n\n  private applyUserAgent(userAgent: string, userAgentMetadata: Protocol.Emulation.UserAgentMetadata|null): void {\n    SDK.NetworkManager.MultitargetNetworkManager.instance().setUserAgentOverride(userAgent, userAgentMetadata);\n  }\n\n  private applyDeviceMetrics(\n      screenSize: UI.Geometry.Size, insets: Insets, outline: Insets, scale: number, deviceScaleFactor: number,\n      mobile: boolean, screenOrientation: Protocol.Emulation.ScreenOrientationType|null, resetPageScaleFactor: boolean,\n      forceMetricsOverride: boolean|undefined = false): void {\n    screenSize.width = Math.max(1, Math.floor(screenSize.width));\n    screenSize.height = Math.max(1, Math.floor(screenSize.height));\n\n    let pageWidth: 0|number = screenSize.width - insets.left - insets.right;\n    let pageHeight: 0|number = screenSize.height - insets.top - insets.bottom;\n\n    const positionX = insets.left;\n    const positionY = insets.top;\n    const screenOrientationAngle =\n        screenOrientation === Protocol.Emulation.ScreenOrientationType.LandscapePrimary ? 90 : 0;\n\n    this.#appliedDeviceSizeInternal = screenSize;\n    this.#appliedDeviceScaleFactorInternal = deviceScaleFactor || window.devicePixelRatio;\n    this.#screenRectInternal = new Rect(\n        Math.max(0, (this.#availableSize.width - screenSize.width * scale) / 2), outline.top * scale,\n        screenSize.width * scale, screenSize.height * scale);\n    this.#outlineRectInternal = new Rect(\n        this.#screenRectInternal.left - outline.left * scale, 0,\n        (outline.left + screenSize.width + outline.right) * scale,\n        (outline.top + screenSize.height + outline.bottom) * scale);\n    this.#visiblePageRectInternal = new Rect(\n        positionX * scale, positionY * scale,\n        Math.min(pageWidth * scale, this.#availableSize.width - this.#screenRectInternal.left - positionX * scale),\n        Math.min(pageHeight * scale, this.#availableSize.height - this.#screenRectInternal.top - positionY * scale));\n    this.#scaleInternal = scale;\n    if (!forceMetricsOverride) {\n      // When sending displayFeature, we cannot use the optimization below due to backend restrictions.\n      if (scale === 1 && this.#availableSize.width >= screenSize.width &&\n          this.#availableSize.height >= screenSize.height) {\n        // When we have enough space, no page size override is required. This will speed things up and remove lag.\n        pageWidth = 0;\n        pageHeight = 0;\n      }\n      if (this.#visiblePageRectInternal.width === pageWidth * scale &&\n          this.#visiblePageRectInternal.height === pageHeight * scale && Number.isInteger(pageWidth * scale) &&\n          Number.isInteger(pageHeight * scale)) {\n        // When we only have to apply scale, do not resize the page. This will speed things up and remove lag.\n        pageWidth = 0;\n        pageHeight = 0;\n      }\n    }\n\n    if (!this.#emulationModel) {\n      return;\n    }\n\n    if (resetPageScaleFactor) {\n      void this.#emulationModel.resetPageScaleFactor();\n    }\n    if (pageWidth || pageHeight || mobile || deviceScaleFactor || scale !== 1 || screenOrientation ||\n        forceMetricsOverride) {\n      const metrics: Protocol.Emulation.SetDeviceMetricsOverrideRequest = {\n        width: pageWidth,\n        height: pageHeight,\n        deviceScaleFactor: deviceScaleFactor,\n        mobile: mobile,\n        scale: scale,\n        screenWidth: screenSize.width,\n        screenHeight: screenSize.height,\n        positionX: positionX,\n        positionY: positionY,\n        dontSetVisibleSize: true,\n        displayFeature: undefined,\n        screenOrientation: undefined,\n      };\n      const displayFeature = this.getDisplayFeature();\n      if (displayFeature) {\n        metrics.displayFeature = displayFeature;\n      }\n      if (screenOrientation) {\n        metrics.screenOrientation = {type: screenOrientation, angle: screenOrientationAngle};\n      }\n      void this.#emulationModel.emulateDevice(metrics);\n    } else {\n      void this.#emulationModel.emulateDevice(null);\n    }\n  }\n\n  exitHingeMode(): void {\n    const overlayModel = this.#emulationModel ? this.#emulationModel.overlayModel() : null;\n    if (overlayModel) {\n      overlayModel.showHingeForDualScreen(null);\n    }\n  }\n\n  webPlatformExperimentalFeaturesEnabled(): boolean {\n    return this.#webPlatformExperimentalFeaturesEnabledInternal;\n  }\n\n  shouldReportDisplayFeature(): boolean {\n    return this.#webPlatformExperimentalFeaturesEnabledInternal && this.#experimentDualScreenSupport;\n  }\n\n  async captureScreenshot(fullSize: boolean, clip?: Protocol.Page.Viewport): Promise<string|null> {\n    const screenCaptureModel =\n        this.#emulationModel ? this.#emulationModel.target().model(SDK.ScreenCaptureModel.ScreenCaptureModel) : null;\n    if (!screenCaptureModel) {\n      return null;\n    }\n\n    const overlayModel = this.#emulationModel ? this.#emulationModel.overlayModel() : null;\n    if (overlayModel) {\n      overlayModel.setShowViewportSizeOnResize(false);\n    }\n\n    // Define the right clipping area for fullsize screenshots.\n    if (fullSize) {\n      const metrics = await screenCaptureModel.fetchLayoutMetrics();\n      if (!metrics) {\n        return null;\n      }\n\n      // Cap the height to not hit the GPU limit.\n      const contentHeight = Math.min((1 << 14), metrics.contentHeight);\n      clip = {x: 0, y: 0, width: Math.floor(metrics.contentWidth), height: Math.floor(contentHeight), scale: 1};\n    }\n    const screenshot =\n        await screenCaptureModel.captureScreenshot(Protocol.Page.CaptureScreenshotRequestFormat.Png, 100, clip);\n\n    const deviceMetrics: Protocol.Page.SetDeviceMetricsOverrideRequest = {\n      width: 0,\n      height: 0,\n      deviceScaleFactor: 0,\n      mobile: false,\n    };\n    if (fullSize && this.#emulationModel) {\n      if (this.#deviceInternal && this.#modeInternal) {\n        const orientation = this.#deviceInternal.orientationByName(this.#modeInternal.orientation);\n        deviceMetrics.width = orientation.width;\n        deviceMetrics.height = orientation.height;\n        const dispFeature = this.getDisplayFeature();\n        if (dispFeature) {\n          // @ts-ignore: displayFeature isn't in protocol.d.ts but is an\n          // experimental flag:\n          // https://chromedevtools.github.io/devtools-protocol/tot/Emulation/#method-setDeviceMetricsOverride\n          deviceMetrics.displayFeature = dispFeature;\n        }\n      } else {\n        deviceMetrics.width = 0;\n        deviceMetrics.height = 0;\n      }\n      await this.#emulationModel.emulateDevice(deviceMetrics);\n    }\n    this.calculateAndEmulate(false);\n    return screenshot;\n  }\n\n  private applyTouch(touchEnabled: boolean, mobile: boolean): void {\n    this.#touchEnabled = touchEnabled;\n    this.#touchMobile = mobile;\n    for (const emulationModel of SDK.TargetManager.TargetManager.instance().models(SDK.EmulationModel.EmulationModel)) {\n      void emulationModel.emulateTouch(touchEnabled, mobile);\n    }\n  }\n\n  private showHingeIfApplicable(overlayModel: SDK.OverlayModel.OverlayModel): void {\n    const orientation = (this.#deviceInternal && this.#modeInternal) ?\n        this.#deviceInternal.orientationByName(this.#modeInternal.orientation) :\n        null;\n    if (this.#experimentDualScreenSupport && orientation && orientation.hinge) {\n      overlayModel.showHingeForDualScreen(orientation.hinge);\n      return;\n    }\n\n    overlayModel.showHingeForDualScreen(null);\n  }\n\n  private getDisplayFeatureOrientation(): Protocol.Emulation.DisplayFeatureOrientation {\n    if (!this.#modeInternal) {\n      throw new Error('Mode required to get display feature orientation.');\n    }\n    switch (this.#modeInternal.orientation) {\n      case VerticalSpanned:\n      case Vertical:\n        return Protocol.Emulation.DisplayFeatureOrientation.Vertical;\n      case HorizontalSpanned:\n      case Horizontal:\n      default:\n        return Protocol.Emulation.DisplayFeatureOrientation.Horizontal;\n    }\n  }\n\n  private getDisplayFeature(): Protocol.Emulation.DisplayFeature|null {\n    if (!this.shouldReportDisplayFeature()) {\n      return null;\n    }\n\n    if (!this.#deviceInternal || !this.#modeInternal ||\n        (this.#modeInternal.orientation !== VerticalSpanned && this.#modeInternal.orientation !== HorizontalSpanned)) {\n      return null;\n    }\n\n    const orientation = this.#deviceInternal.orientationByName(this.#modeInternal.orientation);\n    if (!orientation || !orientation.hinge) {\n      return null;\n    }\n\n    const hinge = orientation.hinge;\n    return {\n      orientation: this.getDisplayFeatureOrientation(),\n      offset: (this.#modeInternal.orientation === VerticalSpanned) ? hinge.x : hinge.y,\n      maskLength: (this.#modeInternal.orientation === VerticalSpanned) ? hinge.width : hinge.height,\n    };\n  }\n}\n\nexport class Insets {\n  constructor(public left: number, public top: number, public right: number, public bottom: number) {\n  }\n\n  isEqual(insets: Insets|null): boolean {\n    return insets !== null && this.left === insets.left && this.top === insets.top && this.right === insets.right &&\n        this.bottom === insets.bottom;\n  }\n}\n\nexport class Rect {\n  constructor(public left: number, public top: number, public width: number, public height: number) {\n  }\n\n  isEqual(rect: Rect|null): boolean {\n    return rect !== null && this.left === rect.left && this.top === rect.top && this.width === rect.width &&\n        this.height === rect.height;\n  }\n\n  scale(scale: number): Rect {\n    return new Rect(this.left * scale, this.top * scale, this.width * scale, this.height * scale);\n  }\n\n  relativeTo(origin: Rect): Rect {\n    return new Rect(this.left - origin.left, this.top - origin.top, this.width, this.height);\n  }\n\n  rebaseTo(origin: Rect): Rect {\n    return new Rect(this.left + origin.left, this.top + origin.top, this.width, this.height);\n  }\n}\n\nexport const enum Events {\n  Updated = 'Updated',\n}\n\nexport type EventTypes = {\n  [Events.Updated]: void,\n};\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum Type {\n  None = 'None',\n  Responsive = 'Responsive',\n  Device = 'Device',\n}\n\n// TODO(crbug.com/1167717): Make this a const enum again\n// eslint-disable-next-line rulesdir/const_enum\nexport enum UA {\n  // TODO(crbug.com/1136655): This enum is used for both display and code functionality.\n  // we should refactor this so localization of these strings only happens for user display.\n  Mobile = 'Mobile',\n  MobileNoTouch = 'Mobile (no touch)',\n  Desktop = 'Desktop',\n  DesktopTouch = 'Desktop (touch)',\n}\n\nexport const MinDeviceSize = 50;\nexport const MaxDeviceSize = 9999;\nexport const MinDeviceScaleFactor = 0;\nexport const MaxDeviceScaleFactor = 10;\nexport const MaxDeviceNameLength = 50;\n\nconst mobileUserAgent =\n    'Mozilla/5.0 (Linux; Android 6.0; Nexus 5 Build/MRA58N) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/%s Mobile Safari/537.36';\nconst defaultMobileUserAgent =\n    SDK.NetworkManager.MultitargetNetworkManager.patchUserAgentWithChromeVersion(mobileUserAgent);\n\nconst defaultMobileUserAgentMetadata = {\n  platform: 'Android',\n  platformVersion: '6.0',\n  architecture: '',\n  model: 'Nexus 5',\n  mobile: true,\n};\nexport const defaultMobileScaleFactor = 2;\n"],
  "mappings": "AAIA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AAEA,MAAM,YAAY;AAAA,EAKhB,oBAAoB;AAAA,EAMpB,+BAA+B;AAAA,EAM/B,kCAAkC;AAAA,EAKlC,qBAAqB;AAAA,EAMrB,gCAAgC;AAAA,EAMhC,kCAAkC;AAAA,EAKlC,iCAAiC;AAAA,EAMjC,kCAAkC;AAAA,EAMlC,+BAA+B;AAAA;AAEjC,MAAM,OAAO,KAAK,KAAK,kBAAkB,uCAAuC;AAChF,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AAEhE,IAAI;AAEG,qCAA8B,OAAO,cAAc,cACgB;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,EA6BhE,cAAc;AACpB;AACA,+BAA2B,IAAI,KAAK,GAAG,GAAG,GAAG;AAC7C,oCAAgC,IAAI,KAAK,GAAG,GAAG,GAAG;AAClD,0BAAsB,IAAI,GAAG,SAAS,KAAK,GAAG;AAC9C,0BAAsB,IAAI,GAAG,SAAS,KAAK,GAAG;AAC9C,wBAAoB;AACpB,sCAAkC,IAAI,GAAG,SAAS,KAAK,GAAG;AAC1D,6CAAyC,OAAO;AAChD,yCAAqC,GAAG;AACxC,wCAAoC,KAAK,QAAQ,YAAY,UAAU;AACvE,2DAAuD,cAAc,OAAO;AAE5E,iCAA6B,OAAO,SAAS,SAAS,WAAW,cAAc,yBAAyB;AAExG,QAAI,CAAC,2BAA2B,OAAO;AACrC,iCAA2B,IAAI;AAAA;AAEjC,+BAA2B,kBAAkB,KAAK,qBAAqB;AACvE,0BAAsB;AAEtB,yBAAqB,OAAO,SAAS,SAAS,WAAW,cAAc,yBAAyB;AAChG,QAAI,mBAAmB,QAAQ,eAAe;AAC5C,yBAAmB,IAAI;AAAA;AAEzB,QAAI,mBAAmB,QAAQ,eAAe;AAC5C,yBAAmB,IAAI;AAAA;AAEzB,uBAAmB,kBAAkB,KAAK,qBAAqB;AAE/D,0BAAsB,OAAO,SAAS,SAAS,WAAW,cAAc,0BAA0B;AAClG,QAAI,oBAAoB,SAAS,oBAAoB,QAAQ,eAAe;AAC1E,0BAAoB,IAAI;AAAA;AAE1B,QAAI,oBAAoB,QAAQ,eAAe;AAC7C,0BAAoB,IAAI;AAAA;AAE1B,wBAAoB,kBAAkB,KAAK,sBAAsB;AAEjE,8BAA0B,OAAO,SAAS,SAAS,WAAW,cAAc,sBAAsB,GAAG;AACrG,4BAAwB,kBAAkB,KAAK,kBAAkB;AACjE,6CACI,OAAO,SAAS,SAAS,WAAW,cAAc,+BAA+B;AACrF,2CAAuC,kBAAkB,KAAK,iCAAiC;AAE/F,yCACI,OAAO,SAAS,SAAS,WAAW,cAAc;AACtD,uCAAmC,kBAAkB,KAAK,6BAA6B;AAEvF,kDAA8C,OAAO,SAAS,SAAS,WAAW,cAC9E,oCAAoC,MAAM,OAAO,SAAS,mBAAmB;AAEjF,yBAAqB,KAAK;AAC1B,2BAAuB;AACvB,yBAAqB;AACrB,6BAAyB;AACzB,yBAAqB;AACrB,wBAAoB;AAEpB,2BAAuB;AACvB,6BAAyB;AACzB,QAAI,cAAc,cAAc,WAAW,cAAc,IAAI,eAAe,gBAAgB;AAAA;AAAA,SAGvF,SAAS,OAEZ,EAAC,UAAU,QAAwB;AACrC,QAAI,CAAC,2BAA2B,KAAK,UAAU;AAC7C,gCAA0B,IAAI;AAAA;AAGhC,WAAO;AAAA;AAAA,SAGF,eAAe,OAGpB;AACA,QAAI,QAAQ;AACZ,QAAI;AAEJ,QAAI,CAAC,UAAU,KAAK,QAAQ;AAC1B,qBAAe,WAAW,UAAU;AAAA,eAC3B,OAAO,SAAS,eAAe;AACxC,qBAAe,WAAW,UAAU,+BAA+B,EAAC,KAAK;AAAA,eAChE,OAAO,SAAS,eAAe;AACxC,qBAAe,WAAW,UAAU,kCAAkC,EAAC,KAAK;AAAA,WACvE;AACL,cAAQ;AAAA;AAGV,WAAO,EAAC,OAAO;AAAA;AAAA,SAGV,gBAAgB,OAGrB;AACA,QAAI,QAAQ;AACZ,QAAI;AAEJ,QAAI,CAAC,UAAU,KAAK,QAAQ;AAC1B,qBAAe,WAAW,UAAU;AAAA,eAC3B,OAAO,SAAS,eAAe;AACxC,qBAAe,WAAW,UAAU,gCAAgC,EAAC,KAAK;AAAA,eACjE,OAAO,SAAS,eAAe;AACxC,qBAAe,WAAW,UAAU,kCAAkC,EAAC,KAAK;AAAA,WACvE;AACL,cAAQ;AAAA;AAGV,WAAO,EAAC,OAAO;AAAA;AAAA,SAGV,eAAe,OAGpB;AACA,QAAI,QAAQ;AACZ,QAAI;AACJ,UAAM,cAAc,OAAO,MAAM;AAEjC,QAAI,CAAC,OAAO;AACV,cAAQ;AAAA,eACC,OAAO,MAAM,cAAc;AACpC,qBAAe,WAAW,UAAU;AAAA,eAC3B,OAAO,SAAS,sBAAsB;AAC/C,qBAAe,WAAW,UAAU,kCAAkC,EAAC,KAAK;AAAA,eACnE,OAAO,SAAS,sBAAsB;AAC/C,qBAAe,WAAW,UAAU,+BAA+B,EAAC,KAAK;AAAA,WACpE;AACL,cAAQ;AAAA;AAGV,WAAO,EAAC,OAAO;AAAA;AAAA,MAGb,uBAAwD;AAC1D,WAAO;AAAA;AAAA,EAGT,iBAAiB,eAAiC,eAAuC;AACvF,0BAAsB;AACtB,0BAAsB;AACtB,wBAAoB;AACpB,SAAK,oBAAoB;AAAA;AAAA,EAG3B,QAAQ,MAAY,QAA6B,MAAiB,OAAsB;AACtF,UAAM,uBACF,uBAAuB,QAAQ,yBAAyB,UAAU,uBAAuB;AAC7F,yBAAqB;AAErB,QAAI,SAAS,KAAK,UAAU,UAAU,MAAM;AAC1C,cAAQ,OAAO,QAAQ,WAAW,QAAQ,OAAO;AACjD,2BAAqB;AACrB,6BAAuB;AACvB,UAAI,mBAAmB;AACrB,cAAM,cAAc,OAAO,kBAAkB,KAAK;AAClD,mCAA2B,IACvB,SACA,KAAK,kBAAkB,YAAY,OAAO,YAAY,QAAQ,KAAK,kBAAkB,KAAK;AAAA;AAAA,WAE3F;AACL,6BAAuB;AACvB,2BAAqB;AAAA;AAGvB,QAAI,SAAS,KAAK,MAAM;AACtB,WAAK,YAAY,YAAY,KAAK,YAAY,OAAO;AAAA;AAEvD,SAAK,oBAAoB;AAAA;AAAA,EAG3B,SAAS,OAAqB;AAC5B,UAAM,MAAM,KAAK,IAAI,eAAe,KAAK;AACzC,YAAQ,KAAK,IAAI,KAAK,IAAI,OAAO,MAAM;AACvC,uBAAmB,IAAI;AAAA;AAAA,EAGzB,sBAAsB,OAAqB;AACzC,YAAQ,KAAK,IAAI,KAAK,IAAI,OAAO,gBAAgB;AACjD,+BAA2B,IAAI,KAAK,kBAAkB,OAAO,oBAAoB;AACjF,uBAAmB,IAAI;AAAA;AAAA,EAGzB,UAAU,QAAsB;AAC9B,UAAM,MAAM,KAAK,IAAI,eAAe,KAAK;AACzC,aAAS,KAAK,IAAI,KAAK,IAAI,QAAQ,MAAM;AACzC,QAAI,WAAW,KAAK,yBAAyB;AAC3C,eAAS;AAAA;AAEX,wBAAoB,IAAI;AAAA;AAAA,EAG1B,uBAAuB,QAAsB;AAC3C,aAAS,KAAK,IAAI,KAAK,IAAI,QAAQ,gBAAgB;AACnD,+BAA2B,IAAI,KAAK,kBAAkB,mBAAmB,OAAO;AAChF,wBAAoB,IAAI;AAAA;AAAA,EAG1B,SAAS,OAAqB;AAC5B,+BAA2B,IAAI;AAAA;AAAA,EAGjC,SAA8B;AAC5B,WAAO;AAAA;AAAA,EAGT,OAAkB;AAChB,WAAO;AAAA;AAAA,EAGT,OAAa;AACX,WAAO;AAAA;AAAA,EAGT,cAAsB;AACpB,WAAQ,wBAAwB,qBAAsB,qBAAqB,UAAU,sBAAsB;AAAA;AAAA,EAG7G,eAAuB;AACrB,WAAQ,wBAAwB,sBAAsB,mCAAmC,QACrF,qBAAqB,aAAa,sBAClC;AAAA;AAAA,EAGN,cAAyB;AACvB,WAAO,6BAA6B;AAAA;AAAA,EAGtC,aAAmB;AACjB,WAAO;AAAA;AAAA,EAGT,kBAAwB;AACtB,WAAO;AAAA;AAAA,EAGT,QAAgB;AACd,WAAO;AAAA;AAAA,EAGT,WAAmB;AACjB,WAAO;AAAA;AAAA,EAGT,oBAAsC;AACpC,WAAO;AAAA;AAAA,EAGT,2BAAmC;AACjC,WAAO;AAAA;AAAA,EAGT,uBAA2B;AACzB,WAAO;AAAA;AAAA,EAGT,eAAwB;AACtB,WAAO,CAAC,oBAAoB;AAAA;AAAA,EAGtB,WAAoB;AAC1B,YAAQ;AAAA,WACD,KAAK;AACR,eAAO,uBAAuB,qBAAqB,WAAW;AAAA,WAC3D,KAAK;AACR,eAAO;AAAA,WACJ,KAAK;AACR,eAAO,wBAAwB,UAAU,GAAG,UAAU,wBAAwB,UAAU,GAAG;AAAA;AAE/F,WAAO;AAAA;AAAA,EAGT,iBAAmD;AACjD,WAAO,OAAO,SAAS,SAAS,WAAW,cAAc,4BAA4B;AAAA;AAAA,EAGvF,eAAgD;AAC9C,WAAO;AAAA;AAAA,EAGT,YAAyC;AACvC,WAAO;AAAA;AAAA,EAGT,2BAA4D;AAC1D,WAAO;AAAA;AAAA,EAGT,uBAAyD;AACvD,WAAO;AAAA;AAAA,EAGT,gCAAkE;AAChE,WAAO;AAAA;AAAA,EAGT,QAAc;AACZ,2CAAuC,IAAI;AAC3C,+BAA2B,IAAI;AAC/B,SAAK,SAAS;AACd,SAAK,UAAU;AACf,4BAAwB,IAAI,GAAG;AAAA;AAAA,EAGjC,WAAW,gBAAyD;AAClE,QAAI,CAAC,wBAAwB,eAAe,2BAA2B;AACrE,6BAAuB;AACvB,UAAI,wBAAwB;AAC1B,cAAM,WAAW;AACjB,iCAAyB;AACzB;AAAA;AAEF,YAAM,oBAAoB,eAAe,SAAS,MAAM,IAAI,kBAAkB;AAC9E,UAAI,mBAAmB;AACrB,0BAAkB,iBAAiB,IAAI,kBAAkB,OAAO,cAAc,KAAK,eAAe;AAClG,0BAAkB,iBAAiB,IAAI,kBAAkB,OAAO,gBAAgB,KAAK,eAAe;AAAA;AAAA,WAEjG;AACL,WAAK,eAAe,aAAa,oBAAoB;AAAA;AAAA;AAAA,EAIzD,aAAa,gBAAyD;AACpE,QAAI,yBAAyB,gBAAgB;AAC3C,6BAAuB;AAAA;AAAA;AAAA,EAI3B,eAA4B;AAC1B,WAAO,uBAAuB,qBAAqB,SAAS,iBAAiB;AAAA;AAAA,EAGvE,gBAAsB;AAC5B,UAAM,eAAe,uBAAuB,qBAAqB,iBAAiB;AAClF,QAAI,CAAC,cAAc;AACjB;AAAA;AAGF,SAAK,sBAAsB;AAAA;AAAA,EAGrB,sBAA4B;AAClC,SAAK,oBAAoB;AAAA;AAAA,EAGnB,sBAA4B;AAClC,SAAK,oBAAoB;AAAA;AAAA,EAGnB,uBAA6B;AACnC,SAAK,oBAAoB;AAAA;AAAA,EAGnB,mBAAyB;AAC/B,SAAK,oBAAoB;AAAA;AAAA,EAGnB,kCAAwC;AAC9C,SAAK,oBAAoB;AAAA;AAAA,EAGnB,8BAAoC;AAC1C,SAAK,oBAAoB;AAAA;AAAA,EAGnB,uBAA+B;AACrC,WAAO,KAAK,MAAM,oBAAoB,QAAS,4BAA2B,SAAS;AAAA;AAAA,EAG7E,wBAAgC;AACtC,WAAO,KAAK,MAAM,oBAAoB,SAAU,4BAA2B,SAAS;AAAA;AAAA,EAG9E,iBAAyB;AAC/B,QAAI,UAAkB,IAAI,OAAO,GAAG,GAAG,GAAG;AAC1C,QAAI,uBAAuB,KAAK,UAAU,CAAC,wBAAwB,CAAC,oBAAoB;AACtF,aAAO;AAAA;AAET,UAAM,cAAc,qBAAqB,kBAAkB,mBAAmB;AAC9E,QAAI,mCAAmC,OAAO;AAC5C,gBAAU,YAAY,iBAAiB;AAAA;AAEzC,WAAO;AAAA;AAAA,EAGD,gBAAwB;AAC9B,QAAI,uBAAuB,KAAK,UAAU,CAAC,oBAAoB;AAC7D,aAAO,IAAI,OAAO,GAAG,GAAG,GAAG;AAAA;AAE7B,WAAO,mBAAmB;AAAA;AAAA,EAGpB,2BAAqE;AAC3E,QAAI,CAAC,oBAAoB;AACvB,YAAM,IAAI,MAAM;AAAA;AAElB,YAAQ,mBAAmB;AAAA,WACpB;AAAA,WACA;AACH,eAAO,SAAS,UAAU,sBAAsB;AAAA,WAC7C;AAAA,WACA;AAAA;AAEH,eAAO,SAAS,UAAU,sBAAsB;AAAA;AAAA;AAAA,EAI9C,oBAAoB,sBAAqC;AAC/D,QAAI,CAAC,sBAAsB;AACzB,+BAAyB,KAAK,oBAAoB,KAAK,MAAM;AAAA;AAE/D,UAAM,SAAS,KAAK;AACpB,UAAM,eAAe,uBAAuB,qBAAqB,iBAAiB;AAClF,QAAI,cAAc;AAChB,WAAK,sBAAsB;AAAA;AAE7B,QAAI,uBAAuB,KAAK,UAAU,wBAAwB,oBAAoB;AACpF,YAAM,cAAc,qBAAqB,kBAAkB,mBAAmB;AAC9E,YAAM,UAAU,KAAK;AACrB,YAAM,SAAS,KAAK;AACpB,+BAAyB,KAAK,kBAAkB,YAAY,OAAO,YAAY,QAAQ,SAAS;AAChG,UAAI,QAAQ;AACV,6CAAqC,qBAAqB,UAAU,GAAG,SAAS,GAAG;AAAA,aAC9E;AACL,6CAAqC,qBAAqB,UAAU,GAAG,eAAe,GAAG;AAAA;AAE3F,WAAK,mBACD,IAAI,GAAG,SAAS,KAAK,YAAY,OAAO,YAAY,SAAS,QAAQ,SACrE,2BAA2B,OAAO,qBAAqB,mBAAmB,QAC1E,KAAK,4BAA4B,sBAAsB;AAC3D,WAAK,eAAe,qBAAqB,WAAW,qBAAqB;AACzE,WAAK,WAAW,qBAAqB,SAAS;AAAA,eACrC,uBAAuB,KAAK,MAAM;AAC3C,+BAAyB,KAAK,kBAAkB,oBAAoB,OAAO,oBAAoB;AAC/F,2CAAqC,GAAG;AACxC,WAAK,mBACD,qBAAqB,IAAI,OAAO,GAAG,GAAG,GAAG,IAAI,IAAI,OAAO,GAAG,GAAG,GAAG,IAAI,GAAG,GAAG,QAAQ,MACnF;AACJ,WAAK,eAAe,IAAI;AACxB,WAAK,WAAW,OAAO;AAAA,eACd,uBAAuB,KAAK,YAAY;AACjD,UAAI,cAAc,mBAAmB;AACrC,UAAI,CAAC,eAAe,cAAc,KAAK,wBAAwB;AAC7D,sBAAc,KAAK;AAAA;AAErB,UAAI,eAAe,oBAAoB;AACvC,UAAI,CAAC,gBAAgB,eAAe,KAAK,yBAAyB;AAChE,uBAAe,KAAK;AAAA;AAEtB,YAAM,2BAA2B,SAAS,2BAA2B;AACrE,+BAAyB,KAAK,kBAAkB,mBAAmB,OAAO,oBAAoB;AAC9F,2CAAqC,wBAAwB;AAC7D,WAAK,mBACD,IAAI,GAAG,SAAS,KAAK,aAAa,eAAe,IAAI,OAAO,GAAG,GAAG,GAAG,IAAI,IAAI,OAAO,GAAG,GAAG,GAAG,IAC7F,2BAA2B,OAAO,uCAAuC,SAAS,0BAClF,QACA,gBAAgB,cAAc,SAAS,UAAU,sBAAsB,kBACzC,SAAS,UAAU,sBAAsB,kBACvE;AACJ,WAAK,eAAe,SAAS,yBAAyB,IAAI,SAAS,iCAAiC;AACpG,WAAK,WACD,wBAAwB,UAAU,GAAG,gBAAgB,wBAAwB,UAAU,GAAG,QAC1F,wBAAwB,UAAU,GAAG;AAAA;AAG3C,QAAI,cAAc;AAChB,mBAAa,4BAA4B,uBAAuB,KAAK;AAAA;AAEvE,SAAK,yBAAyB,OAAO;AAAA;AAAA,EAG/B,kBAAkB,aAAqB,cAAsB,SAAkB,QAAyB;AAC9G,UAAM,eAAe,UAAU,QAAQ,OAAO,QAAQ,QAAQ;AAC9D,UAAM,gBAAgB,UAAU,QAAQ,MAAM,QAAQ,SAAS;AAC/D,UAAM,cAAc,SAAS,OAAO,OAAO,OAAO,QAAQ;AAC1D,UAAM,eAAe,SAAS,OAAO,MAAM,OAAO,SAAS;AAC3D,QAAI,QAAQ,KAAK,IACb,cAAc,oBAAoB,QAAS,eAAc,gBAAgB,GACzE,eAAe,oBAAoB,SAAU,gBAAe,iBAAiB;AACjF,YAAQ,KAAK,IAAI,KAAK,MAAM,QAAQ,MAAM;AAE1C,QAAI,aAAa;AACjB,WAAO,aAAa,QAAQ,KAAK;AAC/B,UAAI,QAAQ;AACZ,UAAI,aAAa;AACf,gBAAQ,SAAS,OAAO,UAAW,eAAc,eAAe,aAAa;AAAA;AAE/E,UAAI,cAAc;AAChB,gBAAQ,SAAS,OAAO,UAAW,gBAAe,gBAAgB,aAAa;AAAA;AAEjF,UAAI,OAAO;AACT,eAAO,aAAa;AAAA;AAEtB,oBAAc;AAAA;AAEhB,WAAO,QAAQ;AAAA;AAAA,EAGjB,qBAAqB,OAAe,QAAsB;AACxD,+BAA2B,IAAI,KAAK,kBAAkB,OAAO;AAC7D,SAAK,SAAS;AACd,SAAK,UAAU;AAAA;AAAA,EAGT,eAAe,WAAmB,mBAAoE;AAC5G,QAAI,eAAe,0BAA0B,WAAW,qBAAqB,WAAW;AAAA;AAAA,EAGlF,mBACJ,YAA8B,QAAgB,SAAiB,OAAe,mBAC9E,QAAiB,mBAAkE,sBACnF,uBAA0C,OAAa;AACzD,eAAW,QAAQ,KAAK,IAAI,GAAG,KAAK,MAAM,WAAW;AACrD,eAAW,SAAS,KAAK,IAAI,GAAG,KAAK,MAAM,WAAW;AAEtD,QAAI,YAAsB,WAAW,QAAQ,OAAO,OAAO,OAAO;AAClE,QAAI,aAAuB,WAAW,SAAS,OAAO,MAAM,OAAO;AAEnE,UAAM,YAAY,OAAO;AACzB,UAAM,YAAY,OAAO;AACzB,UAAM,yBACF,sBAAsB,SAAS,UAAU,sBAAsB,mBAAmB,KAAK;AAE3F,sCAAkC;AAClC,6CAAyC,qBAAqB,OAAO;AACrE,+BAA2B,IAAI,KAC3B,KAAK,IAAI,GAAI,qBAAoB,QAAQ,WAAW,QAAQ,SAAS,IAAI,QAAQ,MAAM,OACvF,WAAW,QAAQ,OAAO,WAAW,SAAS;AAClD,gCAA4B,IAAI,KAC5B,yBAAyB,OAAO,QAAQ,OAAO,OAAO,GACrD,SAAQ,OAAO,WAAW,QAAQ,QAAQ,SAAS,OACnD,SAAQ,MAAM,WAAW,SAAS,QAAQ,UAAU;AACzD,oCAAgC,IAAI,KAChC,YAAY,OAAO,YAAY,OAC/B,KAAK,IAAI,YAAY,OAAO,oBAAoB,QAAQ,yBAAyB,OAAO,YAAY,QACpG,KAAK,IAAI,aAAa,OAAO,oBAAoB,SAAS,yBAAyB,MAAM,YAAY;AACzG,0BAAsB;AACtB,QAAI,CAAC,sBAAsB;AAEzB,UAAI,UAAU,KAAK,oBAAoB,SAAS,WAAW,SACvD,oBAAoB,UAAU,WAAW,QAAQ;AAEnD,oBAAY;AACZ,qBAAa;AAAA;AAEf,UAAI,8BAA8B,UAAU,YAAY,SACpD,8BAA8B,WAAW,aAAa,SAAS,OAAO,UAAU,YAAY,UAC5F,OAAO,UAAU,aAAa,QAAQ;AAExC,oBAAY;AACZ,qBAAa;AAAA;AAAA;AAIjB,QAAI,CAAC,sBAAsB;AACzB;AAAA;AAGF,QAAI,sBAAsB;AACxB,WAAK,qBAAqB;AAAA;AAE5B,QAAI,aAAa,cAAc,UAAU,qBAAqB,UAAU,KAAK,qBACzE,sBAAsB;AACxB,YAAM,UAA8D;AAAA,QAClE,OAAO;AAAA,QACP,QAAQ;AAAA,QACR;AAAA,QACA;AAAA,QACA;AAAA,QACA,aAAa,WAAW;AAAA,QACxB,cAAc,WAAW;AAAA,QACzB;AAAA,QACA;AAAA,QACA,oBAAoB;AAAA,QACpB,gBAAgB;AAAA,QAChB,mBAAmB;AAAA;AAErB,YAAM,iBAAiB,KAAK;AAC5B,UAAI,gBAAgB;AAClB,gBAAQ,iBAAiB;AAAA;AAE3B,UAAI,mBAAmB;AACrB,gBAAQ,oBAAoB,EAAC,MAAM,mBAAmB,OAAO;AAAA;AAE/D,WAAK,qBAAqB,cAAc;AAAA,WACnC;AACL,WAAK,qBAAqB,cAAc;AAAA;AAAA;AAAA,EAI5C,gBAAsB;AACpB,UAAM,eAAe,uBAAuB,qBAAqB,iBAAiB;AAClF,QAAI,cAAc;AAChB,mBAAa,uBAAuB;AAAA;AAAA;AAAA,EAIxC,yCAAkD;AAChD,WAAO;AAAA;AAAA,EAGT,6BAAsC;AACpC,WAAO,wDAAwD;AAAA;AAAA,QAG3D,kBAAkB,UAAmB,MAAqD;AAC9F,UAAM,qBACF,uBAAuB,qBAAqB,SAAS,MAAM,IAAI,mBAAmB,sBAAsB;AAC5G,QAAI,CAAC,oBAAoB;AACvB,aAAO;AAAA;AAGT,UAAM,eAAe,uBAAuB,qBAAqB,iBAAiB;AAClF,QAAI,cAAc;AAChB,mBAAa,4BAA4B;AAAA;AAI3C,QAAI,UAAU;AACZ,YAAM,UAAU,MAAM,mBAAmB;AACzC,UAAI,CAAC,SAAS;AACZ,eAAO;AAAA;AAIT,YAAM,gBAAgB,KAAK,IAAK,KAAK,IAAK,QAAQ;AAClD,aAAO,EAAC,GAAG,GAAG,GAAG,GAAG,OAAO,KAAK,MAAM,QAAQ,eAAe,QAAQ,KAAK,MAAM,gBAAgB,OAAO;AAAA;AAEzG,UAAM,aACF,MAAM,mBAAmB,kBAAkB,SAAS,KAAK,+BAA+B,KAAK,KAAK;AAEtG,UAAM,gBAA+D;AAAA,MACnE,OAAO;AAAA,MACP,QAAQ;AAAA,MACR,mBAAmB;AAAA,MACnB,QAAQ;AAAA;AAEV,QAAI,YAAY,sBAAsB;AACpC,UAAI,wBAAwB,oBAAoB;AAC9C,cAAM,cAAc,qBAAqB,kBAAkB,mBAAmB;AAC9E,sBAAc,QAAQ,YAAY;AAClC,sBAAc,SAAS,YAAY;AACnC,cAAM,cAAc,KAAK;AACzB,YAAI,aAAa;AAIf,wBAAc,iBAAiB;AAAA;AAAA,aAE5B;AACL,sBAAc,QAAQ;AACtB,sBAAc,SAAS;AAAA;AAEzB,YAAM,qBAAqB,cAAc;AAAA;AAE3C,SAAK,oBAAoB;AACzB,WAAO;AAAA;AAAA,EAGD,WAAW,cAAuB,QAAuB;AAC/D,yBAAqB;AACrB,wBAAoB;AACpB,eAAW,kBAAkB,IAAI,cAAc,cAAc,WAAW,OAAO,IAAI,eAAe,iBAAiB;AACjH,WAAK,eAAe,aAAa,cAAc;AAAA;AAAA;AAAA,EAI3C,sBAAsB,cAAmD;AAC/E,UAAM,cAAe,wBAAwB,qBACzC,qBAAqB,kBAAkB,mBAAmB,eAC1D;AACJ,QAAI,qCAAqC,eAAe,YAAY,OAAO;AACzE,mBAAa,uBAAuB,YAAY;AAChD;AAAA;AAGF,iBAAa,uBAAuB;AAAA;AAAA,EAG9B,+BAA6E;AACnF,QAAI,CAAC,oBAAoB;AACvB,YAAM,IAAI,MAAM;AAAA;AAElB,YAAQ,mBAAmB;AAAA,WACpB;AAAA,WACA;AACH,eAAO,SAAS,UAAU,0BAA0B;AAAA,WACjD;AAAA,WACA;AAAA;AAEH,eAAO,SAAS,UAAU,0BAA0B;AAAA;AAAA;AAAA,EAIlD,oBAA4D;AAClE,QAAI,CAAC,KAAK,8BAA8B;AACtC,aAAO;AAAA;AAGT,QAAI,CAAC,wBAAwB,CAAC,sBACzB,mBAAmB,gBAAgB,mBAAmB,mBAAmB,gBAAgB,mBAAoB;AAChH,aAAO;AAAA;AAGT,UAAM,cAAc,qBAAqB,kBAAkB,mBAAmB;AAC9E,QAAI,CAAC,eAAe,CAAC,YAAY,OAAO;AACtC,aAAO;AAAA;AAGT,UAAM,QAAQ,YAAY;AAC1B,WAAO;AAAA,MACL,aAAa,KAAK;AAAA,MAClB,QAAS,mBAAmB,gBAAgB,kBAAmB,MAAM,IAAI,MAAM;AAAA,MAC/E,YAAa,mBAAmB,gBAAgB,kBAAmB,MAAM,QAAQ,MAAM;AAAA;AAAA;AAAA;AAKtF,oBAAa;AAAA,EAClB,YAAmB,MAAqB,KAAoB,OAAsB,QAAgB;AAA/E;AAAqB;AAAoB;AAAsB;AAAA;AAAA,EAGlF,QAAQ,QAA8B;AACpC,WAAO,WAAW,QAAQ,KAAK,SAAS,OAAO,QAAQ,KAAK,QAAQ,OAAO,OAAO,KAAK,UAAU,OAAO,SACpG,KAAK,WAAW,OAAO;AAAA;AAAA;AAIxB,kBAAW;AAAA,EAChB,YAAmB,MAAqB,KAAoB,OAAsB,QAAgB;AAA/E;AAAqB;AAAoB;AAAsB;AAAA;AAAA,EAGlF,QAAQ,MAA0B;AAChC,WAAO,SAAS,QAAQ,KAAK,SAAS,KAAK,QAAQ,KAAK,QAAQ,KAAK,OAAO,KAAK,UAAU,KAAK,SAC5F,KAAK,WAAW,KAAK;AAAA;AAAA,EAG3B,MAAM,OAAqB;AACzB,WAAO,IAAI,KAAK,KAAK,OAAO,OAAO,KAAK,MAAM,OAAO,KAAK,QAAQ,OAAO,KAAK,SAAS;AAAA;AAAA,EAGzF,WAAW,QAAoB;AAC7B,WAAO,IAAI,KAAK,KAAK,OAAO,OAAO,MAAM,KAAK,MAAM,OAAO,KAAK,KAAK,OAAO,KAAK;AAAA;AAAA,EAGnF,SAAS,QAAoB;AAC3B,WAAO,IAAI,KAAK,KAAK,OAAO,OAAO,MAAM,KAAK,MAAM,OAAO,KAAK,KAAK,OAAO,KAAK;AAAA;AAAA;AAI9E,WAAW,SAAX,kBAAW,YAAX;AACL,uBAAU;AADM;AAAA;AAUX,WAAK,OAAL,kBAAK,UAAL;AACL,kBAAO;AACP,wBAAa;AACb,oBAAS;AAHC;AAAA;AAQL,WAAK,KAAL,kBAAK,QAAL;AAGL,kBAAS;AACT,yBAAgB;AAChB,mBAAU;AACV,wBAAe;AANL;AAAA;AASL,aAAM,gBAAgB;AACtB,aAAM,gBAAgB;AACtB,aAAM,uBAAuB;AAC7B,aAAM,uBAAuB;AAC7B,aAAM,sBAAsB;AAEnC,MAAM,kBACF;AACJ,MAAM,yBACF,IAAI,eAAe,0BAA0B,gCAAgC;AAEjF,MAAM,iCAAiC;AAAA,EACrC,UAAU;AAAA,EACV,iBAAiB;AAAA,EACjB,cAAc;AAAA,EACd,OAAO;AAAA,EACP,QAAQ;AAAA;AAEH,aAAM,2BAA2B;",
  "names": []
}
