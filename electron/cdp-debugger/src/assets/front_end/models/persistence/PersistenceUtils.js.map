{
  "version": 3,
  "sources": ["../../../../../../front_end/models/persistence/PersistenceUtils.ts"],
  "sourcesContent": ["// Copyright 2016 The Chromium Authors. All rights reserved.\n// Use of this source code is governed by a BSD-style license that can be\n// found in the LICENSE file.\n\nimport * as Common from '../../core/common/common.js';\nimport * as i18n from '../../core/i18n/i18n.js';\nimport * as Platform from '../../core/platform/platform.js';\nimport * as Components from '../../ui/legacy/components/utils/utils.js';\nimport * as UI from '../../ui/legacy/legacy.js';\nimport * as Workspace from '../workspace/workspace.js';\n\nimport {FileSystemWorkspaceBinding} from './FileSystemWorkspaceBinding.js';\nimport {NetworkPersistenceManager} from './NetworkPersistenceManager.js';\n\nimport type {PersistenceBinding} from './PersistenceImpl.js';\nimport {Events, PersistenceImpl} from './PersistenceImpl.js';\n\nconst UIStrings = {\n  /**\n  *@description Text in Persistence Utils of the Workspace settings in Settings\n  *@example {example.url} PH1\n  */\n  linkedToSourceMapS: 'Linked to source map: {PH1}',\n  /**\n  *@description Text to show something is linked to another\n  *@example {example.url} PH1\n  */\n  linkedToS: 'Linked to {PH1}',\n};\nconst str_ = i18n.i18n.registerUIStrings('models/persistence/PersistenceUtils.ts', UIStrings);\nconst i18nString = i18n.i18n.getLocalizedString.bind(undefined, str_);\nexport class PersistenceUtils {\n  static tooltipForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): string {\n    const binding = PersistenceImpl.instance().binding(uiSourceCode);\n    if (!binding) {\n      return '';\n    }\n    if (uiSourceCode === binding.network) {\n      return FileSystemWorkspaceBinding.tooltipForUISourceCode(binding.fileSystem);\n    }\n    if (binding.network.contentType().isFromSourceMap()) {\n      return i18nString(\n          UIStrings.linkedToSourceMapS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n    }\n    return i18nString(UIStrings.linkedToS, {PH1: Platform.StringUtilities.trimMiddle(binding.network.url(), 150)});\n  }\n\n  static iconForUISourceCode(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Icon.Icon|null {\n    const binding = PersistenceImpl.instance().binding(uiSourceCode);\n    if (binding) {\n      if (!binding.fileSystem.url().startsWith('file://')) {\n        return null;\n      }\n      const icon = UI.Icon.Icon.create('mediumicon-file-sync');\n      UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(binding.network));\n      if (NetworkPersistenceManager.instance().project() === binding.fileSystem.project()) {\n        icon.classList.add('purple-dot');\n      }\n      return icon;\n    }\n    if (uiSourceCode.project().type() !== Workspace.Workspace.projectTypes.FileSystem ||\n        !uiSourceCode.url().startsWith('file://')) {\n      return null;\n    }\n\n    const icon = UI.Icon.Icon.create('mediumicon-file');\n    UI.Tooltip.Tooltip.install(icon, PersistenceUtils.tooltipForUISourceCode(uiSourceCode));\n    return icon;\n  }\n}\n\nexport class LinkDecorator extends Common.ObjectWrapper.ObjectWrapper<Components.Linkifier.LinkDecorator.EventTypes>\n    implements Components.Linkifier.LinkDecorator {\n  constructor(persistence: PersistenceImpl) {\n    super();\n    persistence.addEventListener(Events.BindingCreated, this.bindingChanged, this);\n    persistence.addEventListener(Events.BindingRemoved, this.bindingChanged, this);\n  }\n\n  private bindingChanged(event: Common.EventTarget.EventTargetEvent<PersistenceBinding>): void {\n    const binding = event.data;\n    this.dispatchEventToListeners(Components.Linkifier.LinkDecorator.Events.LinkIconChanged, binding.network);\n  }\n\n  linkIcon(uiSourceCode: Workspace.UISourceCode.UISourceCode): UI.Icon.Icon|null {\n    return PersistenceUtils.iconForUISourceCode(uiSourceCode);\n  }\n}\n"],
  "mappings": "AAIA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAGA;AAEA,MAAM,YAAY;AAAA,EAKhB,oBAAoB;AAAA,EAKpB,WAAW;AAAA;AAEb,MAAM,OAAO,KAAK,KAAK,kBAAkB,0CAA0C;AACnF,MAAM,aAAa,KAAK,KAAK,mBAAmB,KAAK,QAAW;AACzD,8BAAuB;AAAA,SACrB,uBAAuB,cAA2D;AACvF,UAAM,UAAU,gBAAgB,WAAW,QAAQ;AACnD,QAAI,CAAC,SAAS;AACZ,aAAO;AAAA;AAET,QAAI,iBAAiB,QAAQ,SAAS;AACpC,aAAO,2BAA2B,uBAAuB,QAAQ;AAAA;AAEnE,QAAI,QAAQ,QAAQ,cAAc,mBAAmB;AACnD,aAAO,WACH,UAAU,oBAAoB,EAAC,KAAK,SAAS,gBAAgB,WAAW,QAAQ,QAAQ,OAAO;AAAA;AAErG,WAAO,WAAW,UAAU,WAAW,EAAC,KAAK,SAAS,gBAAgB,WAAW,QAAQ,QAAQ,OAAO;AAAA;AAAA,SAGnG,oBAAoB,cAAsE;AAC/F,UAAM,UAAU,gBAAgB,WAAW,QAAQ;AACnD,QAAI,SAAS;AACX,UAAI,CAAC,QAAQ,WAAW,MAAM,WAAW,YAAY;AACnD,eAAO;AAAA;AAET,YAAM,QAAO,GAAG,KAAK,KAAK,OAAO;AACjC,SAAG,QAAQ,QAAQ,QAAQ,OAAM,iBAAiB,uBAAuB,QAAQ;AACjF,UAAI,0BAA0B,WAAW,cAAc,QAAQ,WAAW,WAAW;AACnF,cAAK,UAAU,IAAI;AAAA;AAErB,aAAO;AAAA;AAET,QAAI,aAAa,UAAU,WAAW,UAAU,UAAU,aAAa,cACnE,CAAC,aAAa,MAAM,WAAW,YAAY;AAC7C,aAAO;AAAA;AAGT,UAAM,OAAO,GAAG,KAAK,KAAK,OAAO;AACjC,OAAG,QAAQ,QAAQ,QAAQ,MAAM,iBAAiB,uBAAuB;AACzE,WAAO;AAAA;AAAA;AAIJ,mCAA4B,OAAO,cAAc,cACN;AAAA,EAChD,YAAY,aAA8B;AACxC;AACA,gBAAY,iBAAiB,OAAO,gBAAgB,KAAK,gBAAgB;AACzE,gBAAY,iBAAiB,OAAO,gBAAgB,KAAK,gBAAgB;AAAA;AAAA,EAGnE,eAAe,OAAsE;AAC3F,UAAM,UAAU,MAAM;AACtB,SAAK,yBAAyB,WAAW,UAAU,cAAc,OAAO,iBAAiB,QAAQ;AAAA;AAAA,EAGnG,SAAS,cAAsE;AAC7E,WAAO,iBAAiB,oBAAoB;AAAA;AAAA;",
  "names": []
}
