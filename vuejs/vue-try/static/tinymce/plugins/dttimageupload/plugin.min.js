(function () {
    tinymce.create('tinymce.plugins.dttimageupload',{
        init(ed) {
            ed.addCommand('dttimageupload', () => {
                const target = ed.selection.getNode();
                console.log(target)

                ed.windowManager.open({
                    title:'上传图片',
                    width:600,
                    height:200,
                    body: [{
                        type:'container',
                        html:`
                        <div class="mce-container" hidefocus="1" tabindex="-1">
                            <div style="mce-container-body mce-container-dttimage-body"> 
                                <input type="file" placeholder="选择一张图片" id="dttimg">
                            </div>
                        </div>`
                    }],
                    onSubmit() {
                        console.log(123)
                        const img = document.getElementById('dttimg')
                        // console.log(img.files)
                        console.log(this)
                    }
                })
            })

            ed.addButton('dttimageupload',{
                title:'dttimageupload',
                text:'大头贴',
                cmd:'dttimageupload'
            })
        }


    });
    tinymce.PluginManager.add('dttimageupload',tinymce.plugins.dttimageupload)
}());
